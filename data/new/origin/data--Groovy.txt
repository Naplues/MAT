//  todo: inner class nodes don't have an objectInitializers field available 
//         currently char isn't found due to a bug, so go with Object 
/* dummy receiver: */
//  TODO check specified type is assignable from declared param type?   ClassNode type = getMemberClassValue(namedParam, "type"); 
/*  todo these special cases should be special MetaClasses maybe  */
//  @todo - refactor pulling generic parser interface up 
//  hack to reformat other groovydoc block tags (@see, @return, @param, @throws, @author, @since) into html 
/*  To swap two children of node t...     *     *<pre>     *   (t)     *    |     *    |     *   (a) -- (b)     *     * t.down = firstNode     * a.right = b     * b.right = null     *</pre>     * becomes     *<pre>     *   (t)     *    |     *    |     *   (b) -- (a)     *     * t.down = b     * a.right = null     * b.right = a     *</pre>     *     * todo - build API of basic tree mutations like this method.      */
// TODO: in case of the array we could maybe make a partial check 
//  TODO: maybe define a Throwable and use it here instead of Object 
// TODO: change that to get the correct scope 
/*  * @todo multi threaded compiling of the same class but with different roots * for compilation... T1 compiles A, which uses B, T2 compiles B... mark A and B * as parsed and then synchronize compilation. Problems: How to synchronize? * How to get error messages? *  */
// workaround for Groovy-835 
// There HAS to be a better way to do this! 
//  Groovy allows more characters than Character.isValidJavaIdentifier() would allow   if we find a good way to encode special chars we could remove (some of) these checks 
//  TODO: this might not do enough or too much   But it is a good start without spreading logic everywhere 
//  hack warning! fragile! TODO find a better way 
/*      * TODO: Should return the URI for this source, but we can't know what it is here.     *     * @return null      */
//  TODO includes? excludes? 
//  cast with explicit weaker generics for now to keep jdk6 happy, TODO: find better fix 
// TODO: report multiple missing labels of the same name only once? 
//  GROOVY-6337 HACK: in case newly created field is @Lazy 
//  ignore   TODO should use a low priority logger 
//  TODO the buffer is not read up to the end, but up to length - 6 
//  FIXME no implementation?          SoftDoubleKeyMap.Entry val = (SoftDoubleKeyMap.Entry) assignableMap.getOrPut(klazz, aClass, null); 
//  todo: this might not work correctly for absolute paths 
// TODO: don't ignore inner static classes completely 
//  TODO store this on root node? reset bodyText? 
//  TODO use PackageNode instead here? 
//  TODO: move somewhere else GROOVY-1874 
//  TODO consider moving initcode to <clinit> and remaking field final 
// TODO: inner classes mean a different this-type. This is ignored here! 
//  this is only correct in this context here, normally   we would have to compile against compareTo if available   but since we don't compile here, this one is enough 
//    FIXME: Use List<String> here, current version is not safe   
//  temporary hack 
//  todo windows?? 
//    HACK: For now force all classes to compile, so we pick up stub changes 
//  TODO instead of catching Object<T> here stop it from being placed into type in first place 
//  TODO should we check package node doesn't already exist? conflict? 
//  TODO: For GROOVY-2599 do we need something like below but it breaks other things              return (String) invokeMethod(arguments, "toString", EMPTY_ARGS); 
//  TODO make EmptyExpression work   partially works but not if only thing in script   return EmptyExpression.INSTANCE; 
//  todo - possibly check for line/col with values of 0 or less... 
// TODO: this method should really return some kind of meta ClassNode   representing the combination of all bounds. The code here, just picks   something out to be able to proceed and is not actually correct 
/*      * NOTE: as per the class javadoc, this class doesn't obey the normal equals/hashCode contract.     * The following field and method could assist some scenarios which required a similar sort of contract     * (but between equals and the custom canonicalHashCode). Currently commented out since we haven't     * found a real need. We will likely remove this commented out code if no usage is identified soon.      */
/*      * Represents GenericsType name     * TODO In order to distinguish GenericsType with same name(See GROOVY-8409), we should add a property to keep the declaring class.     *     * fixing GROOVY-8409 steps:     * 1) change the signature of constructor GenericsTypeName to `GenericsTypeName(String name, ClassNode declaringClass)`     * 2) try to fix all compilation errors(if `GenericsType` has declaringClass property, the step would be a bit easy to fix...)     * 3) run all tests to see whether the change breaks anything     * 4) if all tests pass, congratulations! but if some tests are broken, try to debug and find why...     *     * We should find a way to set declaring class for `GenericsType` first, it can be completed at the resolving phase.      */
// todo we should flag this when the path is created that this is a field not a prop...   try direct method... 
// TODO: maybe implement the case localDistance==distance 
//  major hack here...! 
//  getTarget(var) can be null in buggy xform code, e.g. Spock <= 1.1   TODO consider removing fixVar once Spock 1.2 is released - replace with informational exception? 
//  TODO: enforce stricter behavior?   given Map.Entry is an interface, we get a proxy which gives us lots   of flexibility but sometimes the error messages might be unexpected 
// TODO: maybe do something here? 
// TODO: more cases here 
//  TODO refactor to retain richer type information rather than converting to String 
//  FIXME: all labeled arguments should follow any unlabeled arguments 
// @todo - is this useful? 
//  @todo refactor this path 
//    FIXME: For now just save the first error, should really roll a new message with all of the details   
//  should we use a finer grained lock than this? 
//  it's better to cache class instances by the source code   GCL will load the unique class instance for the same source code   and avoid occupying Permanent Area/Metaspace repeatedly 
//  is method object correct type? 
//  A little bit of paranoid checking here? Most drivers will throw BatchUpdateException perhaps? 
//  ... fits badly ? 
// TODO After 1.1 we should introspect the meta property and set editable to false if the property is read only 
// TODO: replace with normal String, p not needed 
//  @todo should try with just a node as the child 
//  hack warning!   TODO handle , and ) when they occur within Strings 
//  TODO: this method is very similar to StaticTypesCheckingSupport#extractGenericsConnections,   but operates on ClassNodes instead of GenericsType 
// TODO: set correct type here   if setting type and a methodcall is the last expression in a method,   then the method will return null if the method itself is not void too!   (in bytecode after call: aconst_null, areturn) 
//  TODO handle the owner and delegate cases better for nested scenarios and potentially remove the need for the implicit this case 
// LOGME   do we ignore it, or fail? 
//         "The class 'DodgyClass' has an incorrect modifier synchronized."; 
//  we can't have a specialized version of call(Object...) because the dispatch logic in ClosureMetaClass   is too complex! 
// TODO: implement 
//  Don't do this in static initializer because we may never be needed.   TODO: Put this lineSeparator property somewhere everyone can use it. 
/*      * NOTE: as per the class javadoc, this class doesn't obey the normal equals/hashCode contract.     * The following field and method could assist some scenarios which required a similar sort of contract     * (but between fastEquals and the custom fastHashCode). Currently commented out since we haven't     * found a real need. We will likely remove this commented out code if no usage is identified soon.      */
//  this should always be the case, but adding a test is safer 
//  TODO: not sure why but groovy.ui.view.BasicContentPane#buildOutputArea classDoc is null 
//  todo: the check for isWildcard should be replaced with a more complete check 
//  TODO: is it safe to remove this? What was the original intention? 
//  TODO is this needed so we can click through on default values?      @Override 
//  TODO implement below if/when needed 
//  TODO expose this for stream based stripping? 
//  RFC 2045 says that I'm allowed to take the presence of   these characters as evidence of data corruption   So I will   TODO: change this exception type 
// todo: doesn't parse correctly...   assertEquals("class Foo<T super C> {T t}",pretty("class Foo<T super C> {T t}")); 
//  todo : confirm that TYPE_LOWER_BOUNDS does not have multiple children 
//  todo: handle vargs! 
//  TODO: can STCV be made smarter to avoid this check? 
// TODO: maybe use more specialized type here 
//  TODO make this a method to be called from TupleConstructor xform, add check for 'defaults'? 
//  normally we would do the following   handle = MethodHandles.dropArguments(handle,0,Class.class);   but because there is a bug in invokedynamic in all jdk7 versions    maybe use Unsafe.ensureClassInitialized 
//  TODO this really should find "best" match or find all matches and complain about ambiguity if more than one   TODO handle getAt with more than one parameter   TODO handle default getAt methods on Java 8 interfaces 
//  is method name correct? 
/*      * Compiler configuration.     * <p>     * Used to specify the debug output to print stacktraces in case something fails.     * TODO: Could probably be reused to specify the encoding of the files to load or other properties.      */
// TODO: the case of a NoClassDefFoundError needs a bit more research   a simple recompilation is not possible it seems. The current class   we are searching for is there, so we should mark that somehow.   Basically the missing class needs to be completely compiled before   we can again search for the current name. 
//  TODO below will be deleted once we fix type checker to understand   readonly Map otherwise seen as Map<String, Serializable> 
//  GROOVY-5814: Immutable is not compatible with @CompileStatic 
//  todo: remove after putAt(Splice) gets deleted 
// TODO in Groovy 2.0 use varargs? 
//  TODO expose this for other usage scenarios, e.g. stream based stripping? 
/*     A better set of more complete tests of everything below is on the way!     */
//  todo - the visitor doesn't always take PrintStreams as constructor params!  Could be a more reusable implementation than this... 
//  TODO: remove this visit 
//  TODO we might wanna only try to resolve the name if we are   on the left hand side of an expression or before a dot? 
//  TODO GroovyDoc doesn't parse this file as our java.g doesn't handle this JDK7 syntax 
//  Convenience hack: try convert single-char strings to ints 
//  not thread safe 
//  TODO refactor PIPE to be BITWISE_OR 
//  Implementation note - there are several ways for the Groovy compiler   to report an unexpected EOF. Perhaps this implementation misses some.   If you find another way, please add it. 
//  Keep the same default source encoding with the one used by #parseClass(InputStream, String)   TODO should we use org.codehaus.groovy.control.CompilerConfiguration.DEFAULT_SOURCE_ENCODING instead? 
//  TODO should we make ProxyGenerator singleton? 
// TODO: this Object[] can be constant 
/*  here is a different implementation that uses getProperties(). I have left         * it commented out because it returns a slightly different list of properties;         * i.e. it does not return privates. I don't know what dump() really should be doing,         * although IMO showing private fields is a no-no          */
//  TODO also check for phase after sourceUnit.getPhase()? but will be ignored anyway?   TODO we should only copy those annotations with FIELD_TARGET but haven't visited annotations   and gathered target info at this phase, so we can't do this:   return annotation.isTargetAllowed(AnnotationNode.FIELD_TARGET);   instead just don't copy ourselves for now 
// todo: these fail because regexp_literals are converted into string_literals on the antlr AST 
//  TODO remove this once we support declarations in the while condition 
//  TODO: have to think about how to optimize this! 
//  TODO cache these?? 
//  TODO find a way to inject any GroovyLexer/GroovyRecognizer 
/*      * TODO(jwagenleitner): remove or fix in future release     *     * According to the spec getContentEncoding() returns the Content-Encoding     * HTTP Header which typically carries values such as 'gzip' or 'deflate'     * and is not the character set encoding. For compatibility in 2.4.x,     * this behavior is retained but should be removed or fixed (parse     * charset from Content-Type header) in future releases.     *     * see GROOVY-8056 and https://github.com/apache/groovy/pull/500      */
//             //TODO: test if this is OK with new MOP, should be changed!              // we don't want the exception being unwrapped if it is a IllegalArgumentException              // but in the case it is for example a IllegalThreadStateException, we want the unwrapping              // from the runtime              //Note: the reason we want unwrapping sometimes and sometimes not is that the method              // invocation tries to invoke the method with and then reacts with type transformation              // if the invocation failed here. This is OK for IllegalArgumentException, but it is              // possible that a Reflector will be used to execute the call and then an Exception from inside              // the method is not wrapped in a InvocationTargetException and we will end here.              boolean setReason = e.getClass() != IllegalArgumentException.class || this instanceof org.codehaus.groovy.reflection.GeneratedMetaMethod;              return MetaClassHelper.createExceptionText("failed to invoke method: ", this, object, argumentArray, e, setReason);          } 
//  TODO @Deprecated 
//  should we throw invalid binding exception?  or fail quietly? 
//  todo: is there anything to do with the module ??? 
// TODO: we should consider calling this one directly for MetaClassImpl,        then we save the new method selection 
//  todo will 'super' be allowed in non-parentheses method call styles? 
// todo AntlrParserPlugin: Unexpected node type: '.' found when expecting type: an identifier   fails after parser 
//                     TODO: should be better check for case when only diff in modifiers can be SYNTHETIC flag                      && method.getModifiers() == aMethod.getModifiers() 
//  TODO: checking for isThisOrSuper is enough for AttributeExpression, but if this is moved into   visitAttributeOrProperty to handle attributes and properties equally, then the extended check should be done 
// TODO: These are the arguments for -p and -i.  Why are we searching using Groovy script extensions?   Where is this documented? 
//  TODO decide if we should support VOLATILE 
//  the groovy.compiler.strictNames system property is experimental and may change default value or be removed in a future version of Groovy 
//  TODO: delete this constant? 
//  TODO track Deprecated usage and give a warning? 
//  fail early with a direct message if possible') 
//  Java2Groovy produces a slightly different tree structure (TODO fix converter or java.g instead?) 
// TODO: maybe use a different bootstrap method since no arguments are needed here 
/*          * TODO : Enable auto ".groovy" extension replacing here!         * http://cvs.groovy.codehaus.org/viewrep/groovy/groovy/groovy-core/src/main/groovy/servlet/GroovyServlet.java?r=1.10#l259          */
//  TODO: spread safe should be handled inside 
//  TODO: do we need to lock down things like: $ownClass 
//  todo : are there other import types that can be specified? 
//  TODO consider creating an element for this 
//  try to get a better error message location based on the property 
//  TODO: add more tests in here (is there a way to share snippets with SourcePrinterTest?) 
// TODO: create a WriteOnlyException class? 
//  TODO: if our code can never access inspect in this way, it would be better 
//  TODO: investigate the trait exclusion a bit further, needed otherwise   CallMethodOfTraitInsideClosureAndClosureParamTypeInference fails saying   not static method can't be called from a static context 
// TODO: need errors for write-only too! 
// TODO: optimize: add guard based on type Closure 
//  TODO fix 
//  TODO remove? 
//  todo: should this be directly handled by getPlainNodeReference? 
// TODO: apply generics on parameter[0]?                                  storeType(pexp, setter.getParameters()[0].getType()); 
// TODO: more than one lower bound for wildcards? 
//  BUG! exception in phase 'conversion' in source unit 'Script1.groovy' null   fails after parser 
//  TODO: Add methods like addMetaConstructor, addMetaAttribute, addMetaAnnotation etc. 
//  todo: above is not quite the spacing I would expect, but good enough for now...   todo not yet implemented in parser: assertEquals("(new Outer()).super()", pretty("(new Outer()).super()")); 
//  GROOVY-7316 : it is an apparently legal thing to allow this. It's not type safe, 
//  TODO handle ACC_SYNTHETIC for enum method parameters? 
//  TODO: change this exception type 
//  by default use GrapeIvy  TODO META-INF/services resolver? 
//  this is a limitation that must be removed in a future version   we cannot check generic type arguments if there are default parameters! 
//  todo : type inference on maps and lists, if possible 
//  HACK: JavaStubGenerator could have snuck in a constructor we don't want 
// TODO: apply right generics here! 
// TODO: get the type's of the expressions to specify the   list type to List<X> if possible. 
//  TODO a better way to do this? 
//  TODO make @CS lookup smarter so that we don't need both these maps 
// TODO: that is just a quick prototype, not the real thing! 
//  TODO IllegalArgumentException for marginChar.length() > 1 ? Or support String as marker? 
// todo, the spacing here is... unusual 
//  should we check interfaces as well?  if so at what level? 
//  TODO add generics support so this can be used for @EAHC 
//  since the calling code will push the type again, we better remove it here 
//  cater for explicit href in e.g. @see, TODO: push this earlier? 
// TODO: if rhs is VariableSlotLoader already, then skip crating a new one 
//  todo: inner class nodes don't have a constructors field available 
//  FRICKIN' HACK!!!!! For some reason, deleting a string at offset 0   does not get done properly, so first replace and remove after parsing 
//  note: def not needed in parameter declarations, but it is valid  todo: is it ok to strip out 'def' from parameter declarations? 
// TODO: get the type's of the expressions to specify the   map type to Map<X> if possible. 
// todo spacing is odd, c.f. last space in class vs interface above 
//  todo - 17 July 2006 - test fine, however this parses but causes error in AntlrParserPlugin   fails after parser 
//  TODO expose this for stream based scenarios? 
//  TODO This is the only area where this MetaClass needs to do some interception because Groovy's current   MetaClass uses hard coded references to the java.lang.reflect.Constructor class so you can't simply   inject Constructor like you can do properties, methods and fields. When Groovy's MetaClassImpl is   refactored we can fix this 
//  TODO: is there a better way to do this? 
//  TODO FIX if empty, AssertionWriter fails because source text is null 
//  TODO this won't strictly be true when using list expansion in argument calls 
//  should always be the case, but safe guard is better 
// TODO: remove this method if possible by switchpoint usage 
//  are we a local variable?   it should not be an explicitly "this" qualified method call   and the current class should have a possible method 
//  TODO: move somewhere else 
//  TODO: Shouldn't these extensions be kept elsewhere?  What about CompilerConfiguration?   This method probably shouldn't be in GroovyMain either. 
/*  Should we make the following method private?  */
// FIXME the warning message will NPE with what I have :( 
//  TODO need returnType.qualifiedTypeName() here 
// FIXME: do we really want this() to create a new object regardless   the position.. for example not as first statement in a constructor   this=first statement in constructor is handled by specialConstructorCallExpression 
/*  *  todo: order methods alphabetically (implement compareTo enough?)  */
//  todo: performance would be better if we created a StringBuilder 
//  TODO remove dupe with SimpleGroovyType 
// TODO: more finals? 
//  ugly hack   type definition, i.e.   int[] x; 
//  GROOVY-8914: pre-compiled classes lose synthetic boolean - TODO fix earlier as per GROOVY-4346 then remove extra check here 
//  TODO: Should we have some unified function like PrintWriter.checkError()? 
// TODO: check if this part is actually used 
//  todo: above is not quite the spacing I would expect, but good enough for now... 
//  TODO consider moving next two statements "up a level", i.e. have just one more widely invoked 
//  TODO: this should go away once we have proper tags 
/*  @todo we should check if we have the property with the metaClass instead of try/catch   */
//  TODO shouldn't really be treating annotation fields as methods - remove this hack 
//  TODO intern types?   TODO configureAST(...) 
//  todo - inline open block is great, but it doesn't work as one would expect (yet). (c.f. with)   slist inside a method body (needed label to distinguish from a closure)   slist inside each case body... 
/*              * TODO treble equal?             return binaryExpression(Types.COMPARE_IDENTICAL, node);             case ???:             return binaryExpression(Types.LOGICAL_AND_EQUAL, node);             case ???:             return binaryExpression(Types.LOGICAL_OR_EQUAL, node);              */
//  FIXME:  What should we use as the base URI?   It is unlikely we get to this point with a relative URI since making a URL   from will make it absolute I think.  But lets handle the simple case of   using file paths and turning that into an absolute file URI.   So we will use the current working directory as the base. 
// todo the following is legal Java, but pretty strange...?   fails after parser 
//  TODO should this really be static???   cleared on build(), to be safe 
//  TODO validate args? 
// TODO Joche: replace with real implementation 
//  Shall we allow this ? Using Boolean ctors is usually not what user wants... 
//  GROOVY-8174: we'd like stricter checking here but many drivers currently in use just aren't consistent enough, so we log 
//  Create one script per socket connection.   This is purposefully not caching the Script   so that the script source file can be changed on the fly,   as each connection is made to the server.  FIXME: Groovy has other mechanisms specifically for watching to see if source code changes.   We should probably be using that here.   See also the comment about the fact we recompile a script that can't change. 
// todo test newlines inside strings somehow... 
// TODO: maybe use more special type StringBuffer here 
/*              * Other internal error. Perhaps syntax?!              */
/*               Currently leaving BigInteger and BigDecimal in list but see:              http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6348370              Also, Color is not final so while not normally used with child              classes, it isn't strictly immutable. Use at your own risk.              This list can by extended by providing "known immutable" classes              via Immutable.knownImmutableClasses              */
//  todo - incomplete, as body of do...while... should be executed at least once, which this doesn't provide. 
//  we found multiple matching methods   this is a problem, because we can use only one   if it is a getter, then use the most general return   type to decide which method to use. If it is a setter 
//  todo: replace with a real fast path unary expression helper when available 
// TODO: if we would know exactly which paths require the exceptions        and which paths not, we can sometimes save this guard  
// TODO (blackdrag): this if branch needs a rework. There should be no direct method calls be produced, the   handling of this/super could be much simplified (see visitAttributeExpression), the field accessibility check   could be moved directly into the search, which would also no longer require the GroovyBugError then   the outer class field access seems to be without any tests (if there are tests for that, then the code   here is dead code) 
//  TODO don't allow override? 
//  todo need process multi 
//  does this operator make any sense? 
/*  @todo we should use the real Josh Bloch algorithm here  */
//  we have a duplicate class!   One possibility for this is, that we declared a script and a   class in the same file and named the class like the file 
/*                      * todo there is no CompileUnit in scope so class name                     * checking won't work but that mostly affects the bytecode                     * generation rather than viewing the AST                      */
/*  @todo maybe a double dispatch thing to handle new large numbers?  */
// TODO: This logic mostly duplicates InvokerHelper.createScript.  They should probably be unified. 
/*      * Should be called when descending into a loop that defines     * also a scope. Calls pushVariableScope and prepares labels     * for a loop structure. Creates a element for the state stack     * so pop has to be called later, TODO: @Deprecate      */
//  TODO check that we reset everything here 
//  TODO Jochen: replace with new MetaMethod 
//  todo is ',' deprecated now?  assertEquals("assert b == true , 99", pretty("assert b==true,99")); 
//   TODO: I (ait) don't know why these strange tricks needed and comment following as it effects some Grails tests 
// TODO: implement int operations for this 
//  TODO: should be able to remove the klazz field once 2.5 becomes the mainline release   Gradle has a cleanup mechanism in place to reflectively access this klazz field.   The klazz field is being kept for compatibility so as to not break builds that depend   on versions of Groovy after the field was changed to a WeakReference (classRef).  It   appears that Gradle only performs the cleanup when it detects a groovy version of 2.4.x,   so the klazz field and placeholder Sentinel class can likely be safely removed once   the release version bumps to 2.5 (or beyond).   See:   https://github.com/gradle/gradle/blob/711f64/subprojects/core/src/main/java/org/gradle/api/internal/classloading/LeakyOnJava7GroovySystemLoader.java#L74 
//  todo suspicious spacing in the following assertion 
// more than one matching method found --> ambiguous! 
//         "The method 'java.lang.Object vo()' has an incorrect modifier volatile."; 
// todo should the colon be postfixed to the label? 
//  Bad enough to have side effects but worse if their behavior is wonky. 
//  TODO could be made more efficient by using a reverse index 
// TODO: Cater for comments? 
// lines.add(new StringBuilder()); // dummy row for position [0] in the List 
/*     * true if either \n or \r     */
//  ex : (Character) 'c' 
//  fallback to Map#get 
//  use a comparator of one item or two 
/*     The basic strategy is an optimistic-style scheme based on    the guarantee that the hash table and its lists are always    kept in a consistent enough state to be read without locking:    * Read operations first proceed without locking, by traversing the       apparently correct list of the apparently correct bin. If an       entry is found, but not invalidated (value field null), it is       returned. If not found, operations must recheck (after a memory       barrier) to make sure they are using both the right list and       the right table (which can change under re-sizes). If       invalidated, reads must acquire main update lock to wait out       the update, and then re-traverse.    * All list additions are at the front of each bin, making it easy       to check changes, and also fast to traverse.  Entry next       pointers are never assigned. Remove() builds new nodes when       necessary to preserve this.    * Remove() (also clear()) invalidates removed nodes to alert read       operations that they must wait out the full modifications.   */
//  path for JavaStubGenerator 
//  let's invoke the closure method 
//  Load the file name list 
//  structural match route 
//  add property setter dispatcher 
//  ClassLoader parentLoader = Thread.currentThread().getContextClassLoader(); 
//  noop 
//  adjust stack length 
//  NOTE: it's important to do no lookup against script files   here since the GroovyClassLoader would 0create a new CompilationUnit 
/*       * Execute the script represented by scriptStr using the supplied codebase.  If missingPermission      * is non-null, then this invocation expects an AccessControlException with missingPermission      * as the reason.  If missingPermission is null, the script is expected to execute successfully.       */
//  and then apply the found information to refine the method level   information. This way the method level information slowly turns 
// NOTE: we might return false here even if we found a class,        because  we want to give a possible script a chance to        recompile. This can only be done if the loader was not 
//  check if we have \r\n like on Windows   if it's not \r\n we reset, otherwise, the \n is just consummed 
//  Make sure we switch over to callback manager 
/*      * Should be called when descending into a loop that does     * not define a scope. Creates a element for the state stack     * so pop has to be called later, TODO: @Deprecate      */
/*                              * Here we just additionally tried to find another no-arg mixin method of the same name and register that as well, if found.                             * Safe to ignore a MethodSelectionException in this additional exercise. (GROOVY-4999)                              */
//  add method:   PropertyChangeListener[] getPropertyChangeListeners() {     return this$propertyChangeSupport.getPropertyChangeListeners 
//  visit SlComment()     never visited/created by parser 
//                 throw new IllegalArgumentException("Arguments to method [respondsTo] must be of type java.lang.Class!"); 
//  process args as input files 
//  byte, char and short require an extra cast 
//  the non-hidden ones. 
//  otherwise, the file would not be human readable 
// ---------------------------------------------------------------------------   WARNING LEVELS 
//  receiver 
//  after states can only be empty if try and catch statements all return in which case nothing to do 
//  Message text   Data, when the message text is an I18N identifier 
//  import is like  "import Foo" 
//  may be we have C[k1:v1] -> should become (C)([k1:v1]) 
//  disable the replacement whilst the closure is being executed 
/*  (non-Javadoc)         * @see java.lang.Runnable#run()          */
//  the current meta class 
//  load this 
//  now output 
//  Locate the specific method based on the name and number of parameters 
//  parameters 
//  avoids too many errors 
// else try a statically typed method or a GDK method 
//  register MetaMethods 
//  and add this interface to the list of implemented interfaces 
// TODO check if this should not be change to iterator based call logic 
//  Unknown type: ANNOTATION_DEF 
// TODO: value as Annotation here! 
//  Set it to HTML by default 
//  The compilation unit global AST transformations are applied on   collected AST transformation names 
//  generates --> next$Trait$Helper.method(this, arg1, arg2) 
//  no resource found with the default locale, try without any locale 
//  if the current call itself is with empty arg class array, no need to recurse with 'new Class[0]' 
//  Call it immediately. 
//  <1> 
// "", 
// and now use the string section to mangle the line numbers so that they refer to the 
//    LITERALS 
//  execute the assignment, this will leave the right side    (here the method call result) on the stack 
//  remove from here and let the caller reposition it 
//  if origInt and withoutCustomHandle 
//  empty loop   - read all characters till the end of the reader   UnicodeEscapingReader has side effects of   filling the buffer 
//  can't seem to do \n in one go with Java regex 
//  a null element is found in the list, skip it because we'll use the other elements from the list 
//  in case there is no "call" method on the closure, we can create a "fast invocation" paths   to avoid going through ClosureMetaClass by call(Object...) method 
/*  (non-Javadoc)    * @see org.xml.sax.XMLReader#setDTDHandler(org.xml.sax.DTDHandler)     */
//  tag::java_method_selection_head[] 
//  GROOVY-4043: Do this check up the hierarchy, if needed 
//  load array on stack 
/*  ******** java.time.OffsetDateTime extension methods ********  */
//  if number of parameters does not match we have no match 
//  targetType is abstract Collection fitting for HashSet or ArrayList 
//  alternativeConfigureNode is used only to set the source position 
/*  ******** java.time.ZonedDateTime extension methods ********  */
//  now if we don't finish with a break we need to jump past   the next comparison 
//  and object is Collection or array 
//  Double, double 
//  ------------------------------   bug: Qualified Exception Types   ------------------------------ 
// Note:  This method is NOT called if number is a BigInteger or BigDecimal because 
//  write-volatile 
//  {@code tag} 
//    Handle any callback that's been set 
//  worked 
/*  (non-Javadoc)         * @see groovy.lang.Closure#call()          */
//  rhs is ready to use reference, just put it in the field 
//  if the type name was resolved before, we can try the successfully resolved packages first, which are much less and very likely successful to resolve.   As a result, we can avoid trying other default import packages and further resolving, which can improve the resolving performance to some extent. 
//  delegate the get operation to the metaproperty 
//  only case left is arguments.length == parameterTypes.length 
//  TODO get normal resolving to set declaring class 
/*      * A hashCode function that pairs with fastEquals, following the normal equals/hashCode contract.     *     * @return the calculated hash code      */
//  set the delegate to FBS so the closure closes over the builder 
//  value could not be placed on existing lines, so place it on new line(s) 
//  2 = inner class case 
// ---------------------------------------------------------------------------   TYPE COERSIONS 
//  we ensure that hasNext has been called before    next is called 
//  easier to massage here than in the grammar 
// ---------------------------------------------                    boolean  --------------------------------------------- 
//  set the args as they might have gotten Newify transformed GROOVY-3491 
//  this is why shouldFail {} exists in Groovy tests 
// This is an arbitrary value, picked as a reasonable choice for a rounding point 
//  now, inner class node access to outer class fields 
/* * The Computer Language Benchmarks Game* http://shootout.alioth.debian.org/** Based on contribution of Eckehard Berns* Based on code by Heiner Marxen* and the ATS version by Hongwei Xi* convert to Java by The Anh Tran */
//  bind is idempotent, so no state checking 
//     public GroovyTag[] tags(String arg0) {/*todo*/return null;} 
//  this will overwrite a possible field property 
//  calculate whole list in this case   recommend avoiding -ve's as this is obviously not as efficient 
//  make the constructor call 
//  If the range is of size 1, then we can use the existing 
//  The following fields are only used internally; every occurrence of a user-defined expression of the same kind   has its own instance so as to preserve line information. Consequently, to test for such an expression, don't   compare against the field but call isXXXExpression() instead. 
//  important for static compilation! 
// mv = new org.objectweb.asm.util.TraceMethodVisitor(mv); 
//    Fill slots with nulls, if necessary. 
//  Note that this getBoolean access may well be synced... 
//  hand crank it so we can add our own compiler configuration 
//  TODO remove 
//  this function will 'correctly' print first 30 permutations 
//  verify if passing -Xlint in compilerarg had its effect 
//  the original program used:   Hashtable ht = new Hashtable();   John Olsson points out that Hashtable is for synchronized access   and we should use instead: 
/*          * TODO: Remove after JDK9 is the minimum JDK supported         *         * JDK9+ correctly accounts for the synthetic parameter and when it becomes         * the minimum version this method should no longer be required.          */
//  push this operation to master list and then process it. 
//  the number of arguments is correct, but if the last argument   is no array we have to wrap it in a array. If the last argument   is null, then we don't have to do anything 
// ---------------------------------------------------------------------------   LOOP SIMPLIFICATION FOR SourceUnit OPERATIONS 
//  not in java   actually: def z = /blah\s/ // not in java 
//  prepare target newProxyInstance for fold to drop additional arguments needed by newConvertedClosure 
//  assert 
//  The double quote is only escaped if the value is for   an attribute and the builder is configured to output   attribute values inside double quotes. 
//  The backing data store holding the key-value associations 
//  this is saved in a field named this$0 
//  let's check if it already implements an interface 
//  create a shell 
//  true part: load $t and cast to S 
//  potentially skip empty varargs 
//  dummy fields are only used to carry annotations if instance field 
//  start try block, label needed for exception table 
//  treat like a singleton list as per Java 
//  primitive to primitive conversion. Those case are also solved by explicitCastArguments. 
//  to finally see if the parameter and the argument fit together,   we use the provided information to transform the parameter 
//  we should produce a clean placeholder ClassNode here 
/*      * Intercepts a setXXX call     *     * @param object   The target object     * @param property The property to set     * @param newValue The new value      */
/*  * The Computer Language Benchmarks Game * http://shootout.alioth.debian.org/ * * contributed by Anthony Donnefort * redone by Enotus 2010-11-20  */
//  in case of the "in" operator, the receiver and the arguments are reversed   so we use the reversedExpression and get the target method from it 
//  multiple assignment 
// ---------------------------------------------                    int  --------------------------------------------- 
//  restore original metadata 
//  remove text and reselect the text 
//  provide setter for CLI Builder purposes unless final 
//  ------------------ double[] ------------------ 
//  ------------------ byte[] ------------------ 
//  ignore out-of-order write operations 
// TODO: one day we could try return the previously registered Closure listener for easy removal 
//  visit ShComment()    never visited/created by parser 
//  Set up the script context 
//  order matters here! 
// package private and used only by the GroovyClassLoader. 
//    Evaluate the template. 
//  The InputStream from which we produce a Reader. 
//  don't rewrite assertions with message 
//  ensure VariableArguments are read, not stored 
//  empty line 
//  B=AtA         A multiplied by A transposed 
//  try parent loader 
//         mv = tmv; 
//  handle back to beginning due to modulo incrementing 
//  the arguments come in like [named_args?, args..., closure?]   so peel off a hashmap from the front, and a closure from the   end and presume that is what they meant, since there is   no way to distinguish node(a:b,c,d) {..} from   node([a:b],[c,d], {..}), i.e. the user can deliberately confuse   the builder and there is nothing we can really do to prevent   that 
//  now let's try the classloader which loaded us 
//  transform "a.x = b" into "def tmp = b; a.setX(tmp); tmp" 
//  arg is not null and not assignment compatible 
//  add the cell to the table 
//  flag if the classes or its members are annotated 
//  result on the stack, which we can remove now if inside a constructor. 
//  because of type inferrence, we must perform an additional check if the right expression   is an empty list expression ([]). In that case and only in that case, the inferred type   will be wrong, so we will prefer the left type 
//  script-string-to-generated Class map 
//             Number n = (Number) newValue;              newValue = Integer.valueOf(n.intValue());          }          array [normaliseIndex(idx,array.length)] = ((Integer)newValue).intValue();          return (Integer) newValue;      }        public static Long putAt(long[] array, int idx, Object newValue) { 
//  internal helper method 
/*  The size of the map.  */
//  do not overwrite interface methods with instance methods   do not overwrite private methods   Note: private methods from parent classes are not shown here,   but when doing the multimethod connection step, we overwrite   methods of the parent class with methods of a subclass and   in that case we want to keep the private methods 
//  groovify the fat Java-Like Groovy AST 
//  fast path for getter/setters etc. 
//  print nothing 
//  ------------------ int[] ------------------ 
//  diamond always matches 
//  to be replaced with a proper test whether a return value should be used or not 
// n*LOG(n) version 
//  Boolean / boolean 
//    Display our type, text, and (optional) meaning 
//  add one to dist to be sure interfaces are preferred 
//  jump if we don't want to continue 
//  If the new script base class does not have a contextual constructor (g.l.Binding), then we won't either.   We have to do things this way (and rely on just default constructors) because the logic that generates 
//  this should never happen 
//  an extension method is found 
//  check for null 
//  note: ifeq tests for ==0, a boolean is 0 if it is false 
//  find method call target 
//  the generic method is valid, if available (!=null), if static or 
//  create values() method 
//  use propX when lazy, because lazy is only allowed on fields/properties 
//       X     Y     Z     [     \     ]     ^     _ 
//  unchecked assignment within ternary/elvis   examples:   List<A> list = existingAs ?: []   in that case, the inferred type of the RHS is the type of the RHS   "completed" with generics type information available in the LHS 
//  the method call... usually simply Object in operandStack 
//  add method: void removeVetoableChangeListener(name, listener) 
//  current label for break 
//  create lexer 
//  if emptyBody == true, then we generate an empty body instead throwing error on unimplemented methods 
//  tag::java_method_selection_body[]   ...   <1>   <2>   <3>   end::java_method_selection_body[] 
/*  multiply vector v by matrix A  */
//  mark all methods as visited. We can't do this in visitMethod because the type checker 
/*  (non-Javadoc)     * @see groovy.lang.GroovyObject#getMetaClass()      */
//  there must be four continuation bytes of the form 10xxxxxx,   otherwise the following character is is not a valid UTF-8 construct 
//  needs all package names   needs all packages / class names   needs all packages 
//  ignore methods already in owner 
//  look for full match or match excluding package 
//  remove the temporary variable to keep the 
//  For statement contains unexpected tokens. Possible attempt to use unsupported Java-style for loop.   fails after parser 
//  let's try getting the property on the second object 
//  receiver   messageName 
//  must write under lock 
//  ignore. In case of some exception, release info is not available 
//    KEYWORDS: RESERVED 
//  does a getter exists ? 
//  Object[] vs Object 
//  literals 
//  ------------------ long[] ------------------ 
//  xml namespace is always defined 
//  this part should never be reached! 
//    Get the output stream writer from the binding. 
//  from == to and step == 0, nothing to do, so return 
/*      * If the byte has the form 1110xxx, then it's the first byte of a three-bytes sequence character.     *     * @param b a byte.     * @return true if it's the first byte of a three-bytes sequence.      */
//  no-arg closure   same number of arguments   implicit it   vargs 
//  Use a doPrivileged here as many different properties need to be   read, and the policy shouldn't have to list them all. 
//  look to see if per-field handlers will catch this one... 
//         printUpdatingTabLevel(t,visit,"with (",null,") ");      } 
//  the try finally case 
//      introspect 
//  GROOVY-6357 : Following Java's behavior for protected modifier on inner classes: should be public 
//    Build the specified type or, if no type was specified, the   smallest type in which the number will fit. 
//  The phase in which the failures occurred 
//  both converter and reverseConverter must be set or not 
//  look for one of these:     import static SomeClass.someProp [as otherName] 
// SPG modified to reflect DefaultGroovyMethod name change and expected result from 
//  $Id: heapsort.java,v 1.1 2004-05-23 06:37:41 bfulgham Exp $   http://www.bagley.org/~doug/shootout/ 
/*          * Create groovy assertion style error message for template error. Example:         *         * Error parsing expression on line 71 column 15, message: no such property jboss for for class DUMMY         * templatedata${jboss}templateddatatemplateddata         *             ^------^         *                 |         *           syntax error          */
//  All objects pending cleanup 
//  because compiler clients are free to choose any GroovyClassLoader for   resolving ClassNodeS such as annotatedType, we have to compare by name,   and cannot cast the return value to GroovyASTTransformationClass 
//  duplicate int arguments 
//  "DefaultPackage" for 'default package' path, rather than null... 
//  this loop builds a name from right to left each name part   separated by "." 
// deprecated 
//  Outer.this in a special constructor call 
//  fails after parser   fails after parser 
//  set real fixed generics for extension methods 
//  BigDecimal conversion is done by using the double value 
// just for uniformity 
//  we have to declare the namespace - choose a tag   If the namespace has been declared in the GPath expression use that tag 
//  visit AST xforms 
//    Get the class and calculate its filesystem name   
//  in case there's nothing else, invoke the object's own invokeMethod() 
//  check for propertyMissing provided through a category 
//  copy annotations from field to dummy field 
//  let's use the field expression if it's available 
// mv.visitInsn(NOP); 
//  passed as the first argument implicitly. 
//  -------------------------------   different Variable based checks   ------------------------------- 
//  first test special cases 
//  Wrong list -- must restart traversal at new first 
//  +   -   *   /   \   %   **   ** 
//  short 
//  package-private for use in testing to avoid calling ServiceLoader.load 
//  need to remove double quotes in string literals 
//  cast to prevent incorrect @since 1.7 warning 
//  append classpath if not already defined 
//  if the provided classnode is a subclass of the upper bound   then check that the generic types supplied by the class node are compatible with   this generics specification   for example, we could have the spec saying List<String> but provided classnode 
//  if this class is not an instance of Script, it's a full-blown class   then simply return that class 
//       H     I J K     L     M N     O 
//  todo : corner case 
// slow Path 
//  We don't want to lose anything, so log it 
//  clear properties to avoid generation of methods 
//  fallback to the compiler classloader 
// Statement printStatement = createPrintlnStatement(new VariableExpression("str")); 
//  tag::jsr223_basic[] 
//  any explicit false for enabled disables functionality   this allows, for example, configscript to set all   classes to true and one class to be explicitly disabled 
//  first pass, collect nodes 
//         @Override 
//  a type inference has been made on a variable whose type was defined in an instanceof block   we erase available information with the new type 
//  we are done if we are now in the declaring class 
// interfaces have no constructors, but this code expects one,  so create a dummy and don't add it to the class node 
//  test for JDK9 JIGSAW 
//  $Id: fibo.java,v 1.3 2005-04-25 19:01:38 igouy-guest Exp $   http://www.bagley.org/~doug/shootout/ 
//  getMap() already loaded using a null classloader 
//  Same as AnnotationClosureCompatibilityTest except that annotation closure's   declared type is a bound parameterized type (affects stub generation) 
/*  (non-Javadoc)    * @see org.xml.sax.XMLReader#getEntityResolver()     */
//  we need to keep the -1 to track the mismatch, a +1   by any means could let it look like a direct match   we want to add one, because there is an interface between   the interface we search for and the interface we are in. 
//  if left expression is a closure shared variable, a second pass should be done 
//  let's apply the method to each item in the collection 
//  throws FileNotFoundException, IllegalArgumentException {   throws FileNotFoundException, IllegalArgumentException { 
//  remember non-source/non-repeatable annos (auto collecting of Repeatable annotations is handled elsewhere) 
//       '     a     b     c     d     e     f     g 
//  Test subclass of GroovyObjectSupport 
/*      * Constructor used by makeArray() if a real class is available      */
//  if we are a number literal then let's just parse it   as the negation operator on MIN_INT causes rounding to a long 
/*  (non-Javadoc)           * @see groovy.lang.GroovyObjectSupport#setProperty(java.lang.String, java.lang.Object)            */
//    Keywords 
//  this line should be useless, but well, just in case 
//  message string 
//  last label by default which is added first by APP 
/*     * Expands the properties inside the given string to it's values.     */
//  1 param meta method 
//  now do the business      
//  don't generate stubs for private classes, as they are only visible in the same file 
//  GROOVY-6240 
//  start 
//  If no scheme is specified for the repository root,   then turn it into a URI relative to that of the source file. 
// ---------------------------------------------------------------------------   TYPE HIERARCHIES 
//  a MME was ensued here stating no 't.start()' was available 
//  simple check on being subclass 
//  @todo - remove classic references from the TCK 
//  but it is allowed... 
//  The phase in which the failures occurred   The *Unit object this exception wraps 
//  for additional options to be passed to javac. 
// (element.getReturnType() == Void.class || element.getReturnType() == Void.TYPE) && 
//  nothing to do in that case 
//  store array 
//  wrap arguments into an array 
/*  (non-Javadoc)     * @see groovy.lang.MetaClassRegistry.MetaClassCreationHandle#create(java.lang.Class, groovy.lang.MetaClassRegistry)      */
//  visitAt() ...     token type 'AT' should never be visited, as annotation definitions and usage, and     direct field access should have all moved this token out of the way. No test needed. 
//  High surrogate 
//  let's compare their generics type 
//  ------------------ short[] ------------------ 
//  The notification queue and listener 
/*  This is an optional short-cut; at each recursive call,        check to see if the elements in this subset are already        ordered.  If so, no further comparisons are needed; the        sub-array can just be copied.  The array must be copied rather        than assigned otherwise sister calls in the recursion might        get out of sync.  When the number of elements is three they        are partitioned so that the first set, [low, mid), has one        element and and the second, [mid, high), has two. We skip the        optimisation when the number of elements is three or less as        the first compare in the normal merge will produce the same        sequence of steps. This optimisation seems to be worthwhile        for partially ordered lists but some analysis is needed to        find out how the performance drops to Nlog(N) as the initial        order diminishes - it may drop very quickly.   */
//  package local 
/*  5: byte    */
//  a decimal number 
//  if argument null, take the static type 
//  handle catch body 
//  anything that prevents (X) from being a cast 
//  not in Java Doclet API 
//  and prevents from infinite loops 
//  edit input files in place 
//  since it is possible that the callsite uses some generics as well,  
//  to avoid double initialization in case of several constructors 
//  not using groups, so return the nth   occurrence of the pattern 
//  return is OK in closures in object initializers 
//  =====================================================   UNDO/REDO NAMES   ===================================================== 
//  The calls to DefaultMetaClassInfo.setPrimitiveMeta and sdyn.setBoolean need to be   ordered. Even though metaClassInfo is thread-safe, it is included in the block   so the meta classes are added to the queue in the same order. 
//  clean local vars added during visit of closure 
//  Only look at things we can actually call 
//  todo: replace this simple idea of default class name 
//  trying to guess the concrete list type and create a new instance from it 
//  Destructive! 
//  TODO: replace with stream-based version 
//  empty quote '' 
//  create a local variable to hold the old value from the getter 
//  we cannot just wrap in a List as we support primitive type arrays 
//  check but determine no -ve consequences first 
/* || param == Byte.TYPE */
//  load the array 
// fieldValue,  //br  all the sudden that one cannot init the field here. init is done in static initializer and instance initializer. 
//  single quotation mark 
//   
//  since we added an anonymous inner class we should also   add the dispatcher methods 
//  add one parameter for each expression in the   constructor call 
//  compare Li1 and Li2 for equality 
//  is this property already accounted for? 
//  visitExponent ...     token type EXPONENT only used by lexer, never visited/created 
//  for b/c with Java return an int if we can 
// we use the lookAhead to make sure that a template file ending in say "abcdef\\"  will give a result of "abcdef\\" even though we have special handling for \\ 
//  myMethod(a,b) {... 
//  we need to handle only assignment to arrays combined with an operation   special here. e.g x[a] += b 
//  while anything inside a static initializer block is appended   we don't want to append in the case we have a initialization   expression of a static field. In that case we want to add   before the other statements 
//  test int[] 
//  if left is Enum and right is String or GString we do valueOf 
//  stack size = 1 
//  add marker in the bytecode to show source-bytecode relationship 
//  Global classes 
//  Weighted selection from alphabet 
//  false part: load y and cast to S 
//  Normalise negative indices. 
/*  (non-Javadoc)     * @see org.xml.sax.XMLReader#getErrorHandler()      */
//  add field: 
//  and class as property 
//  the interface beeing added is more specific than the one in the list, replace it 
//  Mock methods used for testing  ------------------------------------------------------------------------- 
//  -----------------------   feature: Native Methods 
//  check whether thread context loader can "see" Groovy Script class 
//  Notify the listener only if the entry was evicted 
//  create loader and execute main class 
//  java tab policy action 
//  FIXME 
//  if call is spread safe, replace it with a for in loop 
//  handle back to beginning due to modulo decrementing 
//  array get: load sub, call arrayGet [load b, call operation, load sub, call arraySet] 
//  do not overwrite final 
//  execute method   this will load the callsite and the receiver normally in the wrong   order since the receiver is already present, but before the callsite   Therefore we use callSiteReceiverSwap to correct the order.    After this call the JVM operand stack will contain the result of 
/*  (non-Javadoc)    * @see java.io.Writer#flush()     */
//  These two properties are used when no ExpandoMetaClassCreationHandle is present 
//  create statementBody 
//  Add an entries to force ReferenceManager.removeStaleEntries 
//  assigned later by init()   may be changed by init()   may be changed by init() 
//  let's evaluate the RHS and store the result 
//  appends buffer 
// ----------------------------------------------------------------------   special cases 
//  double x double 
//  visitLiteralInterface     token type "interface" only used by parser, never visited/created directly 
//  tag::jsr223_imports[] 
//  Redirect script output to context writer, if out var is not already provided 
//  we don't use property exists there because findMethod is called on super clases recursively 
//  def _result = new StringBuilder() 
//  the name is a type so remove it from the scoping   as it is only a classvariable, it is only in   referencedClassVariables, but must be removed   for each parentscope too 
//  fails after parser 
//  load every field 
//  ignore methods from GroovyObject 
//  Write out keys and values (alternating) 
//  isCase 
/*  ******** java.time.temporal.Temporal extension methods ********  */
//  -------------------------------------------------- 
//  so we store the type on stack 
//    Build the specified type or default to BigDecimal 
//  GROOVY-3543: visit the declaration expressions so that declaration variables get added on the varStack 
//  br experiment with local var table so debuggers can retrieve variable names  AsmClassGenerator.CREATE_DEBUG_INFO) { 
/*  End universal methods.  */
//  add given statements for explicitly declared static fields just after enum-special fields   are found - the $VALUES binary expression marks the end of such fields. 
/*  (non-Javadoc)    * @see groovy.lang.MetaClass#initialize()     */
//  a  abb   abb -> bba   bbabb   bba 
//  done will only be true if we ran out of data without seeing the match character 
//  same for the catch parts 
//  we should implement the field helper interface too 
//  here we don't care if the method exists or not we assume the   developer is responsible and wants to override methods where necessary 
//  various helpers in order to avoid a potential very big class 
//  @interface Foo{ int bar()... 
//  return true if a property is found 
//  == 
//  no over-runs... 
//       0     1     2     3     4     5     6     7 
//  expressions = constructor call arguments 
// we opt for not doing anthing here...we just do not get context if  this happens 
/*  (non-Javadoc)    * @see org.xml.sax.XMLReader#getErrorHandler()     */
//  add method:   void addVetoableChangeListener(listener) {       this$vetoableChangeSupport.addVetoableChangeListener(listener) 
//  The eviction support 
//  Conversions in which all decimal digits are known to be good. 
// ---------------------------------------------                    int[]  --------------------------------------------- 
//  called with null 
//  declare and initialize 
//  Chances are this is a Float or a Big.   With Float we're extending binary precision and that gets ugly in decimal.   If we used Float.doubleValue() on 0.1f we get 0.10000000149011612.   Note that this is different than casting '(double) 0.1f' which will do the   binary extension just like in Java.   With Bigs and other unknowns, this is likely to be the same. 
//  we need to add "this" to access unknown methods/properties 
//  visit lcurly()     token type LCURLY only used inside parser, never visited/created 
//  second pass, call visit on all of the collected nodes 
//  Iterator interface  ------------------------------------------------------------------------- 
//  usually in new, i.e.   def y = new int[5]; 
//  these two are never reached in bytecode and only there    to avoid verifyerrors and compiler infrastructure hazzle 
//  because source position seems to be more reliable for statements   than for expressions, we get the source text for the whole statement 
//    Implementation of the TableModelListener interface,   
/*          * GROOVY-3339 - do nothing - so that numbers don't get replaced by cached constants in closure classes          */
//   --------------------------------------------------------                normal GroovyObject field handling : get    -------------------------------------------------------- 
//  only accepts AssertStatementS so that better error messages can be produced 
//  count trailing whitespace characters 
// ---------------------------------------------------------------------------   LOOP SIMPLIFICATION FOR PRIMARY ClassNode OPERATIONS 
/*  ---------------- Builder --------------  */
/*          * We use the following Binding instance so that global variable lookup         * will be done in the current ScriptContext instance.          */
//  on an assignment everything that can be done by a GroovyCast is allowed 
//  both candidate method and receiver have generic information so a check is possible 
//  No need to check the arguments against an array constructor: it just needs to exist. The array is   created through coercion or by specifying its dimension(s), anyway, and would not match an   arbitrary number of parameters. 
//  FIX_JDK9 remove this exemption for JDK9 
//   make sure we are adding to correct list 
//  ----------------------------- inner classes -------------------------------------- 
//  lazily initialized factory 
/*  ******** java.time.OffsetTime extension methods ********  */
// TraceClassVisitor tracer = new TraceClassVisitor(visitor, new PrintWriter(System.err,true)); 
//  we do not resolve a vanilla name starting with a lower case letter   try to resolve against a default import, because we know that the 
//  The warning level, for filtering 
//  compileStack.containsVariable(name) means to ask if the variable is already declared   compileStack.getScope().isReferencedClassVariable(name) means to ask if the variable is a field   If it is no field and is not yet declared, then it is either a closure shared variable or   an already declared variable. 
//  also for custom Number implementations 
//  identifiers 
// ---------------------------------------------------------------------------   NODE IDENTIFICATION AND MEANING 
//  try inner classes 
/*  (non-Javadoc)     * @see groovy.lang.MetaClass#setAttribute(java.lang.Object, java.lang.String, java.lang.Object)      */
//  This method only exists as a workaround for GROOVY-6094 
//  This shouldn't happen, but this is the same default used by   BufferedWriter on a security exception. 
//  to avoid default initialization 
/*      * A NumberRange's canonicalHashCode is based on hashCode values of the discrete items it represents.     * When two NumberRange's are equal they will have the same canonicalHashCode value.     * Numerical values which Groovy deems equal have the same hashCode during this calculation.     * So currently (0..3).equals(0.0..3.0) yet they have different hashCode values. This breaks     * the normal equals/hashCode contract which is a weakness in Groovy's '==' operator. However     * the contract isn't broken between equals and canonicalHashCode.     *     * @return the hashCode value      */
//  Always set the "args" property, regardless of what path we take in the code. 
//  we have to handle an enum constant with a class overriding   a method in which case we need to configure the inner class 
//  if multiple values are associated with the same column, only   render the value which was recorded last (i.e. the value   corresponding to the outermost expression) 
//  inside defineTarget 
//  if the stream can't be opened, let's keep the old reference 
//  skip DGM methods on an interface if the class already has the method   but don't skip for GroovyObject-related methods as it breaks things :-( 
//  we could always escape if we wanted to. 
//  visit right side first to avoid the usage of a   variable before its declaration 
//  GROOVY-5044 
//  check needed as @Test(attr = {"elem"}) passes through the parser 
//  CallSite is normally not showing up on the    operandStack, so we place a dummy here with same 
//  setup two threads to try a deadlock 
/*  ******** java.time.Instant extension methods ********  */
//  xgetAt() that takes an integer index. 
//  not normally set for non-major types but appropriate for a script 
//  ex: (Date)null 
//  starting position in document 
//  some short circuit cases for efficiency 
//  TRICK: we add at the beginning so when we find for remove or get we always have the last one 
// Class.class,  MetaClass.class,  Iterator.class,  GeneratedClosure.class,  GeneratedLambda.class,  GroovyObjectSupport.class 
//  add property getter dispatcher 
//  GROOVY-7322   static method call in trait? 
//  dispatching to EmptyStatement will not call back visitor,    must call our visitEmptyStatement explicitly 
//  CONSTRUCTORS 
/*  The Great Computer Language Shootout   http://shootout.alioth.debian.org/   contributed by Isaac Gouy */
//  Switched over to Map so need to clear array references 
//  static imports 
//  we could rely on the first parameter name ($static$self) but that information is not   guaranteed to be always present 
//  we use the idle manager, so let us use the reference counter   we change the manager once the threshold is reached. There is   a small chance that the value will go beyond Integer.MAX_VALUE   so we check for values below 0 too. If threshold is low, then   this is unlikely to happen. If threshold is high, then we    have all negative values as fall back 
//    Last sanity check.   
//  load return value 
//  check interfaces at this level first 
//  check if a super class has @Bindable annotations 
// can't cache the script because the context may be different.  but don't bother loading parsing the class again 
//  specifies the interfaces implemented by a class   specifies the base class/interface for a new one   method variable points to the current instance   method variable points to the base instance   type comparator   deprecated; identifies a property   used to create a new instance of a class 
// ----------------------------------------------------------------------   generic set method  ---------------------------------------------------------------------- 
//  unwrap the Object[] and make transformations if needed   that means, to duplicate the Object[], make a cast with possible   unboxing and then swap it with the Object[] for each parameter 
//  TraitClass 
//  visitLiteralElse ...     token type "else" only used by parser, never visited/created directly 
//  since 2.4, we can also register precompiled type checking extensions which are not scripts 
//  load normal receiver as first argument 
//  no arg method 
//  multiple assignment check 
/*  (non-Javadoc)     * @see org.xml.sax.XMLReader#getDTDHandler()      */
//  res== null means it got collected 
//  add returns to try and catch blocks 
/*  (non-Javadoc)    * @see org.xml.sax.ContentHandler#characters(char[], int, int)     */
/*     * This method tries to read subsequent buffers from the reader using a mark     */
//  we want to remove the BOM windows adds from a file if the encoding is UTF-8   in other cases we depend on the charsets  
//  check module node imports aliases   the while loop enables a check for inner classes which are not fully imported, 
//  in normal case we don't need to do script lookups 
//  Get first hex digit 
//  if the super class is another non-static inner class in the same outer class hierarchy, implicit this   needs to be passed 
/*  ******** java.time.LocalDateTime extension methods ********  */
//  end::jsr223_invocable[] 
//  supports Map style newInstance method 
//  scan source directories and dest directory to build up   compile lists 
//  private final Comparator this$<property>Comparator = new <type>$<property>Comparator(); 
//  parameter order is build(CompilePhase, boolean, String) 
// Integer/Integer division. 
//  check for a generic get method provided through a category 
//  declare the variable even if there was an error to allow more checks 
//  try to find a declaration of a variable 
// no inspection unchecked 
//  used for closure return type inference 
//  package private class, public method   see GROOVY-6962 
//  inner class case 
//  import is like "import foo.Bar" 
//  if no method was found, try to find a closure defined as a field of the class and run it 
//  implicit it 
//  determine appropriate class loader to serve as parent loader 
//  keep Object[] on stack 
//  For generic input streams, provide a catch-all codebase of GroovyScript   Security for these classes can be administered via policy grants with   a codebase of file:groovy.script 
/*              *  if it is static final but not accessed inside a static constructor, or,             *  if it is an instance final but not accessed inside a instance constructor, it is an error              */
//  compile Java and clean up 
// ---------------------------------------------------------------------------   PHASE HANDLING 
//  null means no implicit "it" 
//  ==================================================   ClipBoard   ================================================== 
//  the actual type identified by the lexer   an interpretation applied to the token after the fact 
//  itself in the list of receivers already; 
//  todo: reliable way to call the transformer  parentNode.visit(trn); 
/* Integer[9] */
//  to not record the underlying MapExpression twice,   we disable the assertion tracker   see https://issues.apache.org/jira/browse/GROOVY-3421 
// throws FileNotFoundException, IllegalArgumentException { 
//  lets call the function 
//  invoke through reflection to eliminate mandatory JUnit 4 jar dependency 
//  e.g int.getClass() 
//  Non-null iff this scope corresponds to a class, as opposed to a method, "if" statement,   block statement, etc. 
//  global closures map - this is used to simulate a single 
//  Get the existing code block 
//  else fall thru.. 
//  template storage   source file dirs 
// receivers.add(new Receiver<String>(CLOSURE_TYPE, path + "owner")); 
//  class[]. All of that but the closure must be provided here   
//  An implicitly created variable, such as a variable in a script that's doesn't have an explicit   declaration, or the "it" argument to a closure. 
//  GROOVY-5568, we would be facing a DGM call, but instead of foo.getText(), have foo.text 
// Clean up all recursive references to File objects 
//  a class consisting of a vanilla name can never be   a static inner class, because at least one dot is   required for this. Example: foo.bar -> foo$bar 
//  special case for numbers, improve type checking as we can expect ++ and -- to return the same type 
//  makes this more of an integration test than a unit test... 
// , 
// ---------------------------------------------------------------------------   GENERAL SUPPORT ROUTINES 
//  guards for receiver and parameter 
//  GROOVY-9136 -- object expression should not overlap source range of property; property stands in for original varibale expression 
/*                          * the code is (meta class is stored in 1):                         * this.metaClass = <1>                          */
//            \t    \n                \r 
//  import is like "import foo.*" 
/*  (non-Javadoc)     * @see groovy.lang.Buildable#build(groovy.lang.GroovyObject)      */
//  remove RHS value from operand stack 
//  safe value here to avoid multiple reads with possibly   differing values due to concurrency 
//  and then start our checks with the receiver 
//  one class is void, the other is not 
//  we use this NOP to have a valid jump target for the various labels 
//  indirect import checks   if set to true, then security rules on imports will also be applied on classnodes. 
//  try groovy file 
//  Get the script path from the request - include aware (GROOVY-815) 
//  assume a <p> paragraph tag signifies end of sentence 
/*     * This method reads without a buffer.    * It returns too many empty lines if \r\n combinations    * are used. Nothing can be done because we can't push    * back the character we have just read.     */
/*         * Try to locate the resource and return an opened connection to it.         */
//  do not create forwarder for private methods   see GROOVY-7213 
/*  (non-Javadoc)    * @see org.xml.sax.ContentHandler#endDocument()     */
//  lets clear the static bit 
/*  (non-Javadoc)    * @see groovy.text.TemplateEngine#createTemplate(java.io.Reader)     */
//  if script has both loose statements as well as main(), then main() is ignored 
//  don't worry if it's not a ListExpression, or AnnotationConstant, etc.   the rest of GroovyC will flag it as a syntax error later, so we don't   need to raise the error ourselves 
/*  (non-Javadoc)           * @see groovy.lang.GroovyObject#invokeMethod(java.lang.String, java.lang.Object)            */
//  Place some values on the ReferenceQueue 
//  byte 
//  call like this(..)/super(..) after the first statement, which shouldn't be allowed. GROOVY-2836 
// CHECKSTYLE.OFF: ConstantNameCheck - special case with a reusable exception 
//  The XML namespace is always defined 
//  We have private methods for that name, so remove the   multimethods. That is the same as in our index for   super, so just copy the list from there. It is not   possible to use a pointer here, because the methods   in the index for super are replaced later by MOP   methods like super$5$foo 
//  method and than that to make the connections to the SAM type generics 
//  never persist the MetaClass 
//  we must check that such a method exists on the LUB 
//  remove the normalized ending line ending if it was not present 
//  register the mgr with object name "bsf" 
// noinspection InfiniteLoopStatement 
/*  (non-Javadoc)    * @see org.xml.sax.XMLReader#setProperty(java.lang.String, java.lang.Object)     */
/* BigDecimal[17] */
//  force final class, remove interface, annotation, enum and abstract modifiers 
//  now look for any stray getters that may be used to define a property 
//  GROOVY-7783 use Sets for O(1) performance for contains 
//  produce result 
//  The Foo parameter type should link to lib/Foo.html, not api/Foo.html. 
//  this avoids going through the parent classloaders/bootstrap 
//  for maps, replace map.foo with map.get('foo') 
//  second visit 
//  Map.Entry Ops  
/* &&            !(expression.isImplicitThis() && controller.isInClosure())  */
//  GROOVY-9199 
//  check types are compatible for assignment 
//  "this" for static methods is the Class instance 
//  lets avoid class loading 
//  we are interested in the longest path only 
//  let's strip off everything after the last '.' 
//  call the existing block, which will presumably set the value properly 
//  Swallow multiple 'u's 
//  wrap in a stringOf { ... } closure call 
//  $idx = 0 
//  private implementation methods  ------------------------------------------------------------------------- 
//  (like @BaseScript) that could change this.  But this is cautious and anticipates possible compiler changes. 
//  operands are on the stack already 
//  correct receiver for inner class   we assume the receiver is an instance of the declaring class of the    candidate method, but findMethod returns also outer class methods   for that receiver. For now we skip receiver based checks in that case 
//  and those are not hierarchical we can't use them for making an absolute URI. 
// ---------------------------------------------------------------------------   OUTPUT 
//  couldn't find compiler - try to find tools.jar   based on java.home setting 
//  INNER CLASSES 
//                 int value; 
//  Simple setter 
//  first we calculate all arguments, that are for sure not part   of vargs.  Since the minimum for arguments is noVargsLength   we can safely iterate to this point 
//  GroovyCodeVisitor interface  ------------------------------------------------------------------------- 
/*  (non-Javadoc)     * @see org.xml.sax.XMLReader#getEntityResolver()      */
//  One-time-fill inner classes lookup map 
//         return values()[ordinal]      } 
//  ignore all other types 
//  value is a regular expression. 
//  no jump, so -1, need to pop off surplus LL 
//  Delegated XMLReader methods  ------------------------------------------------------------------------ 
//  when we get something other than -1, we know which regexp   matched; the 0 group is the complete expression of the    matcher, which would always return a hit based on the above 
//  verify static imports 
//  optimize char initialization 
//  Allow macro methods to return null as an indicator that they didn't match a method call 
/*      * The cached canonical hashCode (once calculated)      */
//  switch does not have a continue label. use its parent's for continue 
//  try classes under compilation 
//  expressions will leave a value on stack, statements not   so expressions need to pop the alibi null 
//  we may have to box the argument! 
//  ignore the return of the call 
//  instance at the end of the stream 
// ----------------------------------------------------------------------   getter 
//  skip if the property type is unknown (this seems to be the case if the   property descriptor is based on a setX() method that has two parameters,   which is not a valid property) 
//  Allow security managers to prevent system property access 
// load "this" 
//  would this branch ever be true? 
//  def $toStringFirst = true 
//  Get verbosity hint. 
//  NOTE: timeStamp constants shouldn't belong to Verifier but kept here   for binary compatibility 
//         assertEquals("println([$x, x, y])", pretty("println([$x, x, y])")); // fails after parser // not in java      } 
//  correcting declaring class for extension methods: 
//  GROOVY-5202   there might be a non public listener of some kind   we skip that here 
//   --------------------------------------------------------                         methods for this 
//  should only get here with size = 2 when inner class constructor 
//  add a more informative name 
// call asBoolean 
//  0x41('a') - 0x46('f') 
//  TODO: correct generics for when receiver is to be skipped 
//  $Id: ary.java,v 1.1 2004-05-22 07:27:00 bfulgham Exp $   http://www.bagley.org/~doug/shootout/ 
//  ------------------------------   feature: Enum Definitions 
//  under certain restrictive environments, loading certain classes may be forbidden   and could yield a ClassNotFoundException (Google App Engine) 
//  ---------------------------------------------------------------------   The Great Computer Language Shootout   http://shootout.alioth.debian.org/     Code based on / inspired by existing, relevant Shootout submissions     Contributed by Anthony Borla   --------------------------------------------------------------------- 
//  Put tail end of permutation after jth position in increasing order 
//  if original Integer[] meta class 
//  add thisPara to this(...) 
//  used to handle exceptions in catches and regularly visited finals 
//  collect every variable expression used in the loop body 
/*  ******** java.time.DayOfWeek extension methods ********  */
//  same class in same source 
//  if there are any joint compilation options set stubDir if not set 
//  repeat test with subclass 
//  protected final PropertyChangeSupport this$propertyChangeSupport = new java.beans.PropertyChangeSupport(this) 
//  check for a category method named like a setter 
//  replace statement code 
//  unused 
//  (next, result) = [ result, next+result ]   -->   def tmp1 = result   def tmp2 = next+result   next = tmp1   result = tmp2 
//  to our list 
//  LITERAL, this, true, false, null   SIMPLE_EXPRESSION, and various molecules 
//  dummy methods 
/*              * Iterate over the classpath provided to groovyc, and add any missing path             * entries to the AntClassLoader.  This is a workaround, since for some reason             * 'directory' classpath entries were not added to the AntClassLoader' classpath.              */
// ---------------------------------------------------------------------------   FACTORIES 
//  jth character of t   ith character of s   cost 
//  don't bind if we are half set up, quietly stop 
//  return the length of the list 
// in Groovy2.0 use valueOf 
//  Compute min capacity for expectedMaxSize given a load factor of 3/4 
// puts ("key", key); 
//  let's register the builder as the delegate 
//   --------------------------------------------------------                normal constructor invocation (via new) 
// SPG don't use divide since BigInteger implements directly  and we want to dispatch through DefaultGroovyMethods to get a BigDecimal result 
//  declares the package scope   declares an external class   used in import statements to create an alias 
// spread expressions 
//  or a member of a class used in a 'with' 
//  for backwards compatibility 
//  wrong column information 
//  visit rparen()     token type RPAREN only used inside parser, never visited/created 
//  codehaus reference implementation usage 
//  which are common 
//  Special handling for file:// protocol, as getLastModified() often reports   incorrect results (-1) 
//  correct argumentArray's length 
/*  ******** java.time.temporal.TemporalAmount extension methods ********  */
//         key = key.indexOf('.') > -1 ? InvokerHelper.inspect(key) : key; 
//  sender only for call sites 
//  the following code will basically do this:  Map<String, Object> m = Collections.singletonMap(method.getName(), arg);  return ProxyGenerator.INSTANCE.              instantiateAggregateFromBaseClass(m, parameter);   TO_GENERATED_PROXY is a handle (Object,Object,ProxyGenerator,Class)GroovyObject   where the second object is the input closure, everything else   needs to be provide and is in remaining order: method name,    ProxyGenerator.INSTANCE and parameter 
//  note: BigInteger and BigDecimal are also imported by default 
//  coerce is not needed 
//  type is being compiled so it will implement GroovyObject later 
//  matching method, remove abstract status and use the same body 
//  path length of 1 indicates that probably is 'default package' i.e. "/" 
//  still no methods found, test if delegate or owner are GroovyObjects   and invoke the method on them if so. 
//  the type of a variable declaration 
//  asking isResolved here allows to check if a primitive   type name like "int" was used to make t. In such a case   we have nothing left to do. 
//  Object<T> 
// ------------------------------------------------------------------------- 
//  slot length. 
//  translate the graphics origin upwards so the area of the page we   want to print is in the origin; the clipping region auto set 
//  -------------------- Helper classes ------------------------- 
//  !! from here on args[0] is always not null !! 
//  validate with list of strings 
// compare 
//         TraceMethodVisitor tmv = new TraceMethodVisitor(mv); 
//  def baos = new ByteArrayOutputStream() 
//  parse the document 
//  if origLong and withoutCustomHandle 
/*  ******** java.time.Month extension methods ********  */
//  Do not use URL.equals.  It uses the network to resolve names and compares ip addresses!   That is a violation of RFC and just plain evil.   http://michaelscharf.blogspot.com/2006/11/javaneturlequals-and-hashcode-make.html   http://docs.oracle.com/javase/7/docs/api/java/net/URL.html#equals(java.lang.Object)   "Since hosts comparison requires name resolution, this operation is a blocking operation.   Note: The defined behavior for equals is known to be inconsistent with virtual hosting in HTTP." 
//  we already visited the sub expression 
//  Another Thread may be using an instance of this class   (for the first time) requiring a ClassInfo lock and   classloading which would require a lock on classCache.   The following locks on ClassInfo and to avoid deadlock   should not be done with a classCache lock. 
//   Single node on list 
//                 throw ScriptBytecodeAdapter.unwrap(gre);              }          }      } 
//  bind include method 
//  visit cases 
//  initialize hints 
//  $Id: objinst.java,v 1.1 2004-05-23 07:14:28 bfulgham Exp $   http://www.bagley.org/~doug/shootout/   Collection class code is from my friend Phil Chu, Thanks Phil! 
//  state flag 
//  write only property 
//  don't inherit static methods except our own 
//  add the fireVetoableChange method call 
//  'pretty printer' output of AST 
//  we exclude the finally block from the exception table   here to avoid double visiting of finally statements 
//  GROOVY-4237, the original variable should always appear   in the variable index, otherwise some programs get into   trouble. So we define a dummy variable for the packaging   phase and let it end right away before the normal   reference will be used 
//  user has specified a type, prefer it over the inferred type 
/*              we will actually do                   (x < y) ? -1 : ((x == y) ? 0 : 1)          which is the essence of what the call with Integers would do          this compiles to something along                        <x>              <y>              IF_ICMPGE L1              ICONST_M1              GOTO L2          L1              <x>              <y>              IF_ICMPNE L3              ICONST_0              GOTO L2          L3              ICONST_1          L2                    since the operators are already on the stack and we don't want          to load them again, we will instead duplicate them. This will          require some pop actions in the branches!                        DUP2          (operands: IIII)               IF_ICMPGE L1  (operands: II)              ICONST_M1     (operands: III)              GOTO L2          L1              -----         (operands: II)              IF_ICMPNE L3  (operands: -)              ICONST_0      (operands: I)              GOTO L2          L3              - jump from L1 branch to here (operands: -)              ICONST_1      (operands: I)          L2            - if jump from GOTO L2 we have III, but need only I          - if from L3 branch we get only I                    this means we have to pop of II before loading -1                   */
//  end::jsr223_init[] 
//  check that there's no star import blacklist 
/*  The Great Computer Language Shootout   http://shootout.alioth.debian.org/    contributed by Paul Lofte */
//  let's try the thread context class loader first   let's try to use the system class loader 
//  unchecked assignment   examples:   List<A> list = []   List<A> list = new LinkedList()   Iterable<A> list = new LinkedList() 
/*  We are making a bet that not all chars will be unicode.  */
//  first pass, just check for absence of annotations of interest 
//  class level templates 
//  otherwise, earliest position in line not part of mlr 
// noinspection unchecked 
//  Make a copy so destructive operations will not affect the caller 
/*  ******** java.time.LocalTime extension methods ********  */
//  normal path 
//  first element == '1' ? 
//  there will be a default hash map constructor added later 
//  at the end we remove the Object[]   the vargs case simply the last swap so no pop is needed 
//  first visit   visit expression 
//  get the index of where we can start to look for an exit:   i.e. after the end of the length of the segment, when we find    that text in question already is set properly, we can stop   parsing 
//  GROOVY-5985 
//  if one superclass is derived (or equals) another 
//  The following fields are only used internally; every occurrence of a user-defined expression of the same kind   has its own instance so as to preserve line information. Consequently, to test for such an expression, don't 
/*  (non-Javadoc)    * @see java.io.Writer#close()     */
//  the class property stops resolving, dynamic property names too 
//  local inner classes do not specify the outer class name 
//  let's try setting the property on the first object 
//  map*.property syntax   only "key" and "value" are allowed 
//  ACC_SYNTHETIC isn't used here, use it as a special flag 
//  integer 
//  start all Threads 
//  The stream/writer to which to output 
//  Uncomment if at some point this method can be called before parameterTypes initialized   getParameterTypes(); 
//  if declaration does not provide generics, there is no connection to make  
/*      * Get info about usual Java public fields incl. constants.     *     * @return Array of StringArrays that can be indexed with the MEMBER_xxx_IDX constants      */
//  Ultimately, methods can be available in the closure map which are not defined by the superclass 
//  
/*  add a map item value.  */
// success |= isValidAttribute(xform, anno, ""); 
// TODO: move to Verifier 
//  conservative coding 
//  assume @tag signifies end of sentence 
//  should always be the case   this should always be the case, but adding a test is safer 
/*          * Never forget super.init()!          */
//  first extension will be the one set explicitly on <groovyc> 
//  we did for example find T=String and now check against   T=Object, which fails the first compatibleConnection check   but since T=Object works for both, the second one will pass   and we need to change the type for T to the more general one 
//     public GroovySourcePosition position() {/*todo*/return null;}      public GroovySeeTag[] seeTags() {/*todo*/return null;} 
//  currently just for empty literals, not for e.g. Collections.emptyList() at present 
//  TODO move logic here into resolve 
/*       Find the entry, then         1. Set value field to null, to force get() to retry        2. Rebuild the list without this entry.           All entries following removed node can stay in list, but           all preceding ones need to be cloned.  Traversals rely           on this strategy to ensure that elements will not be          repeated during iteration.     */
/*  (non-Javadoc)     * @see groovy.lang.MetaClass#invokeConstructor(java.lang.Object[])      */
// reset() and skip over last linesep 
//  when resolving getProp() or setProp() 
//  a dynamic variable is either an undeclared variable 
/*  (non-Javadoc)    * @see org.xml.sax.XMLReader#getDTDHandler()     */
//  do in privileged block since we may be looking at private stuff 
//  we put the old dependencies into local cache so createCompilationUnit   can pick it up. We put that entry under the name "." 
//  means we can't get to system clipboard, so create app level one 
//  set the script source position 
//  workaround for GROOVY-6095 
//  The overall AST for this CompilationUnit.   The classes generated during classgen. 
//  To make a connection to the SAM class we use that new information   to replace the generics in the SAM type parameter of the target 
/*  (non-Javadoc)     * @see groovy.lang.MetaClass#setProperty(java.lang.Object, java.lang.String, java.lang.Object)      */
//  dquote-tab-dquote 
//  Copy stream to stream 
//  default statement can be grouped with previous case 
/*      * Worker method for the {@link #escapeJavaScript(String)} method.     *     * @param str String to escape values in, may be null     * @param escapeSingleQuotes escapes single quotes if <code>true</code>     * @param escapeForwardSlash TODO     * @return the escaped string      */
//  Write out number of buckets 
//  Used to store the real access modifiers for inner classes 
//  naive 
//  command line arguments could not be parsed 
/*              * Resource not found.              */
//  let's create a dynamic proxy 
//  potentially add default constructor to class docs (but not interfaces) 
// guard checks 
//  then let's use the current working directory, since the repo can be relative to that. 
/* final */
//  test non-integer number 
//  println helper methods 
//  we need to transform variable expressions that go to a delegate   to a property expression, as ACG would lose the information in   processClassVariable before it reaches any makeCall, that could handle it 
//  check next level of interfaces 
// throws NumberFormatException 
// ---------------------------------------------------------------------------   TEXTS 
//  no rename so delete and add 
//  all arguments are object, so test only if argument number is correct 
//  try to resolve a public static inner class' name 
//  set it to -1 for starters so parameterTypes will always get a type 
//  v.Bv /(v.v)   eigenvalue of v 
//  if constructor call is not in outer class, don't pass 'this' implicitly. Return. 
//  No instances, static methods only 
//   --------------------------------------------------------                Property handling super: get    -------------------------------------------------------- 
//  Optional configuration data 
//  TODO account for default params giving multiple signatures 
/*     * Methods on Integer to implement 1.week, 4.days etc.     */
//  assignment for subscript 
/*  ---------------- Concurrent Map Support --------------  */
//  if right expression is a ClosureExpression, store parameter type information 
//  if namedArgs.containsKey(propertyName) setProperty(propertyName, namedArgs.get(propertyName)); 
//  this is used to store the goals for a "break foo" call 
//  testForIterator() covered by testForCondition() 
//  we should now check if the import is in the star imports 
// These are the costs for the various edit operations  they are used by the two DamerauLevenshtein implementations 
//  ------------------------------------------------------------------------------------------   Below, you will find various helper methods aimed at simplifying algorithms for subclasses   ------------------------------------------------------------------------------------------ 
//  Performance detail:   not using get(fromIndex), get(toIndex) in the following to avoid stepping over elements twice 
//  ignore, will try lazy reference 
/*  (non-Javadoc)         * @see groovy.lang.GroovyObject#setProperty(java.lang.String, java.lang.Object)          */
//  use Iterator.hasNext() to check for available inner classes 
//  and understandability of this solution over more complex but efficient alternatives) 
//  Interchange a[j] and a[k] 
//  Properties   ---------------------------------------------------------------------- 
//  Find index k such that a[k] is smallest integer 
//  Look at the super classes 
//   BITWISE_OR / PIPE   340    BITWISE_AND         341    BIWISE_XOR          342 
//  force check of modifier conflicts 
//  in theory, there can only be one annotation of that type 
//  the break statement is only allowed inside loops or switches   fails after parser 
//  TODO GROOVY-5011 handle case of @Override on a property 
//  package private 
//  on the stack 
//  Allow the msg to be a Throwable, and handle it properly if no cause is given 
//  if java did atomic blocks, this would be one 
/*  package private  */
//  then we're in the weird case of a \ at the end of the   string, let's output it anyway. 
// ---------------------------------------------                    double  --------------------------------------------- 
//  constructor call expression 
//  give a chance to type checker extensions to throw errors based on information gathered afterwards 
//  Classloader for global and local transforms 
//  lets try invoke the method on the real String 
//  look into the module node if there is a class with that name 
//  let us save that value for the return 
//  In order to divide tasks 'equally' for many threads, permut generation   strategy is different than that of original single thread. 
//  no MOP methods if not a child of GroovyObject 
//     public GroovyTypeVariable[] typeParameters() {/*todo*/return null;} // not supported in groovy      public GroovyParamTag[] typeParamTags() {/*todo*/return null;} // not supported in groovy 
//       * final GroovyCastException 
//  group 1: tag name, group 2: tag body 
//  cannot infer, return list type 
//  (it might have been UTF-7, but this encoding is usually internally used only by mail systems) 
//  ex: short s = (short) 0 
//  start on either side of the removed text 
//  case D   penalty for vargs 
//  startColumns.get(i) is the first non-empty column of lines.get(i) 
//  if a byte has its most significant bit set, the file is in UTF-8 or in the default encoding 
//  create a new temporary element in the if-then-else type info 
//  we already had a match so we don't make a direct call at all 
//  we replace '.' only in the className part   with '$' to find an inner class. The case that   the package is really a class is handled elsewhere 
/*  The current length of the map.  */
//  helpful error 
//  $Id: moments.java,v 1.1 2004-11-23 08:08:44 bfulgham Exp $   http://www.bagley.org/~doug/shootout/ 
//  type spec for generics 
//  test if one class inherits from the other 
//  e.g. x[a] += b   to avoid loading x and a twice we transform the expression to use   ExpressionAsVariableSlot   -> subscript=a, receiver=x, receiver[subscript]+b, =, receiver[subscript]   -> subscript=a, receiver=x, receiver#getAt(subscript)#plus(b), =, receiver#putAt(subscript)   -> subscript=a, receiver=x, receiver#putAt(subscript, receiver#getAt(subscript)#plus(b))   the result of x[a] += b is x[a]+b, thus:   -> subscript=a, receiver=x, receiver#putAt(subscript, ret=receiver#getAt(subscript)#plus(b)), ret 
//  joint compilation parameters 
//  it's important to use a stable sort here, otherwise   renderValues() will skip the wrong values 
//  check varged 
//  case C&D, we use baseType to calculate and set it   to the value we need according to case C and D   case C 
//  tag::bsf_simple[] 
//  now rhs is completely done and we need only to store. In a[1]++ this    would be a.getAt(1).next() for the rhs, "lhs" code is a.putAt(1, rhs) 
//  used to store type information on class nodes   in flow analysis, represents the type of the declaration node lhs   used to store inferred return type for methods and closures   used to store closure argument types on a variable expression   used to tell that a property expression refers to a readonly property   used to store the default expression for a parameter   used to store the MethodNode a MethodCallExpression should target   used to store the delegation strategy and delegate type of a closure when declared with @DelegatesTo   if the receiver is implicit but not "this", store the name of the receiver (delegate or owner)   set of private fields that are accessed from closures or inner classes   set of private fields that are set from closures or inner classes   set of private methods that are accessed from closures or inner classes   call recognized by a type checking extension as a dynamic method call   used to store the list of MOP methods that still have to be generated 
//  top is not primitive so unbox   leave that BH#doCast later 
//  @interface Foo...   1 & 2   1 | 2   1 >>> 2   1 ^ 2   class Foo...   private Foo() {...    3/4   foo.bar   enum Foo...   a >= b   a > b   interface Foo...   myMethod(name:"Jez")   foo:x=1                           true && false   a <= b   foo as Bar 
//  Ignore parent delegation and just try to load locally 
//  must invalidate all to force concurrent get's to wait and then retry 
//  get lock type 
//  power asserts 
//  bug where the increment was not executed when hitting non-executed if branch 
//  ... print result 
//  assume gradle syntax   see: http://www.gradle.org/latest/docs/userguide/dependency_management.html#sec:how_to_declare_your_dependencies 
//  tag::jsr223_variables[] 
//    Prep the generator machinery 
//  add Grape.grab(excludeArgs, [group:group, module:module, version:version, classifier:classifier])   or Grape.grab([group:group, module:module, version:version, classifier:classifier]) 
//  Step through ClassDocs and tie up loose ends 
/* Constructor[] */
/*  (non-Javadoc)      * @see groovy.lang.MetaBeanProperty#getGetter()       */
//  let's fast calculate the size 
//  we have to have handle DelcarationExpressions special, since their    entry should be outside the optimization path, we have to do that of   course only if we are actually going to do two different paths,    otherwise it is not needed     there are several cases to be considered now.   (1) no fast path possible, so just do super   (2) fast path possible, and at path split point (meaning not in        fast path and not in slow path). Here we have to extract the        Declaration and replace by an assignment   (3) fast path possible and in slow or fastPath. Nothing to do here.     the only case we need to handle is then (2). 
//  node and any subclass resolving will then take place elsewhere 
//  calculate whole list in this case   recommend avoiding -ve's as this is not as efficient 
//  found a leaf 
//  default 
/*    * This class performs a best-effort bounding of a ConcurrentHashMap using a   * page-replacement algorithm to determine which entries to evict when the   * capacity is exceeded.   *   * The page replacement algorithm's data structures are kept eventually   * consistent with the map. An update to the map and recording of reads may   * not be immediately reflected on the algorithm's data structures. These   * structures are guarded by a lock and operations are applied in batches to   * avoid lock contention. The penalty of applying the batches is spread across   * threads so that the amortized cost is slightly higher than performing just   * the ConcurrentHashMap operation.   *   * A memento of the reads and writes that were performed on the map are   * recorded in buffers. These buffers are drained at the first opportunity   * after a write or when the read buffer exceeds a threshold size. The reads   * are recorded in a lossy buffer, allowing the reordering operations to be   * discarded if the draining process cannot keep up. Due to the concurrent   * nature of the read and write operations a strict policy ordering is not   * possible, but is observably strict when single threaded.   *   * Due to a lack of a strict ordering guarantee, a task can be executed   * out-of-order, such as a removal followed by its addition. The state of the   * entry is encoded within the value's weight.   *   * Alive: The entry is in both the hash-table and the page replacement policy.   * This is represented by a positive weight.   *   * Retired: The entry is not in the hash-table and is pending removal from the   * page replacement policy. This is represented by a negative weight.   *   * Dead: The entry is not in the hash-table and is not in the page replacement   * policy. This is represented by a weight of zero.   *   * The Least Recently Used page replacement algorithm was chosen due to its   * simplicity, high hit rate, and ability to be implemented with O(1) time   * complexity.    */
//  -> 
//  cache   once per documentation set   cache   once per package   cache   once per class 
//  ---------------------------------------------------- 
/*  (non-Javadoc)    * @see org.xml.sax.ContentHandler#startDocument()     */
//  throw null pointer exception if key null 
// empty the reference queue 
// ---------------------------------------------------------------------------   PROCESSING 
//  middle element is condition, lower half is init, higher half is increment 
//  expected 
//   --------------------------------------------------------                         methods for super 
//  must be called for break/continue/return 
//  strip off trailing attributes 
//    TYPE CLASSES 
//  let's assume its a collection of 1 
//  look for one of these:     import static MyClass.* 
//  true when inside a task so special ant.target handling occurs just at top level 
//  add the firePropertyChange method call 
//  if the property expression is an attribute expression (o.@attr), then 
//  the following code will basically do this:   return Proxy.newProxyInstance(          arg.getClass().getClassLoader(),          new Class[]{parameter},          new ConvertedClosure((Closure) arg));   TO_REFLECTIVE_PROXY will do that for us, though   input is the closure, the method name, the class loader and the  
//  visitLetter ...     token type LETTER only used by lexer, never visited/created 
// creates the collection to look for values. 
// we have to keep 3 rows instead of the 2 used in Levenshtein 
//  exclusive   multi-line strings are always placed on new lines 
//  wrap arguments from call site in Object[] 
//     exprNode = node.getNextSibling();  } 
//  load array index: sub=a [load x, DUP, load sub, call arrayGet, load b, call operation, load sub, call arraySet] 
/*  (non-Javadoc)     * @see org.xml.sax.XMLReader#setProperty(java.lang.String, java.lang.Object)      */
//  use Class.forName instead of new Dummy() to allow separate compilation 
//  assume we got a true reference to the object 
//  should never reach here! 
//  {   }   [   ]   (   ) 
//  observable interface 
//  annotations 
//  check first parameters 
//  20 steps of the power method 
//  is different in its specified form. That means we have to create a bridge method! 
//  when resolving prop reference 
//  implementation of methods 
//  store copy in temporary variable 
//  append to right side of Li2 (reversing list) 
//  Direct instantiation of classes without imports will therefore also fail if this option is enabled 
//  pass 
//  true == replace 
//  we do not do our name mangling to find an inner class   if the type is a ConstructedClassWithPackage, because in this case we   are resolving the name at a different place already 
//  this shouldn't happen, since we are Cloneable 
//  little bit of hackery to avoid Groovy dependency in this file 
//  this   constructor arg n is the closure map 
//  constructor calls with this() and super() 
//  generic meta method invocation path 
//  check for a category method named like a getter 
//  if right is array, map or collection we try invoking the 
//  search for the file and if it exists don't try to use URIs ... 
//  varg call 
// reload saved value 
/*  (non-Javadoc)    * @see org.xml.sax.ContentHandler#endElement(java.lang.String, java.lang.String, java.lang.String)     */
//  ignore, the no arg constructor might not exist. 
// do nothing 
//  return statement added after visitConstructorOrMethod finished... we can not count these auto-generated return statements(GROOVY-7753), see `typeCheckingContext.pushEnclosingReturnStatement` 
//   --------------------------------------------------------                normal Property handling : get    -------------------------------------------------------- 
//  Implementation methods  ------------------------------------------------------------------------- 
//  not in java 
//  Have to call fireTestStared/fireTestFinished via reflection as they unfortunately have protected access in Project 
//  If they want to use a name other than than "run", then make the change. 
// the below is a quirk, we do this so that every non-string-section is prefixed by  the same number of characters (the others have "out<<\"\"\"${"), this allows us to  figure out the exception row and column later on 
/* DIV */
//  search for nested class 
//  package level templates 
//  set the offset to start where we left off 
//  LCONST_0, LCONST_1 
//  disabled until checked with fraz  new CompilationUnit(configuration, null, createGroovyClassLoaderWithExpectations(configuration)); 
//  FloatingPointMath wins according to promotion Matrix 
// if they share case check for substitution 
//  convert byte into unsigned hex string 
//  compare a list longer than the range 
// ---------------------------------------------------------------------------   TOKEN INITIALIZATION AND SUCH 
//  inference 
//  if it is an anonymous inner class, don't generate the stub code for it. 
/*  ---------------- Serialization Support --------------  */
//  2 is for inner class case 
//  check nested type parameters 
//  GroovyClassVisitor interface 
//  this program modified from:     http://cm.bell-labs.com/cm/cs/who/bwk/interps/pap.html   Timing Trials, or, the Trials of Timing: Experiments with Scripting   and User-Interface Languages</a> by Brian W. Kernighan and   Christopher J. Van Wyk. 
//  Set in safe defaults 
//  starting with number will never reach a non-number, same for string 
//  rotate all value arrays upwards(older rows get a higher index) 
//  wrapper creation methods 
//  $Id: sieve.java,v 1.1 2004-05-23 07:14:28 bfulgham Exp $   http://www.bagley.org/~doug/shootout/ 
//  UncheckedThrow allows throwing checked exceptions without declaring a throws 
//  patch needed here too, but we need a test case to trip it first 
//  Do not use HashMap 
//  stash declared variable in case we do subsequent visits after we   change to assignment only 
//  load this   load closure map   load method name 
//  this is a closure.call() call 
//  also don't bother with guard if we have "simple" method args 
//  Convert long to int for IFEQ comparison using LCMP 
//  if original long meta class 
//  Don't create statement in subclass constructors to avoid throw in constructors 
//  unary plus, unary minus, bitwise negation 
// prevent NPE if in .war 
//  store inferred type on CCE 
//  obtain the snippet from the buffer within specified bounds 
//       x     y     z 
//  load return value && correct operand stack stack 
//  default for inner classes 
//  for binary compatibility only 
//         }          return (Float) primitiveArrayPut(array, idx, newValue);      }        public static Double putAt(double[] array, int idx, Object newValue) { 
//  Postfix expressions 
//  add method:   VetoableChangeListener[] getVetoableChangeListeners(String name) {     return this$vetoableChangeSupport.getVetoableChangeListeners(name) 
//  it is super(..) since this(..) is already covered 
//  check the exception for a nested compilation exception 
//  --   --   --   - (negation) 
//   --------------------------------------------------------                normal GroovyObject Property handling : get    -------------------------------------------------------- 
//  GROOVY-6123 
//  pop for "makeBlockRecorder(catches)" 
//  test if vanilla name is current class name 
/*  oldM  */
//  null signals the value shouldn't be rendered 
//  we don't need the closure any longer, so remove it 
//  The apostrophe is only escaped if the value is for an   attribute, as opposed to element content, and if the   builder is configured to surround attribute values with   single quotes. 
//  In order to keep binary compatibility 
//  loop through methods in class 
//  given ScriptContext. If available, call it. 
//  add method:   PropertyChangeListener[] getPropertyChangeListeners(String name) {     return this$propertyChangeSupport.getPropertyChangeListeners(name) 
//  class through the receiver 
/*  (non-Javadoc)      * @see groovy.lang.MetaBeanProperty#getSetter()       */
/* ignore */
//  not a script, try running through run method but properties will not be available 
//  Otherwise try the older method based on the constructor's call expression 
//  JDK 9 and above correctly report 4   assertEquals(3, ctor.getParameterAnnotations().length); //[],[@Anno1,@Anno2],[@Anno2] 
//  workaround for generated code in enums which use .next() returning a Number 
//  ----------------------------------------------------   deprecate in parser?: 'continue' allowed in closures 
//  if it is not static and we do no static access 
/*  double quote  */
//  try finding a delegate that has that method... we start from   outside building a stack and try each delegate 
//  Reuse trailing consecutive sequence of all same bit 
//  $Id: sumcol.java,v 1.5 2007-06-20 03:32:39 bfulgham Exp $   http://www.bagley.org/~doug/shootout/  
//  method name to DSL name 
//  assume "is" or "[gs]et" 
//  LITERAL, "(", "{"   things the expression parser should cross lines for in it doesn't have to 
/*              * Class files generated for inner classes have an INNERCLASS             * reference to self. The top level class access modifiers for             * an inner class will not accurately reflect their access. For             * example, top-level access modifiers for private inner classes             * are package-private, protected inner classes are public, and             * the static modifier is not included. So the INNERCLASS self             * reference is used to capture the correct modifiers.             *             * Must compare against the fully qualified name because there may             * be other INNERCLASS references to same named nested classes from             * other classes.             *             * Example:             *             *   public final class org/foo/Groovy8632$Builder extends org/foo/Groovy8632Abstract$Builder  {             *     public final static INNERCLASS org/foo/Groovy8632$Builder org/foo/Groovy8632 Builder             *     public static abstract INNERCLASS org/foo/Groovy8632Abstract$Builder org/foo/Groovy8632Abstract Builder              */
//  push expression string onto stack 
//  for expressions like foo = { ... }   we know that the RHS type is a closure   but we must check if the binary expression is an assignment   because we need to check if a setter uses @DelegatesTo 
/*                  * If it is a statement for an explicitly declared static field inside an enum, store its                 * reference. For enums, they need to be handled differently as such init statements should                 * come after the enum values have been initialized inside <clinit> block. GROOVY-3161.                  */
//  These fields provide support for notifying a listener. 
//  we do not add one for super classes, only for interfaces 
// new ErrorReporter( e, false ).write( new PrintWriter(writer) ); 
//  are we using groups?   yes, so return the specified group as list 
//  probably facing a type mismatch 
//  compensate for closure's time 
//  check direct interfaces (GROOVY-7149) 
//  visitLiteralDef ...     token type "def" only used by parser, never visited/created directly 
//    Check to see if the requested script/template source file has been the   target of a RequestDispatcher.include(). 
//  this method mimics EMC behavior 
//  cast argument to parameter class, inclusive unboxing 
//  wrong line information 
//  valid method branch 
//  internal field 
//  we need to know the class we want to start 
//  thus for each argument, we try to find the connected generics first 
// set type as indicator for Java2GroovyConvertor to turn into LIST_CONSTRUCTOR 
//  we have two interfaces, but none inherits from the other 
//  This will pick up incorrect sibling node if 'node' is a plain 'return'   
//  assume properties contain paths 
/*          * GROOVY-4524: The following is not needed anymore as an ant Project already by default has inputhandler         * set to DefaultInputHandler. And if it is again set here, it mistakenly overrides the custom input handler         * if set using -inputhandler switch.           */
//  keeping 3 bits for additional information such as vargs 
//  most outer class is now element 0 
//    Recurse to display the children. 
/*  (non-Javadoc)    * @see groovy.lang.GroovyObject#setProperty(java.lang.String, java.lang.Object)     */
//  swallow for strict security managers, module systems, android or others,   but try one-by-one to get the allowed ones at least 
//  obsolete? 
//   --------------------------------------------------------                normal field handling : set    -------------------------------------------------------- 
//    KEYWORDS: CONTROL STRUCTURES 
//  todo - allow locale to be passed in 
//  do nothing, but clear the value recorder 
//  a similar method exists, we need a super bridge   trait$super$foo(Class currentTrait, ...) 
//     public GroovyThrowsTag[] throwsTags() {/*todo*/return null;}      public GroovyTypeVariable[] typeParameters() {/*todo*/return null;}      public GroovyParamTag[] typeParamTags() {/*todo*/return null;} 
//  Output the attribute name, 
//  given that we might have a grandParent... 
//  warning - do...while... ignored 
//         return values()[ordinal]       } 
//  it could just be a class, so let's wrap it in a Script   wrapper; though the bindings will be ignored 
//  method name 
//  a==null 
//  throws FileNotFoundException, IllegalArgumentException { 
//  there must be three continuation bytes of the form 10xxxxxx,   otherwise the following character is is not a valid UTF-8 construct 
//  primitive types should be ignored as they will result in another failure 
//  skip private super methods 
//  type of quotes are currently configured. 
//  !   ||   && 
//  rebind if we were bound 
//  if the number of parameters does not match we have    a vargs usage     case A: arguments.length<parameters.length             In this case arguments.length is always equal to           noVargsLength because only the last parameter           might be a optional vargs parameter             VArgs penalty: 1l     case B: arguments.length>parameters.length             In this case all arguments with a index bigger than           paramMinus1 are part of the vargs, so a            distance calculation needs to be done against            parameters[noVargsLength].getComponentType()             VArgs penalty: 2l+arguments.length-parameters.length     case C: arguments.length==parameters.length &&            isAssignableFrom( parameters[noVargsLength],                             arguments[noVargsLength] )             In this case we have no vargs, so calculate directly             VArgs penalty: 0l     case D: arguments.length==parameters.length &&            !isAssignableFrom( parameters[noVargsLength],                              arguments[noVargsLength] )             In this case we have a vargs case again, we need            to calculate arguments[noVargsLength] against           parameters[noVargsLength].getComponentType             VArgs penalty: 2l             This gives: VArgs_penalty(C)<VArgs_penalty(A)                       VArgs_penalty(A)<VArgs_penalty(D)                       VArgs_penalty(D)<VArgs_penalty(B) 
//  If the first param is def or a Map, named args might not work as expected so we add a hard-coded map constructor in this case   we don't do it for LinkedHashMap for now (would lead to duplicate signature)   or if there is only one Map property (for backwards compatibility) 
//     public final Object callGetProperty (Object receiver) throws Throwable {          return acceptGetProperty(receiver).getProperty(receiver);      } 
//  this boolean is used through setHandled(boolean) 
//  Keep a hardref so we can test get later 
//  not in java   not in java 
//  Output the attribute value within quotes. Use whichever 
//  Expressions  ------------------------------------------------------------------------- 
//  Method in base script that will contain the script body code. 
//  only overwrite if we find something more specific 
//  check for recursive generic typedef, like in   <T extends Comparable<? super T>> 
//  if a this appears as parameter here, then it should be   not static, unless we are in a static method. But since    ACG#visitVariableExpression does the opposite for this case, we   push here an explicit this. This should not have any negative effect   sine visiting a method call or property with implicit this will push   a new value for this again. 
//  load rhs 
// DO NOTHING 
//  ------------------ short ------------------ 
//  some constants for modifiers 
/*  The current index into the file name array  */
//  check bounds: unbounded wildcard (aka "?") is universal substitute 
//  additional constructor not used directly but exercises inspection code 
// noinspection ThrowableInstanceNeverThrown 
//  to be run in PrivilegedAction! 
//  Apply all pending writes 
//  Jsr parser 
/*  redirect().isPrimaryNode &&  */
//  only used for star imports 
//  By default forward all events to all the listeners. 
/* Float[14] */
//  def (key, value) == array.toList() 
//  we are the top of the tree 
//  determine direct result 
//  do you want full stack traces in script exceptions? 
//  ignore, was probably a dynamic property 
//  rhs is normal value, set the value in the Reference 
//     public static Boolean putAt(boolean[] array, int idx, Boolean newValue) {          return (Boolean) primitiveArrayPut(array, idx, newValue);      }        public static Byte putAt(byte[] array, int idx, Object newValue) { 
//  let's try invoke the constructor with the list as arguments   such as for creating a Dimension, Point, Color etc. 
//  Do not allow this class to be instantiated 
//  let's treat the script as a Test 
//  already added 
//  a==b 
/*  (non-Javadoc)      * @see groovy.lang.GroovyObject#setMetaClass(groovy.lang.MetaClass)       */
//  ------------------------------   feature: Annotation Definition   ------------------------------ 
// none of the interfaces here match, so continue with super class 
//  2 way relationship for visible classes:   add reference to classes inside this package   add reference to this package inside classes 
//  don't use the ClassHelper here! 
//    OPERATORS AND OTHER MARKERS 
//  INSTANCE VARIABLES 
//  let's recreate the parser each time as it tends to keep around state 
//  --------------------------------------------   end of delegate to the type checking context   -------------------------------------------- 
//  closures are always dynamic   propertyExpressions will handle the error a bit differently 
//  set a DEFAULT precision if otherwise non-terminating 
//  just like modifiers but for package/enum declarations 
//  A callback for use during classgen()   A callback for use during compile() 
//   Implement overtype mode by selecting the character at the current    caret position 
//  the left operand is determining the result of the operation 
//  ignore for factories that don't support this 
//  check for all pieces, if we don't have the triad quit silently 
//  do a little bit of pre-work since Groovy compiler hasn't added property accessors yet 
//  the text of the token   the source line on which the token begins   the source column on which the token begins 
//  null is always false 
//  not null if if the ClassNode is an array 
//  check for reference to method, closure, for loop, try with, or catch block parameter from a non-nested closure 
//  { def tmp = new Foo(); tmp.x = 1; tmp.y = 2; return tmp }() 
//  now repeat the same for each parameter given in the ClosureExpression 
//  load b and convert to boolean 
//  if after normalizing both are numbers, assume intended range was numbers 
//  Skip Synthetic methods inserted by JDK 1.5 compilers and later 
/*  (non-Javadoc)         * @see groovy.lang.Closure#asWritable()          */
//  add non-abstract methods; abstract methods covered from trait interface 
// ---------------------------------------------------------------------------   REPORTING ROUTINES 
//  All objects should have been collected 
//  will need the extra for isNaN call if required 
//  method body should be: 
//  "."-"<<"   cast, ternary, and closure expression   new, this, super, instanceof, true, false, null   LITERAL   "[" 
//  if the class not is an inner class node, there are chances that the call to super is already added   so we must ensure not to add it twice (see GROOVY-4471) 
/* jes this may be rewritten to use the new getProperties() stuff         * but the original pulls out private variables, whereas getProperties()         * does not. What's the real use of dump() here?          */
//  need to call here here because we used the static target type   it won't be done otherwise because handle.type() == callSite.type() 
// -----------------------------------------------------------------------   SPECIAL CASES 
//  ctors are not considered static ! 
//  retry as an intermediate update may have replaced the value with   an equal instance that has a different reference identity 
//  GROOVY-8233 skip static properties for traits since they don't make the interface 
/*          * we have a name foo.bar and an import foo.foo. This means foo.bar is possibly         * foo.foo.bar rather than foo.bar. This means to cut at the dot in foo.bar and         * foo for import          */
//  import checks that stack is not empty  
/*      * Guess the encoding of the provided buffer.     * If Byte Order Markers are encountered at the beginning of the buffer, we immediately     * return the charset implied by this BOM. Otherwise, the file would not be a human     * readable text file.     * <p>     * If there is no BOM, this method tries to discern whether the file is UTF-8 or not.     * If it is not UTF-8, we assume the encoding is the default system encoding     * (of course, it might be any 8-bit charset, but usually, an 8-bit charset is the default one).     * <p>     * It is possible to discern UTF-8 thanks to the pattern of characters with a multi-byte sequence.     * <pre>     * UCS-4 range (hex.)        UTF-8 octet sequence (binary)     * 0000 0000-0000 007F       0xxxxxxx     * 0000 0080-0000 07FF       110xxxxx 10xxxxxx     * 0000 0800-0000 FFFF       1110xxxx 10xxxxxx 10xxxxxx     * 0001 0000-001F FFFF       11110xxx 10xxxxxx 10xxxxxx 10xxxxxx     * 0020 0000-03FF FFFF       111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx     * 0400 0000-7FFF FFFF       1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx     * </pre>     * With UTF-8, 0xFE and 0xFF never appear.     *     * @return the Charset recognized.      */
//  stack size = 2   array index, stack size = 3   primitive types must be boxed 
//  Arrays.copyOfRange only since JDK 1.6 
//  return value of assignment 
//  ------------------ boolean[] ------------------ 
/*          * Synchronization is avoided here for performance reasons since         * this method is called frequently from callsite locations. For         * a typical case when no Categories are in use the initialized         * value of 0 will be correctly read. For cases where multiple         * Threads are using Categories it is possible that a stale         * non-zero value may be read but in that case the ThreadLocal         * check will produce the correct result. When the current Thread         * is using Categories, it would have incremented the counter         * so whatever version of the value it observes here should be         * non-zero and good enough for the purposes of this quick exit         * check.          */
//  not required for stub generation 
//  visitBlock() ...     token type BLOCK never created/visited, see CLOSABLE_BLOCK etc... 
//  The bounds on the declared type are at least as good as the ones on an unbounded wildcard, since it has   none! 
// ----------------------------------------------------------------------   special cases  ---------------------------------------------------------------------- 
//  we have two methods, so no SAM 
//  Was neither already loaded nor compiling, so compile and add to cache. 
//  we look at the closure later in detail, so skip it here 
//  special path for boxed boolean 
// accept(cv); 
//  downgrade to readlock before releasing just in case 
//  check uri and for legacy cases just check prefix name (not recommended) 
//  track the end of the matching string  
//  fallback to the source unit classloader 
/*  (non-Javadoc)        * @see java.io.Writer#flush()         */
//  to the corresponding parameters of the SAM type method 
//  to match property name 
//  The set of child nodes   Used for completion marking by some parts of the parser 
/*      * Implementation note:     *   This has to be an inner class!     *     * Reason:     *   Closure.this.call will call the outer call method, but     * with the inner class as executing object. This means any     * invokeMethod or getProperty call will be called on this     * inner class instead of the outer!      */
//  delete contained files 
//  look in the namespaces whose declaration has already been emitted 
//  start catch block, label needed for exception table 
//  call flags and the constructor number 
//  ... find shapes that fit 
//  GROOVY-6183 
//  validate with one string 
//  value = this.prop <=> other.prop; 
// ----------------------------------------------------------------------   handling of static 
// if it's not setter, get the type info of the return type of the get* method 
/*  All \r\n sequences are treated as a single \n. By doing this we         * produce the same output as the GStringTemplateEngine. Otherwise, some         * of our output is on a newline when it should not be.         *         * Instead of using a pushback reader, we just keep a private instance         * variable 'lastRead'.          */
//  change the arguments for an uncurried call 
//  ignore veto exceptions, just let the binding fail like a validation does 
//  Fallback for non-standard base "script" classes with no context (Binding) constructor. 
//  we add a package if there is none yet and the module has one. But we   do not add that if the type is a ConstructedClassWithPackage. The code in ConstructedClassWithPackage   hasPackageName() will return true if ConstructedClassWithPackage#className has no dots.   but since the prefix may have them and the code there does ignore that 
//  It might annotate an annotation, e.g. jqwik @Property 
//  handle constant meta class and category changes 
//  to match JSR-295 
//  if original boolean meta class 
//  normal type transformation  
//  for MetaClassImpl we try to pick meta method, 
//  store type information 
//  make the first fetch lazy too 
//  add the super call 
//  Swallow exception - does not exist locally 
//  look at the interfaces, there's a chance that a method is not implemented and we should not hide the   error from the compiler 
//    call the closure corresponding to the tag 
//  if not null this instance is handled as proxy 
//  let's add a getter & setter 
// ---------------------------------------------------------------------------   CONSTRUCTION AND SUCH 
//  possible loss of precision 
//  execute dependencies (if any) 
/*  (non-Javadoc)    * @see java.io.Writer#write(char[], int, int)     */
//  instead of using the SubList backed by the parent list, a new ArrayList instance is used 
//  visitBigSuffix() ...     token type BIG_SUFFIX never created/visited, NUM_BIG_INT, NUM_BIG_DECIMAL instead...     
//  now handle primitive types 
//  We don't try to analyse which statement within the try block might have thrown an exception.   We make a crude assumption that anywhere from none to all of the statements might have been executed.   Run visitor for both scenarios so the eager checks will be performed for either of these cases. 
//       h i     j     k     l     m     n     o 
//  if recompilation fails, we want cls==null 
//  log4j api is inconsistent, so trace requires special handling 
/*  (non-Javadoc)         * @see java.lang.Object#hashCode()          */
/* Object[19] */
//  we make a dummy return for label ranges that reach here 
//  all of the below 1900 series 
// trying to determine the base class of the collections  special case for Numbers 
/*      * Parse the Groovy code contained in the GroovyCodeSource as a privileged operation (i.e. do not     * require the code source to have specific compile time permissions) and return the resulting class.      */
//  set parent afterwards 
/*                  * fix for GROOVY-2284                 * seems like AntClassLoader doesn't check if the file                 * may not exist in the classpath yet                  */
//  integer   decimal 
//  add a document listener, to hint whether the line number gutter has to be repainted   when the number of lines changes 
// find the type of the field; if it's a setter, need to get the type of the params 
//  Ignore 
//  also allows abstract or static self methods to be selected for overriding but they are ignored later 
//  compare lists that are the same size but contain different elements 
//  symbol/keyword type -> text   text -> symbol/keyword type   valid keywords 
/*          * If verbose, log the parameter values.          */
//  Imported classes 
//  only guard this particular class 
/*      * Get info about Properties (Java and Groovy alike).     *     * @return Array of StringArrays that can be indexed with the MEMBER_xxx_IDX constants      */
//  now do the business 
//  no class found, there should have been an exception before now 
//  check if values have been passed for all annotation attributes that don't have defaults 
//  in this case we need two "this" in between and the Object[]   at the bottom of the stack as well as on top for our invokeSpecial   So we do DUP_X1, DUP2_X1, POP       Object[],this -DUP_X1-> this,Object[],this       this,Object[],this -DUP2_X1-> Object[],this,this,Object[],this       Object[],this,this,Object[],this -POP->  Object[],this,this,Object[] 
//  for typical user math when a non-terminating result would otherwise occur. 
//  =, +=, etc.   ==, ===, >, <, etc.   +, -, / *, %, plus the LOGICAL_OPERATORS   ||, &&, !   .., ...   =~, etc.   ., ->   |, &, <<, >>, >>>, ^, ~ 
//  index of the last variable on stack 
//  this test depends deeply on the String.next implementation   009.next is 00:, not 010 
//         dup_x1:     ---           dup_x2:     aab  -> baab          dup2_x1:    abb  -> bbabb          dup2_x2:    aabb -> bbaabb          b = top element, a = element under b          top element at right   aa   aabb   aabb -> bbaa   bbaabb   bbaa 
//  we only need one of these that can be reused over and over. 
//  we cannot a target for the constructor call, since we cannot easily   check the meta class of the other class   setMethodTarget(call, "<init>", call.getArguments(), false); 
//  expect a colon between the key and value pair 
//  Instantiate all beans. 
// ---------------------------------------------------------------------------   LEXING SUPPORT 
//  if we added a package 
//  add method dispatcher 
//  goto finally start 
//  here we box and unbox to get the goal type 
//  this.x = ... shouldn't use a setter if in the same class 
//  -------------------------------------   delegate to the type checking context   ------------------------------------- 
/*  (non-Javadoc)     * @see groovy.lang.MetaClassImpl#initialize()      */
//  avoid using a narrowed type if the method is defined on object because it can interfere   with delegate type inference in static compilation mode and trigger a ClassCastException 
/*          * Hook for extra processing, e.g. GSP tag element!          */
//  Controls behavior of classgen() and other routines.   Set true after the first configure() operation 
//  helper method for getAt and putAt 
//  otherwise make up a new tag and check it has not been used before 
//  Wrong list or interference 
//  workaround for map-style checks putting setter info on wrong AST nodes 
//  Discard all pending reads 
//  check that first item is now SIZE 
//  xxx br defmacro 
//  if original float meta class 
//  handle unicode 
//  Lazily initialize the single instance of the HandleMetaClass metaClass 
//  first visit of node 
/*          * Handle normal element like <html> ... </html>.          */
//  in a temporary variable 
//  arguments to the script 
/*  * The Computer Language Benchmarks Game * http://shootout.alioth.debian.org/ * * Contributed by Oleg Mazurov, June 2010 *  */
/*      * this method is called for local variables shared between scopes.     * These variables must not have init values because these would     * then in later steps be used to create multiple versions of the     * same method, in this case the constructor. A closure should not     * have more than one constructor!      */
/*      * Get all properties including JavaBean pseudo properties matching JavaBean getter or setter conventions.     *     * @param type the ClassNode     * @param includeSuperProperties whether to include super properties     * @param includeStatic whether to include static properties     * @param includePseudoGetters whether to include JavaBean pseudo (getXXX/isYYY) properties with no corresponding field     * @param includePseudoSetters whether to include JavaBean pseudo (setXXX) properties with no corresponding field     * @param superFirst are properties gathered first from parent classes     * @return the list of found property nodes      */
// partial match 
//  The CSTNode that indicates the location to which the message applies 
//  tag::bsf_variable_passing[] 
//  defaults 
/*     * Methods on Integer to implement 1.month, 4.years etc.     */
//  we cannot infer anything, thus we simply return the provided samUsage 
//  not a change, don't fire it 
//  no-op 
//  RFC2396   scheme        = alpha *( alpha | digit | "+" | "-" | "." ) 
//  in primopts we convert to the left type for supported binary operations 
//  let's check if it already uses a mixin 
// public static final Expression EMPTY_ARRAY = new PropertyExpression(new ClassExpression(ArgumentListExpression.class.getName()), "EMPTY_ARRAY"); 
//  must be call to this(...) 
//  remove problem meta characters returns 
//  create a valid (empty) test suite on disk 
//  add to super call 
//  clazz!=null when resolved 
//  -   :   ;   ? 
//  Introspection failure...   May happen in Android 
//  You defined a method without body. Try adding a body, or declare it abstract   fails after parser 
//  check if the placeholder corresponds to the placeholder of the first parameter 
/*  2: long    */
//  Object is superclass of arrays but no generics involved 
//  Check this class loader 
//  will replace these with nullish values 
//  it's really just a field 
//  finish and cleanup 
//  If we didn't find anything, report on all the exceptions that occurred. 
//  could be a closure field 
// For testing only 
//  extract implemented interfaces before "going up" 
// Prepare for each security test.  First, check to see if groovy.lib can be determined via  a call to checkSecurity().  If not, fail() the first test.  Establish a security manager  and make the GroovyClassLoader the initiating class loader (ala GroovyShell) to compile AND  invoke the test scripts.  This handles cases where multiple .groovy scripts are involved in a  test case: a.groovy depends on b.groovy; a.groovy is parsed (and in the process the gcl  loads b.groovy via findClass).  Note that b.groovy is only available in the groovy class loader.  See 
//    Template not cached or the source file changed - compile new template!   
//  in case a "flow type" is found, it is preferred to use it instead of   the declaration type 
//  node==null means a compilation error prevented   groovy from building an ast 
//  rhs is normal value, set normal value 
//  do nothing 
//  we already know the lengths are equal 
/*  (non-Javadoc)     * @see groovy.lang.MetaClass#invokeStaticMethod(java.lang.Object, java.lang.String, java.lang.Object[])      */
//  br should get a "native" property match first. getProperty includes such fall-back logic 
//  it is possible to use a getter 
//  this name contains @name we need to return name 
//  modifier and block type   modifier and block type 
//  Compiler configuration, used to set the encodings of the scripts/classes 
//  is next line needed at all? 
//  if we are in a class and no variable is declared until   now, then we can break the loop, because we are allowed   to declare a variable of the same name as a class member 
//  we may inline a var!=null check instead of calling a helper method iff   (1) the class doesn't define an asBoolean method (already tested)   (2) no subclass defines an asBoolean method   For (2), we check that we are in one of those cases   (a) a final class   (b) a private inner class without subclass 
//  _result = HashCodeHelper.updateHash(_result, getProperty()) // plus self-reference checking 
//  case B   we give our a vargs penalty for each exceeding argument and iterate   by using parameters[noVargsLength].getComponentType()   penalty for vargs 
//  Unknown type: "threadsafe"   fails after parser 
//  allow Diamond for non-AIC cases from CCE 
//  and the closure after them 
//  end::bsf_access[] 
//  otherwise or if method doesn't exist we make call via POJO meta class 
// <param-value></param-value> is prohibited 
//  todo (iterate) 
/*  explicit  */
//  map containing named labels of current block 
//  Method has been optimized to reach a target of 325 bytecode size, making it JIT'able 
//  sum all the meetings 
// @todo -- 
//  let's try use the cache to find the method 
//  wait for all threads to complete 
//  Test class implementing GroovyObject 
//  lazy create for edge-case efficiency 
//  ------------------ float[] ------------------ 
//  Only attempt to render our self if our super-class is resolved, else wait for it 
//  Do nothing. 
//  assume we have a script 
//  we create separate method lists just to be able to print out   a nice error message to the user   a method is accessible if it is static, or if we are not in a static context and it is   declared by the current receiver or a superclass 
//  and the getters and setters 
//  check module static imports (for static inner classes) 
//   --------------------------------------------------------                normal Property handling : set    -------------------------------------------------------- 
//  added to track the enclosing method for local inner classes 
//  JDK 1.6 has changed the implementation to do a   String.valueOf(x) rather than call print(x).   Probably to improve performance by doing the conversion outside the lock.   This will do the same thing for us, and we don't have to have access to the lock. 
//  unreachable statement 
//  add method:   boolean removeVetoableChangeListener(listener) {      return this$vetoableChangeSupport.removeVetoableChangeListener(listener); 
// Subclasses implement according to the type promotion hierarchy rules 
/*  * The Great Computer Language Shootout * http://shootout.alioth.debian.org/ * * contributed by James McIlree  */
//  start on the string that was inserted 
//  make sure that no values are ever placed on empty line   + 1: no whitespace required between end of value and "|" 
//  this code is in an extra method to avoid   lazy initialization issues 
// ---------------------------------------------------------------------------   EXTERNAL CALLBACKS 
//  falling back to pre 2.1.9 selection algorithm   in practice this branch will only be reached if the class calling this code is a Groovy class   compiled with an earlier version of the Groovy compiler 
//  copy annotations 
//       p     q     r     s     t     u     v     w 
/*     * create a subset of the original dataset     */
//  we stop now, otherwise we must check the parent class 
//  tokens from Types 
//  prepare call site 
//  anything can be assigned to an Object, String, Boolean 
//  add method:   void addPropertyChangeListener(name, listener) {       this$propertyChangeSupport.addPropertyChangeListener(name, listener) 
//  consume the first double quote starting the string 
//  resolve scope (for closures) 
/*  (non-Javadoc)    * @see org.xml.sax.helpers.DefaultHandler#startPrefixMapping(java.lang.String, java.lang.String)     */
//  visitLiteralPackage     token type "package" only used by parser, never visited/created directly 
/*  (non-Javadoc)    * @see java.io.Writer#write(int)     */
//  TODO we could one day store the Antlr AST on the Groovy AST   node.setCSTNode(ast); 
//  $idx++ 
//  static init 
//  must replace backslashes first, as the other replacements add backslashes not to be escaped 
//  If class name is looked up below, additional types will be used in error message 
/*      * Get info about usual Java instance and class Methods as well as Constructors.     *     * @return Array of StringArrays that can be indexed with the MEMBER_xxx_IDX constants      */
//  direct read 
//  is this a file on disk 
//  only false when this classNode is constructed from a class 
// correct SAM type for generics  sam = applyGenericsContext(placeholders, sam); 
//  we're using node metadata here in order to fix GROOVY-6094   without breaking external APIs 
//  TODO remove dup with SimpleGroovyClassDoc 
//  if we have to delegate to another object, generate the appropriate delegate field 
//  GROOVY-5580, it is still possible that we're calling a superinterface property 
//  for thread safety, grab local copy 
//  if the current generics spec is a wildcard spec or a placeholder spec   then we must check upper and lower bounds 
//  here, we want to point to a method named "doCall" instead of "call"   but we don't want to replace the original call site name, otherwise   we loose the fact that the original method name was "call" so instead   we will point to a metamethod called "doCall"   see GROOVY-5806 for details 
//  for consistency with AsmClassGenerator. see AsmClassGenerator.visitBooleanExpression. 
//  We need @InheritConstructors from parent classes processed first   so force that order here. The transformation is benign on an already   processed node so processing twice in any order won't matter bar   a very small time penalty. 
//  GROOVY-5150 
/*  = 0 */
//  avoid re-triggering 
//  add "this$0" field init 
//  generate bytecode 
/*  (non-Javadoc)     * @see org.xml.sax.XMLReader#setEntityResolver(org.xml.sax.EntityResolver)      */
//  ------------------------------   feature: classic Java for loop   ------------------------------ 
//  fastPathBlocked -> slow path 
//  we skip bridge methods implemented in current class already 
//  visitLiteralEnum ...     token type "enum" only used by parser, never visited/created directly 
//    KEYWORDS: SPECIAL VALUES 
// skip contents, because of dynamic scope 
//  trigger the call to VMPlugin#configureClassNode(CompileUnit,ClassNode) 
//  add property getter 
//   --------------------------------------------------------                normal GroovyObject Property handling : set    -------------------------------------------------------- 
/*      * Get all properties including JavaBean pseudo properties matching getter conventions.     *     * @param type the ClassNode     * @param includeSuperProperties whether to include super properties     * @param includeStatic whether to include static properties     * @param includePseudoGetters whether to include JavaBean pseudo (getXXX/isYYY) properties with no corresponding field     * @return the list of found property nodes      */
//  Ranges 
//  and that should link to api/Foo.html, not to lib/Foo.html. 
//  and collect the name of the methods for which delegation is active 
//  GROOVY-5570: if a closure shared variable is a primitive type, it must be boxed 
//  check cast not necessary because Object never evolves   and it prevents a potential ClassCastException if the delegate of a closure   is changed in a statically compiled closure 
/*          * Test cache for a valid template bound to the key.          */
// noinspection UnnecessaryContinue 
//  automatically split each line using the splitpattern 
//  int sum(int x) should be preferred to int sum(int x, int... y) 
/*  (non-Javadoc)         * @see groovy.lang.GroovyObject#invokeMethod(java.lang.String, java.lang.Object)          */
//  Statements  ------------------------------------------------------------------------- 
// if the error was thrown on the same row as where the last string section 
//  add special handling of getDelegate() and getOwner() 
//  not in JavaDoc API 
//  Else try to render some arguments 
//  code to negate the primitive boolean 
//  name too short? 
//  added to avoid hash collision attack 
//  retrieve the proper style from groupNum of the groupList and 
//  Class<TraitClass> 
//  (3) there is more than one argument for the vargs array 
//  Exit early if we run out of data 
// either a map or a collection 
//  simply return the values of the metaproperty map as a List 
//  drop dummy receiver 
//  meaning that we reached the top of the object hierarchy 
//  Traits order *must* be preserved   See GROOVY-7285 
//  in case of this(...) let the other constructor do the init 
// space between classdef and objblock 
//  GROOVY-8728 make idempotent   remove default expression and store it as node metadata 
//  Use a new class loader by default for each class so each class can be independently garbage collected 
//  inner classes created while generating bytecode 
//  let's try setting the property on the second object 
//  couldn't access files 
//  if it implements Runnable, try to instantiate it 
//  An entry may be scheduled for reordering despite having been removed.   This can occur when the entry was concurrently read while a writer was   removing it. If the entry is no longer linked then it does not need to   be processed. 
//   --------------------------------------------------------         special constructor invocation (via this/super)    -------------------------------------------------------- 
/*              * If the current value is a node, recurse into that node.              */
// exception table writing 
/*      * Get info about instance and class Methods that are dynamically added through Groovy.     *     * @return Array of StringArrays that can be indexed with the MEMBER_xxx_IDX constants      */
//  extract joint options, some get pushed up... 
//  temporarily store the delegation strategy and the delegate type 
//  iterate through the rows and add each one to the layout... 
//  already registered 
//  we have to handle here different cases in which we do no   transformations. We depend on our method selection to have   selected only a compatible method, that means for a null   argument we don't have to do anything. Same of course is if   the argument is an instance of the parameter type. We also   exclude boxing, since the MethodHandles will do that part   already for us. Another case is the conversion of a primitive   to another primitive or of the wrappers, or a combination of    these. This is also handled already. What is left is the    GString conversion and the number conversions. 
//  loop body 
//  The exception source of the message, if any 
//  this used to be synchronized, but we also used to remove the   metaclass.  Since adding the metaclass is now a side effect, we   don't need to ensure the meta-class won't be observed and don't   need to hide the side effect. 
//  vim: set ts=4 ft=java 
//  if origShort and withoutCustomHandle 
//  value is on stack 
// load spread expressions as array 
//  handle instanceof cases 
//  raw type usage is always allowed 
/*  (non-Javadoc)     * @see groovy.lang.MetaClass#getMethods()      */
//  wrap the standard MetaClass with the delegate 
//  invert the map, is now one to many 
//  CONSTANTS 
//  goto finally part 
//  allows a closure to be used to configure Statement objects before its use 
//  anything text and not a keyword 
//  Causes the invalid escape to be skipped 
//  ClassLoaders should only be created inside a doPrivileged block in case   this method is invoked by code that does not have security permissions. 
/*  ******** java.time.temporal.TemporalAccessor extension methods ********  */
//  return false if cannot do fast path and if are already on the path 
//  unbox 
//  IMPLEMENTATION NOTE:   classpath must be the first argument, so that the `startGroovy(.bat)` script   can extract it and the JVM can be started with the classpath already correctly set.   This saves us from having to fork a new JVM process with the classpath set from the processed arguments. 
//  means we're in middle of mlr, so start at beginning of mlr 
//  for efficiency set maxRows (adjusted for the first offset rows we are going to skip the cursor over) 
//  don't take blank lines into account for calculating the indent 
//  Set the RHS to '= URI.create("string for this URI")'.   That may throw an IllegalArgumentExpression wrapping the URISyntaxException. 
//  fast/slow path generation 
//  lets register the builder as the delegate 
//  if the right hand side is a boolean expression, we need to autobox 
//  make copy & set type 
//  merge if/else branches 
//  it happens with @interface methods 
//  merge maps 
//  Define null less than everything. 
//  Remove some refs so GC will work in order to test multiple iterating threads   removing collected references 
//  append super if needed 
//  perform some early param checking for non-vararg case 
//  $Id: except.java,v 1.1 2004-05-23 04:36:29 bfulgham Exp $   http://www.bagley.org/~doug/shootout/   Collection class code is from my friend Phil Chu, Thanks Phil! 
//  duplicate arguments 
//  ------------------ long ------------------ 
//  handle receiver 
//  safe to return null here because then we'll get the default provider 
//  parse the child regexps, if any, within a matched block 
/*  ******** java.time.Period extension methods ********  */
//  fact. We check here for ConstructedClassWithPackage. 
// we don't need a template.clone here as curry calls clone under the hood 
//  let's brute-force calculate the size by iterating start to end 
//  perform visit 
//   this.$delegate$closure$methodName.call(new Object[] { method arguments }) 
//  Look for closure valued variable in the  
//  create previous() method, code:      Day previous() {          int ordinal = ordinal().previous() 
//  this super class stuff is for Java 1.4 support only   it isn't needed on a 5.0 VM 
//  in case of a precompiled class, the outerclass is unknown 
//             int result = 17;              result = result * 31 + (reverse ? 1 : 0);              result = result * 31 + (inclusive ? 1 : 0); 
/* float[13] */
//  test list 
//  method call with default arguments 
//  if the object is a Class, call a static method from that class 
//  add method:   VetoableChangeListener[] getVetoableChangeListeners() {     return this$vetoableChangeSupport.getVetoableChangeListeners 
//  Nothing should be done when no elements need protection against eviction 
// out.print("</" + t.getType() + ">"); 
//  on a special call, there's no object on stack 
//         LinkedList<DeclarationExpression> declarations = new LinkedList<DeclarationExpression>(); 
//  noSuchMethod(method, object, arguments); 
//  remove annotations 
//  The exception on which to report   If true, stack traces are always output 
//  given an offset, return the mlr it resides in 
//    GSTRING TOKENS 
//  store target method 
//  load arguments 
//  add no-arg constructor 
//         List<FieldNode> fields = getFields(transform, anno, buildee); 
//  uncached constants. 
//  only used on rare occasions, e.g. the '(' in this snippet...   @Foo  (  a=1, b=2, c=3) 
//  method invocation 
//  don't log the password 
//  if we lazily create default values, use 'null' as placeholder 
//  copy arguments that are not a varg 
//  the document buffer and segment 
//  direct method call paths 
//  add fields 
//  let's make the constructor 
//  identifiers, primitive types   identifiers, primitive types except void 
//  default packages do not contain classes like these 
//  things like com.sun.org.apache.xerces.internal.dom.DeferredElementNSImpl   do implement Element, NodeList and Node. But here we prefer element,   so we force the usage of Element. Without this DOMCategoryTest may fail   in strange ways 
//  resolve property types 
// could be more efficient by compiling expressions in advance. 
// There may be more than 1 failure:  iterate to ensure that they all match the missingPermission. 
//  we drop the receiver, which might be a Class (invocation on Class)   or it might be an object (static method invocation on instance)   Object.class handles both cases at once 
//    Store Access   
//  create a list of integers (Li1) from 1 to SIZE 
//  let's pass along any other modifiers we need 
//  cached data 
//  Scheduler will run foerever 
//  currently not looking for PropertyExpression: dealt with at runtime using ReadOnlyPropertyException 
//  look if really compare 
//  another case we want to check here is if we are in a   nested class A$B$C and want to access B without   qualifying it by A.B. A alone will work, since that   is the qualified (minus package) name of that class   anyway.  
//  set super class and generics info   "enum X" -> class X extends Enum<X> 
//  May happen on JDK8 and below. We add elements to the front of the array to account for the synthetic params:   - for an inner class we expect one param to account for the synthetic outer reference   - for an enum we expect two params to account for the synthetic name and ordinal 
/* Character[7] */
/*      * If a main method is provided by user, account for it under run() as scripts generate their own 'main' so they can run.        */
//  TODO: dk: make FileNameFinder injectable 
//   --------------------------------------------------------                    unboxing methods    -------------------------------------------------------- 
//  now let's look up the name via JMX to check 
//  can safely use '/' because Windows understands '/' as separator 
//  look in the namespaces who will be declared at the next element 
/*  *     * load a message on the stack and remove it right away. Good for put a mark in the generated bytecode for debugging purpose.     *     * @param msg      */
//  use this to synchronize access for the lazy init 
/*  (non-Javadoc)     * @see org.xml.sax.XMLReader#getFeature(java.lang.String)      */
//   **********************************************************************************    **********************************************************************************    **************          methods not covered by the new MOP          **************    **********************************************************************************    ********************************************************************************** 
// This is also the cost for a insert 
//  GROOVY-7307 
//  ensure leading '|' is removed 
//  ------------------ double ------------------ 
//  GROOVY-7822 use Set for O(1) performance for contains 
//  type conversions 
//  protected means same class or same package, or subclass 
//  end::jsr223_imports[] 
//  VariableExpressions will stop resolving 
//  swallow for strict security managers, module systems, android or others 
//  check that the provided classnode is a subclass of all provided upper bounds 
//  get the setter method 
/*          * Log some debug information for https://issues.apache.org/jira/browse/GROOVY-861          */
//  $idx<$len? 
//  The pattern used to split the current line 
//  fall through, getErrorReporter().failIfErrors() will trigger 
//  br for setting on the LocalVariableTable in the class file   these fields should probably go to jvm Operand class 
//  Take a permut array, continuously flipping until first element is '1' 
/*  ******** java.time.MonthDay extension methods ********  */
//  Special handling is done for floating point types in order to   handle checking for 0 or NaN values. 
//  not in java   not in java   equiv to f() // not in java 
//  do the same again for an inner inner class 
//  either index >= size or the normalised index is negative 
//  eliminate static 
// add this parameter to node 
//  parser bug 
/*  (non-Javadoc)    * @see org.xml.sax.XMLReader#getFeature(java.lang.String)     */
//  cleanup 
//  skip the final modifier if it's present 
//  there is nothing to be done. 
//  Otherwise let's trust the source to know where it is from.   And actually InputStreamReaderSource doesn't know what to do and so returns null. 
//  place holder to avoid problems with empty catch blocks 
//  --------------------------------------------------   bugs?: spread expressions in closures and GStrings 
//  let's find a main method 
// keep field 
//  for lists, replace list.foo with:   def result = new ArrayList(list.size()) 
//  restore dummy collector target 
//  reference type 
//  all Blocks do know the label, so use all finally blocks 
//  otherwise, find the default constructor 
//  Implementation methods 
//  include original line/col info and source code on the mindmap output 
//  have to lookup registered beans 
//  <2> 
//  GROOVY-8943 
//  subsequent bounds if present can be interfaces 
//  the next items require conversion to int when initializing 
//  if that main method exist, invoke it 
/*  (non-Javadoc)    * @see groovy.lang.GroovyObject#setMetaClass(groovy.lang.MetaClass)     */
//  scope != null means aic, we don't handle that here 
/*      * Methods to allow Date Duration arithmetic      */
//  filter out DGM beans 
//  give value through or unbox 
//  Set up a new array of indexes with the right number of elements   for the new data model. 
//  ------------------------------------------------   deprecate in parser?: 'break' allowed in methods 
//  backslash   line feed   carriage return   tab   form feed 
//  don't delegate to putAll since we want case handling from put 
//     public static Boolean negate(Boolean left) {          return Boolean.valueOf(!left.booleanValue());      } 
//  returns the default charset rather than US-ASCII if the enforce8Bit flag is set. 
//  the description of the property 
//  port to listen on when processing sockets 
//  setMetaClass 
// resolve class names at the end of adding all files to the tree 
/*  (non-Javadoc)     * @see java.lang.Object#equals(java.lang.Object)      */
//  initialize the segment with the complete document so the segment doesn't   have an underlying gap in the buffer 
//  getMetaClass 
//   --------------------------------------------------------                normal method invocation 
//  can't check synchronized here as it doubles up with ACC_SUPER  private static final String EXPECTED_SYNCHRONIZED_CLASS_ERROR_MESSAGE = 
//  reverse Li1 
//  save name before redirect 
//  indexes into strings s and t 
//  if original double meta class 
//  we are not in a tuple, so boxing might be missing for   this single argument call 
//  static star imports 
//  incompatible assignment 
//  GROOVY-5207 So that Closures can see newly added fields   (not super efficient for a very large class with many @Fields but we chose simplicity 
//  Used to keep a hard reference to the References so they are not collected 
/*  ignore  */
//  use name of class for constructor from the class definition 
//  receiver   we operate on GroovyObject if possible 
//  This could be changed to support some hash of the parameter types, etc.   but should distinguish between reordered params while allowing normal   type coercions to be honored 
//  using a comparator of parameters 
//  Read in number of buckets and allocate the bucket array; 
//  use a temporary variable for the arraylist in which the results of the spread call will be stored 
//  new line, so reset unicode escapes 
//  a five-bytes sequence was encountered 
//  } 
//  treat as simple type - probably a String 
/*  We need to chop up this child container.  */
// check for an alias 
//  ignore, leave property expression in place and we'll report later 
/*  ******** java.time.Year extension methods ********  */
/*      * According to section 6.4.1 of the JavaBeans spec this is legal, but not     * good practice.  We need to test what can be done not what should be done      */
//  we are probably looking for a property of the class 
//  $Id: prodcons.java,v 1.1 2004-05-23 07:14:28 bfulgham Exp $   http://www.bagley.org/~doug/shootout/   Producer-Consumer Example by Bill Lear   Adapted from http://java.sun.com/docs/books/tutorial/essential/threads 
// GROOVY-3712 - if it's an MOP method, it's an error as they aren't supposed to exist before ACG is invoked 
//  in this case we need one "this", so a SWAP will exchange   "this" and Object[], a DUP_X1 will then copy the Object[]  / to the last place in the stack:       Object[],this -SWAP-> this,Object[]       this,Object[] -DUP_X1-> Object[],this,Object[] 
//  false part: load false expression and cast to S 
/*          * Bind the default variables.          */
//  Run the script 
//  CLASS METHODS 
//  let's check if one of the operands is the null constant 
//  our last action in the above loop was to rotate vals, so vals[1] now 
//  if in unicode, then we're reading unicode   values in somehow 
/*      * searches for \n or \r     * Returns -1 if not found.      */
//  need to abbreviate this comment for the summary 
//  so we really need to rewrap 
//  retry if wrong list or lost race against concurrent remove 
//  anything other than PropertyExpressions or 
/*  (non-Javadoc)         * @see groovy.lang.Closure#getDelegate()          */
//  every element was the null constant 
//  [1,2,3].each {foo(it)}  <-- Closure 
//     public int canonicalHashCode() { 
//  ensure invariant from <= to 
//  remove the new tags we had to define for this element 
//  Cache closure call methods 
//  variable already declared 
//    SPECIAL (CALCULATED) MEANINGS 
//  always return if the parent loader was successful 
//  skip if there is no such annotation 
//  We lied about our CodeSource and that makes URLClassLoader unhappy. 
//  iterate from the inner most to the outer and check for classes   this check will ignore a .class property, for Example Integer.class will be   a PropertyExpression with the ClassExpression of Integer as objectExpression 
//  Add a penalty against boxing or unboxing, to get a resolution similar to JLS 15.12.2   (http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2). 
//  stack: closure 
//  Add parameter names to the MethodVisitor (jdk8+ only) 
//   --------------------------------------------------------                       Closures    -------------------------------------------------------- 
/*              *  GROOVY-4009: when a normal variable is simply being used, there is no need to try to              *  resolve its type. Variable type resolve should proceed only if the variable is being declared.               */
//  try to find a target 
//  last parameters wrapped in an array 
//  IGNORE 
//   --------------------------------------------------------                  static normal method invocation 
//  deprecated 
//  getInitialExpression above will be null if not in same source unit   so instead set within (static) initializer 
//  update max_flip foreach flipping position 
//  prefer super method if it matches better 
//  tag::precompiled_java_extension[] 
//  import is like "import static foo.Bar.method"   packageName is really class name in this case 
//  reset any out of bounds requests 
//  call() 
//  goto after all-catching block 
//  tag::bsf_access[] 
//             return createGetPropertySite(receiver).getProperty(receiver); 
//  if the bound is not using generics, there's nothing to compare with 
//  non thread-safe iterator 
//  this block does not get a source position, because we don't 
//  and we want to recompile if needed. 
//  with a lower case letter anymore 
//  check if maybe dependency was recompiled, but this one here not 
//  if node text is found to be "super"/"this" when a method call is being processed, it is a  
//  effort to get more logging in case a dependency of a class is loaded   although it shouldn't have 
//  apply configuration customizers if any 
//  if the classnode we compare to is a generics placeholder (like <E>) then we   only need to check that the names are equal 
//  bind redirect method 
//  GROOVY-6061 
//  imports 
/*  (non-Javadoc)         * @see groovy.lang.Writable#writeTo(java.io.Writer)          */
//  index for the next variable on stack 
/*  (non-Javadoc)     * @see groovy.lang.MetaClass#getAttribute(java.lang.Object, java.lang.String)      */
//  replace call to <init>(Map) or <init>(this, Map)   with a call to <init>() or <init>(this) + appropriate setters   for example, foo(x:1, y:2) is replaced with: 
//  cast argument to parameter class, inclusive unboxing   for methods with primitive types 
//  if null, test if wildcard exists 
//  GROOVY-8819 
//  $Id: random.java,v 1.2 2004-08-14 08:19:19 bfulgham Exp $   http://shootout.alioth.debian.org/     Brent Fulgham:  Changed to use 32-bit integers (like the C   version), based on a suggestion by Yonik Seeley. 
//    This element is preceded by CDATA if keepIgnorableWhitespace is false (the default setting) and   it's not whitespace add it to the body   Note that, according to the XML spec, we should preserve the CDATA if it's all whitespace   but for the sort of work I'm doing ignoring the whitespace is preferable   
//  since indy does not give us the runtime types   we produce first a dummy call site, which then changes the target to one,   that does the method selection including the direct call to the   real method. 
//  Note: old closure syntax using LOR is deprecated, and also never creates/visits a LOR node 
//  unpack argument from Object[] 
//  other cases don't need storing, so nothing to be done for them 
//  recur 
//  counter used to generate unique global Script class names 
//  a keyword should be ok 
//  If weighted values are used, then the pending operations will adjust   the size to reflect the correct weight 
// CHECKSTYLE.ON: ConstantNameCheck 
//             String s = (String) newValue; 
//  remove middle of large bits of text 
//  We limit the inner class lookups here by using ConstructedClassWithPackage.   This way only the name will change, the packagePrefix will   not be included in the lookup. The case where the   packagePrefix is really a class is handled elsewhere.   WARNING: This code does not expect a class that has a static            inner class in DEFAULT_IMPORTS 
//  visitComma ...     token type COMMA never created/visited,     see TYPE_ARGUMENTS, ANNOTATION, many others ... 
//  fail dirty, no checks 
//  just check length, MOP will match it up 
//   --------------------------------------------------------                    boxing methods    -------------------------------------------------------- 
// ----------------------------------------------------------------------   generic get method  ---------------------------------------------------------------------- 
//  visit rbrack()     token type RBRACK only used inside parser, never visited/created 
/*  The Great Computer Language Shootout http://shootout.alioth.debian.org/ contributed by Java novice Jarkko Miettinen modified ~3 lines of the original C#-version by Isaac Gouy  */
//  generated proxy using a map to store the closure 
//  It's normally safe to ignore exceptions during cleanup but here if there is   a closed statement in the cache, the cache is possibly corrupted, hence log   at slightly elevated level than similar cases. 
//  run through all our current properties and create MetaProperty objects 
//         getState().clear(); 
//  use 1000000 as offset to avoid conflicts with names from the GroovyShell 
//         SoftDoubleKeyMap.Entry val = (SoftDoubleKeyMap.Entry) assignableMap.getOrPut(klazz, aClass, null); 
/*     public static final int LEFT_SHIFT_EQUAL            = 285;   // <<=    public static final int RIGHT_SHIFT_EQUAL           = 286;   // >>=    public static final int RIGHT_SHIFT_UNSIGNED_EQUAL  = 287;   // >>>=    public static final int BITWISE_OR_EQUAL            = 350;   // |=    public static final int BITWISE_AND_EQUAL           = 351;   // &=    public static final int BITWISE_XOR_EQUAL           = 352;   // ^=    public static final int BITWISE_NEGATION            = REGEX_PATTERN;    // ~     */
//  get the name of the pane (or user name) and the time for the header 
//  check if the next block is over the max allowed 
//  only want to do this once per node... 
//  javax.script.Compilable methods  
// assert 
//  baos.withObjectOutputStream{ it.writeObject(this) } 
//  resolve constant-looking expressions statically (do here as they get transformed away later) 
//  overall used variables for a method/constructor 
//             val.setValue(Boolean.valueOf(klazz.isAssignableFrom(aClass)));          }          return ((Boolean)val.getValue()).booleanValue(); 
/* ignore. */
//  add getter/setter even though setter not strictly needed for final fields 
//  do nothing by default 
//  First we try to get as much information about the declaration 
//  on Windows, "\r\n" is a new line. 
//  no checks on the sun.reflect classes for reflection speed-up   in particular ConstructorAccessorImpl, MethodAccessorImpl, FieldAccessorImpl and SerializationConstructorAccessorImpl   which are generated at runtime by the JDK 
//  for GroovyClassLoader instance 
//  find out the number of gaps to fill with null/the default value 
//  cheat and borrow first param for result as we don't use it anyway 
//  now delete directory itself 
/*  package-private for use in builders  */
/*  for later class resolution  */
/*  = 0  */
//  falls-back on default encoding 
//  ... parse command line arguments 
//  change statement to do assignment only 
//  GROOVY-4415 / GROOVY-4645: check that there's no abstract method which corresponds to this one 
//  write hex string to writer 
//    Ensure the path is ready for the file 
/*  Don't eat EOL chars in sections - as they are valid instruction separators.                 * See https://issues.apache.org/jira/browse/GROOVY-980                  */
//  local is kept as hard reference to avoid garbage collection 
//  From Hacker's Delight, Chapter 3, Harry S. Warren Jr. 
//  insert at beginning so we have the classloader set up before the class is called 
//  first check normal number of parameters 
//  a proxy is supposed to be a concrete class, so it cannot extend an interface.   If the provided superclass is an interface, then we replace the superclass with Object 
// TODO: other cases 
//  generate a new method 
//  Same as "0.0". 
/* int[8] */
//  only print out if we are being used for template generation 
//  compare against the field but call isXXXExpression() instead. 
//  {@link processing hack} 
//  The String from which we produce Readers. 
/*      * Intercepts a getXXX call and returns a result. The result is replaced by the     * real value if doGet() return false     *     * @param object   The target object     * @param property The property to get     * @return A value supplied by the interceptor      */
//  next we get the block parameter types and set the generics   information just like before 
//  advance to first entry 
//  Read the keys and values, and put the mappings in the table 
//  already handling verbose but pass on too 
//  we have C[*:map] -> should become (C) map 
//  start finally 
//     Visibility field() default Visibility.UNDEFINED; 
//  at least '$' is consumed ... read next chars. 
//  log(" = " + made); 
//  Opening of files and such   Lexing, parsing, and AST building   CST to AST conversion   AST semantic analysis and elucidation   AST completion   Class generation, phase 1   Class generation, phase 2   Output of class to disk   Cleanup   Synonym for full compilation 
// ---------------------------------------------------------------------------   STRING CONVERSION 
//  attempt builder resolution 
//  as groovy AST doesn't expect to have them 
//  if the meta class call fails we may still want to fall back to call   GroovyObject#invokeMethod if the receiver is a GroovyObject 
//  keys to list of invocation times and before and after 
//  GROOVY-4035  
//  falls through 
//  If the namespace has been used in the parse document use that tag 
//  GROOVY-5961 
//  targetTypes String, Enum and Class are handled    by the compiler already 
//  see: http://ant.apache.org/ivy/history/latest-milestone/textual.html 
//  top might be primitive, target is not   so let invocation writer box if needed and do groovy cast otherwise 
//  Coerce the file URL to a File 
//  visitEof ...     token type EOF never visited/created 
//  is one of the arguments a closure? 
//  Early return to avoid macro context and arguments creation 
/*  (non-Javadoc)      * @see groovy.lang.GroovyObject#invokeMethod(java.lang.String, java.lang.Object)       */
// ---------------------------------------------                    char  --------------------------------------------- 
//  Parse the script, generate the class, and invoke the main method.  This is a little looser than 
//  parameter, in case of an extension method we must not.  
//         }          return (Byte) primitiveArrayPut(array, idx, newValue);      }        public static Character putAt(char[] array, int idx, Object newValue) { 
//  3 operands, the array, the index and the value! 
/*         Start off at the apparently correct bin.  If entry is found, we       need to check after a barrier anyway.  If not found, we need a       barrier to check if we are actually in right bin. So either       way, we encounter only one barrier unless we need to retry.       And we only need to fully synchronize if there have been       concurrent modifications.     */
//  so we can create the curried closure 
//  Source file encoding 
//  remove local variable 
//  !=   ===   !==   ==   <   <=   >   >=   <=> 
//  in groovy, methods and classes are assumed public, unless informed otherwise 
//  Because we can not rely on 3rd party library(excluding antlr, asm), we have to implement our own utils such as the `inverse` method...   Actually `BiMap` of Guava and `BidiMap` of commons-collections are both suitable for this scenario. 
//  annotation closure; replaced with this specific class literal to cover the   case where annotation type uses Class<? extends Closure> for the closure's type 
//                     element = new MetaBeanProperty(mp.getName(), mp.getType(), mp.getGetter(), null);                  } 
// toURI().toURL() will encode, but toURL() will not. 
//  GROOVY-4973: Range made-up of from: Integer and to: Long should have 'from' promoted to type Long. 
//    Then set in the element. 
//  if left type is not a list but right type is a list, then we're in the case of a groovy   constructor type : Dimension d = [100,200]   In that case, more checks can be performed 
/* !isAttributeExpression &&  */
//  validate with closures 
//  GROOVY-5150 : Initialize value with a dummy constant so that Java cross compiles correctly 
//  ex: Comparable<Integer> <=> Comparable<? super T> 
//  mark a ml run 
//    Sort the parameters out 
//  ... try piece in puzzle 
//  VARBINARY() and other methods were assumed to be Constructors, make sure they aren't anymore... 
// LOGME 
//  FF   FE 
//  superCallArguments = arguments for the super call == the constructor call arguments 
/*  The next File object we'll iterate over  */
//  visitLiteralClass ...     token type "class" only used by parser, never visited/created directly 
//  we need later an array to store the curried   closures, so we create it here and ave it 
/*  The Computer Language Shootout   http://shootout.alioth.debian.org/   contributed by Mark C. Lewis */
//  Indexes to retrieve field and method information 
//  both have generics 
//  could be changed into do..while, but then   we might create an additional StringBuilder 
//  then we use the remaining information to refine the given generics 
//  ")", ","   "]", ","   "implements", "throws", "{", ","   identifier, "[", "." 
//  making this false helps find matches 
//  different parsing without leading keyword 
//  add curried versions 
//  the following fields are closures executed in event-based methods 
//  create array initialization methods 
//  result 
//  found a source, compile it if newer 
//  ok, found one static method 
//  don't worry about the bind state, if the binding   is completed we will bind in rebuild 
//  jth object of t 
//  if the method was not found in the current scope (the script's methods)   let's try to see if there's a method closure with the same name in the binding 
//  create exception variable and store the exception 
//  generic array to array conversion 
//  form as it is closure shared 
//  Since we use the data: scheme for StringReaderSources (which are fairly common) 
//  template declaring its expected types from model directly   modelTypes = {    List<String> items    ...   } 
//  not java, try groovy instead :-) 
//     public GroovySerialFieldTag[] serialFieldTags() {/*todo*/return null;} 
//  built in namespace   pseudo namespace for markup keywords 
//  we maybe can't fix a synthetic field 
//  prepare fields 
//  the start and end indices of a match in the Matcher looking 
//  get array element 
//  primitive type 
//  exception was thrown or we get wrong class 
//  it's a script 
//  if the match was multiline, which we'll know if they span   multiple paragraph elements, the mark it (this list was cleaned 
//  there must be five continuation bytes of the form 10xxxxxx,   otherwise the following character is is not a valid UTF-8 construct 
// TODO: use pre-generated Object[] 
//  subsequent steps will bomb out but try to give some more friendly information first 
//  here we handle a.b++ and a++ 
// StyleConstants. 
//  visitOneNl     new lines are used by parser, but are not created on the AST,     they can be implied by the source code line/column information 
//    Level helpers   
//  GROOVY-3726: clear volatile, transient modifiers so that they don't get applied to methods 
//  both classes do not represent interfaces 
//  expect just one scope to be set on the way in but now also set higher levels of visibility 
//  add property setter 
//  if there is a user-defined methodNode, add compiler error msg and continue 
/*  (non-Javadoc)    * @see groovy.lang.GroovyObject#invokeMethod(java.lang.String, java.lang.Object)     */
//  end::jsr223_variables[] 
// params.length < args.length   we depend on the method selection having done a good    job before already, so the only case for this here is, that   all trailing arguments belong into the vargs array 
//  we're using a copy here because new extensions can be added during the "setup" phase 
//                 declarations.add((DeclarationExpression) expr); 
//  a six-bytes sequence was encountered 
//  printModifiers(out, constructorNode.getModifiers()); 
//  We don't copy DGM methods to superclasses' indexes   The reason we can do that is particular set of DGM methods in use,   if at some point we will define DGM method for some Groovy class or   for a class derived from such, we will need to revise this condition.   It saves us a lot of space and some noticeable time 
//  in the script 
/*                  *  GROOVY-4585                 *  Handle backslash characters.                  */
//  end::bsf_variable_passing[] 
//  char c = (char) ... 
// ---------------------------------------------------------------------------   FACTORY METHODS 
//  skip values() method and valueOf(String) 
//  on the inner class node itself, private/protected are not allowed 
//  if we reach this point, this means the interface is new 
//  standard chooser for cases if it is not a single method and if it is   not the standard closure. 
//  we are not at the end of the buffer 
//  load receiver if not static invocation   todo: fix inner class case 
// TODO: add support for super here too 
//  verify component type 
//  for methodMissing, first parameter should be String type - to allow overriding of this method without   type String explicitly specified for first parameter (missing method name) - GROOVY-2951 
//  for each method defined in the class, generate the appropriate delegation bytecode 
//  tag::bsf_apply[] 
//  value can be an object, an array, a number, string, boolean or null values 
//  to reach path which is equal to both paths 
//  Template not cached or the source file changed - compile new template! 
//  none if the direct interfaces match, but we must check "upper" in the hierarchy 
//  create valueOf 
//   --------------------------------------------------------                     exception handling 
//  new let's strip everything up to and including the path separators 
/* BigInteger[12] */
//  Singleton 
//  TODO read mixins 
//  which is a really nice way of seeing the AST, folding nodes etc 
//  T extends Object should just be printed as T 
//  DO NOTHING 
// extract the field name 
//  Script.class, 
//  look for one of these:     import static MyClass.setProp [as setOtherProp]     import static MyClass.getProp [as getOtherProp] 
//  ignore methods, that are not abstract and from Object 
//  some methods to avoid binary incompatibility - don't gain us a lot but gives the user 
//  nothing to do 
// restoring line breaks is important b/c of lack of semicolons 
//  translate offsets to lines 
//  stop at super and this 
//  simple (for now) decision on java or groovy   java 
//  add namedValues 
//  we trick ourselves here 
//  ignore, the constructor that takes a Collection as an argument may not exist 
//  Invoke each task in the right order 
//  A.super.foo = ... 
//  now the finally only case but only if no catches 
//  object already has per instance meta class 
//  Get the current context classloader and save it on the stack 
//  perform additional type checking on arguments 
// ---------------------------------------------------------------------------   TOKEN FACTORIES 
//  full match 
//  check if a getAt method can be found on the receiver 
//  Boolean based methods  ------------------------------------------------------------------------- 
//  prefer class if no recompilation 
//  Those member should stay protected so that subclasses may use different   cache keys as the ones used by this implementation 
//  static alias only for inner classes and must be at end of chain 
//  ranges don't contain other ranges 
//  second, we must ensure that this method MUST be statically checked   for example, in a mixed mode where only some methods are statically checked   we must not visit a method which used dynamic dispatch.   We do not check for an annotation because some other AST transformations 
//  ----------------------- 
//  GROOVY-7300 
//  continue normal tree walking 
//  a negative index will count backwards from the last column. 
//  if string length is odd then throw exception 
//  case of +=, -=, /=, ... 
//  jump to test the condition again 
// this means we have received a double backslash sequence  if this is followed by ${ or <% we output one backslash  and interpret the following sequences with groovy, if followed by anything  else we output the two backslashes and continue as usual  
//  it's a static extension method 
//  For use by verify(). 
//  this may happen under Windows because getResource is case insensitive under that OS! 
/*  (non-Javadoc)         * @see groovy.lang.Closure#getParameterTypes()          */
// LOGME ignore the failure 
//  perhaps it's a meta-annotation, e.g. jqwik @Example is annotated with @Property 
//  The scheduler for cooperative Multithreading 
//  or if there is already a @MapConstructor annotation 
//  new value is already on stack, so nothing to do here 
//  should never happen 
//  then it is the common super type 
//  add missing method dispatcher 
//  statements 
//   PLUS        200    MINUS       201    MULTIPLY    202    DIV         203    INTDIV      204    MOD         203 
//  wrap up 
//  If set, a reader on the current source file   The last line read from the current source file   The last line number read 
//  let's add a typesafe call method 
//  constructor 
//  visitEmptyStat ...     token type EMPTY_STAT obsolete and should be removed, never visited/created 
//  Cannot add static compilation of init method because of GROOVY-7217, see example 2 of test case  AnnotationNode an = new AnnotationNode(TraitComposer.COMPILESTATIC_CLASSNODE);  initializer.addAnnotation(an);  cNode.addTransform(StaticCompileTransformation.class, an); 
//  SAM = single public abstract method   if the class is not abstract there is no abstract method 
//  This handles byte, short, char and int 
// ---------------------------------------------------------------------------   CONSTRUCTION AND DATA ACCESS 
//   --------------------------------------------------------                       type conversion    -------------------------------------------------------- 
//  the owner of the property 
//  create constructor with a nested class as the first parameter, creating one if necessary 
//  tabs with spaces (I hate tabs) 
//  ret contains the type specs, what we now need is the type spec for the   current class. To get that we first apply the type parameters to the   current class and then use the type names of the current class to reset   the map. Example:     class A<V,W,X>{}     class B<T extends Number> extends A<T,Long,String> {}   first we have:    T->Number   we apply it to A<T,Long,String> -> A<Number,Long,String>   resulting in:     V->Number,W->Long,X->String 
//  try to find a static one 
//  Low surrogate 
//  the following fields are only used internally; there are no user-defined expressions of the same kind 
//  super class causing bridge methods for abstract methods in original class 
//  assume underscore variables are for the wrapper script 
//  Void.TYPE,   Closure.class,   GString.class,   List.class,   Map.class,   Range.class,  Pattern.class, 
//  That means if the current class is not an InnerClassNode 
//  FileScanner is a Groovy utility 
//  |   ||   |   &   ^ 
//  call the script global function of the given name 
//  in master list of other phases and keep processing them for this phase. 
//  Return flipping times 
//  can't check volatile here as it doubles up with bridge 
//  to select the constructor we need also the number of   available constructors and the class we want to make 
//  use last one if we stored a character 
//  For compatibility, ignore exceptions from getInputStream() call 
/*  unhandled types from from org.codehaus.groovy.syntax.Types    public static final int LOGICAL_OR                  = 162;   // ||    public static final int LOGICAL_AND                 = 164;   // &&    public static final int DIVIDE                      = 203;   // /    public static final int STAR_STAR                   = 206;   // **    public static final int POWER                       = STAR_STAR;   //        public static final int PLUS_EQUAL                  = 210;   // +=    public static final int MINUS_EQUAL                 = 211;   // -=    public static final int MULTIPLY_EQUAL              = 212;   // *=    public static final int DIVIDE_EQUAL                = 213;   // /=    public static final int INTDIV_EQUAL                = 214;   // \=    public static final int MOD_EQUAL                   = 215;   // %=    public static final int POWER_EQUAL                 = 216;   // **=    public static final int PLUS_PLUS                   = 250;   // ++    public static final int PREFIX_PLUS_PLUS            = 251;   // ++    public static final int POSTFIX_PLUS_PLUS           = 252;   // ++    public static final int PREFIX_PLUS                 = 253;   // +    public static final int MINUS_MINUS                 = 260;   // --    public static final int PREFIX_MINUS_MINUS          = 261;   // --    public static final int POSTFIX_MINUS_MINUS         = 262;   // --    public static final int PREFIX_MINUS                = 263;   // - (negation) */
//  print warnings if any 
//  also takes care of both \ and / depending on the host compiling environment 
//         Script script = new GroovyShell().parse(new File("src/test/groovy/xml/dom/NamespaceDOMTest.groovy"));  //        GroovyObject object = compile("src/test/groovy/xml/dom/NamespaceDOMTest.groovy");          script.invokeMethod("testXsdSchemaWithBuilderHavingAutoPrefix", null);      } 
//             int hashCode = 1; 
/*          * If no specific super class has been found and type fallback is an interface, check if all arg classes          * implement it. If yes, then that interface is the common type across arguments.          */
//  GROOVY-9049: EncodingGroovyMethods.digest() truncates hashes over 128 bits starting with 0's 
/*  (non-Javadoc)         * @see java.lang.Object#clone()          */
//  bind forward method 
//  wait for the threads to finish 
//  initialize resolver 
//  let custom factories be resolved first 
// toString == pattern 
//  Unexpected node type: a numeric literal found when expecting type: an identifier   fails after parser 
//  first visit 
//  no default value 
/*      * Classes but not interfaces should have ACC_SUPER set     * See http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.6-300-D.2-5     * for what flags are allowed depending on the fact we are writing the inner class table     * or the class itself      */
//  Construct a simplistic key to support overloaded operations on the MBean. 
//         final Class[] argClasses = MetaClassHelper.convertToTypeArray(arguments);            unwrap(arguments); 
//  chain secondary exception 
//  we are at the first name part. This is the right most part.   If this part is in lower case, then we do not need a class   check. other parts of the property expression will be tested   by a different method call to this method, so foo.Bar.bar   can still be resolved to the class foo.Bar and the static   field bar. 
//  another instanceOf_not was before, no need store vars 
//  AST transformations state data 
/*  duplicated with DateUtilExtensions utility method but we don't want the modules to depend on one another  */
//  For statement contains unexpected tokens. Possible attempt to use unsupported Java-style for loop. 
//  should not use a static variable because of possible changes to node metadata   which would be visible to other compilation units 
//  this should never ever happen while writing to a StringBuilderWriter 
//  GROOVY-4004: Clear the methods from the outer class so that they don't get duplicated in inner ones 
//  important for GROOVY-4344 
//  a 0-length type argument list means we face the diamond operator 
//  next entry to return   current slot 
//  GROOVY-5114 : if we have to choose between two methods   foo(Object[]) and foo(Object) and that the argument is an array type 
/*  = false  */
//  ignore the missing method exception   as it means no end() method is present 
//  Find either next array element or end of array while ignoring comments 
//  We need to guarantee that any existing reads of old Map can   proceed. So we cannot yet null out each bin. 
//  GROOVY-6590: wrap primitive types 
//  if there are no groovy statements between the enclosing Groovy tags   then read groovy statements in from a text file using the src attribute 
//  we must use the redirect node, otherwise InnerClassNode would not have the "correct" type 
// WE USE THIS AS REUSABLE         
//  force Object super class 
//  define "owning" task as wrapper to avoid having tasks added to the target   but it needs to be an UnknownElement and no access is available from   task to its original UnknownElement  
//  simulate "Hello ${user}!" 
//  loop end 
//  execute fold: 
//  visitLiteralExtends     token type "extends" only used by parser, never visited/created directly 
//  invokes the super class constructor 
// todo: this should parse... assertEquals("private static <T> void foo(List<T> list){}", pretty("private static <T> void foo(List<T> list){}")); 
//  no exception info for Groovy MetaMethods 
//  so the only possible return type is Object 
//  visit rcurly()     token type RCURLY only used inside parser, never visited/created 
//  The AST node metadata has the flag that indicates that this method is a script body.   It may also be carrying data for other AST transforms. 
//  with the receiver type of the with method 
// GROOVY-4508 
//  if assignment succeeds but result type is not a subtype of original type, then we are in a special cast handling   and we must update the result type 
//  this case always succeeds the result is a Matcher 
//  first, collect closure shared variables and reinitialize types 
//  Groovy runtime without circumventing JVM access checks (see CachedMethod for example). 
/* boolean[0] */
//  cache no-arg constructor 
//  abort if explicit false found 
//  for x[a] += b we have the structure:     x = left(left(binExp))), b = right(binExp), a = right(left(binExp)))   for array set we need these values on stack: array, index, right    for array get we need these values on stack: array, index   to eval the expression we need x[a] = x[a]+b   -> arraySet(x,a, x[a]+b)    -> arraySet(x,a, arrayGet(x,a,b))   --> x,a, x,a, b as operands   --> load x, load a, DUP2, call arrayGet, load b, call operation,call arraySet   since we cannot DUP2 here easily we will save the subscript and DUP x   --> sub=a, load x, DUP, load sub, call arrayGet, load b, call operation, load sub, call arraySet 
// ----------------------------------------------------------------------   executing the getter method  ---------------------------------------------------------------------- 
//  load Expressions 
//  calculate 
//  getResourceConnection() opening the inputstream, let's ensure all streams are closed 
//  check if no superclass is defined 
//  FE   FF 
// the below being true indicates that we had an unterminated ${ or <% sequence and  the column is thus meaningless, we reset it to where the %{ or <% starts to at 
/*  will do  */
//  retain legacy field (will be given lower precedence than above) 
//  no element, so use emptyDefault 
//  let's see if we get a deadlock 
//  into something that can exist in the callsite context 
//  if left expression is a closure shared variable, we should check it twice   see GROOVY-5874 
//  let's look for methods with 1 argument which matches the type of the   arguments 
/*          *  Damage must be overridden whenever the paint method is overridden         *  (The damaged area is the area the caret is painted in. We must         *  consider the area for the default caret and this caret)          */
//  The original code converted to decimal string this way: 
//  For a placeholder, a type based on the generics type is used for the compatibility check, to match on   the actual bounds and not the name of the placeholder. 
//  handle interfaces 
//  if there isn't any argument, we can make invocation faster using the cached constructor 
/*  if the map is null, then we create it.  */
//  declared beans should just be available 
/*  (non-Javadoc)    * @see groovy.lang.MetaClass#getProperties()     */
//  the method which has been chosen is supposed to be a call on delegate or owner   so we store the information so that the static compiler may reuse it 
//  tag::jsr223_init[] 
//  determine composite result 
/*       * Parse the script contained in the GroovyCodeSource as a privileged operation (i.e. do not      * require the code source to have specific compile time permissions).  If the class produced is a      * TestCase, run the test in a suite and evaluate against the missingPermission.      * Otherwise, run the class as a groovy script and evaluate against the missingPermission.       */
//  visitFloatSuffix ... never visited/created see NUM_DOUBLE or NUM_FLOAT instead 
//             CachedMethod cachedMethod = methods[i]; 
//  set other optimizations options to false here 
//  visit receiver 
/*  ******** java.time.Duration extension methods ********  */
//  workaround for GROOVY-6834: accessing a parameter which is not yet seen in scope 
//  to keep stack height put a null on stack 
//  if expr is of READONLY_PROPERTY_RETURN type, then it means we are on a missing property 
//  null indicates a static method which may still need generics correction 
//  in case of null safe invocation, it is possible that what was supposed to be a primitive type   becomes the "null" constant, so we need to recheck 
//  if you are compiling the script because the JVM isn't executing the main method. 
//  GROOVY-6771 
//  we have two options:   (1) embed initExpr within holder class but redirect field access/method calls to declaring class members   (2) keep initExpr within a declaring class method that is only called by the holder class   currently we have gone with (2) for simplicity with only a slight memory footprint increase in the declaring class 
//  in the future the target will be wider than annotations, but for now it is just on annotations 
/*  dist binary layout:    * 0-20: interface    * 21-22: primitive dist    * 23-43: object dist    * 44-48: vargs penalty     */
//  Must now be three more hex digits 
//  empty text 
//  helpful error? 
//  load this   load delegate   using InvokerHelper to allow potential intercepted calls 
//  multi-assignment 
//               CompileThread.addMethod(this);          } 
//  end ConsoleTextEditor.PrintAction 
//  override exists in the weaved class itself 
//  not a primitive type, so call booleanUnbox 
/*  *** Not used, yet. See comments in getScriptUri(HttpServletRequest). ***     * Servlet API include key name: request_uri      */
//  chop off the single quotes at start and end 
//  GROOVY-2156 
//  return bais.withObjectInputStream(getClass().classLoader){ (<type>) it.readObject() } 
//  defaults to left 
//  and we can't find it 
//  Compute the appropriate capacity 
//  a default value exists, we can skip this param 
// GROOVY-4285 
// cv.visitMethodInsn(INVOKESPECIAL, innerClassinternalName, "<init>", prototype + ")V"); 
//  all parameters of a method 
// check the script is currently valid before starting a server against the script 
//  GroovyObject interface 
//  testForInit() covered by testForCondition() 
//         }      } 
//  we load the array and create a list from it 
//  but visible as the surrounding class is imported and the inner class is public/protected static 
//  adjust for multiple levels of nesting if needed 
//  append ending SQL after last param. 
//  if something has been evicted, do a clean-up 
/*                  * GROOVY-3161: initialize statements for explicitly declared static fields                 * inside an enum should come after enum values are initialized                  */
/*  less than space is a control char  */
// ----------------------------------------------------------------------   listener method 
//  add all classpaths that compilation unit sees 
//    Requested script/template file has not been the target of a    RequestDispatcher.include(). Reconstruct its path from the request's   getServletPath() and getPathInfo() results. 
//       (     )     *     +     ,     -     .     / 
/*          * Some drivers (Oracle classes12.zip) have difficulty resolving data         * type if setObject(null). We will modify the query to pass 'null', 'is         * null', and 'is not null'          */
//  if original Integer meta class 
//  gather and sort all unvisited AST nodes 
//  current label for continue 
//  avoid different case keys being added by explicit remove 
//  GROOVY-8090 handle generics varargs, e.g. `U x = ...; Arrays.asList(x)`   we should connect the type of vararg(e.g. T is the type of T...) to the argument type 
//  true && false   a < b   this.&foo()    4 % 3   1 - 1   foo?.bar 
//  core access scope modifiers 
//  we know here that from!=to, so a distance of 0 is never valid   get primitive type indexes 
//  if origBoolean and withoutCustomHandle 
//  if the file is in UTF-8, high order bytes must have a certain value, in order to be valid 
//  package-level visibility for testing purposes (just usage/errors at this stage) 
//  BigInteger conversion is done by using the string representation 
//  ignore, we'll throw e1 
//  in case we are not in a constructor we have an additional   object on the stack, the result of our constructor call   which we want to keep, so we swap with the dummy object and   do normal removal of it. In the end, the call result will be   on the stack then 
//  consume argument 
//  Will store already created indents. 
//  change path representation to something more system independent. 
//  br using l2 as the 2nd param seems create the right table entry 
//  Simple getter 
//  handle different states for being on the left hand side 
//  Check for a single minus now, rather than finding out later during lazy parsing. 
//  check whether closure shared variables refer to params with default values (GROOVY-5632) 
//  ex : def foos = ['a','b','c'] 
//  call(Object) 
//  set owner null here, it will be updated by addField 
//  GROOVY-6112 : also copy acceptable Groovy transforms 
//  Style names 
//  Indexes to retrieve Class Property information 
//  another special case here, where the bound is a "virtual" type   we must then check the superclass and the interfaces 
//  int on stack 
// site 
/* Short[5] */
//  end of file   the unknown token 
//  no jump, so -1, need to pop off surplus II 
//     public GroovyParamTag[] paramTags() {/*todo*/return null;} 
//  <<=   >>=   >>>= 
//  extract the generics from the return type 
/*      further operations to be handled here maybe:    a / b a.div(b) (if one is double, return double, otherwise BD)    a[b]    a.getAt(b)    a[b] = c    a.putAt(b, c)     */
//  possible getter/setter? 
//  boolean getter 
//  swallow and do as if no method is available 
//  no array so wrap it 
//  ||=   &&= 
/*  KeyStroke keyStroke =  */
//     public final Object callGetProperty (Object receiver) throws Throwable { 
//  GROOVY-1262 
/*          * Handle empty elements like '<br/>', '<img/> or '<hr noshade="noshade"/>.          */
//  special guards for receiver 
//  check if there's a potential better match 
//  Set the context classloader back to what it was.  AccessController.doPrivileged(new DoSetContext(currentClassLoader)); 
//  recurse on them 
//  Do not use HashSet 
//  Copy the column values into a list of a list. 
//  ... generate list 
//  let's try getting the property on the first object 
//  look first for field with encoded modifier information 
//  any of those otherwise 
//  or Class typed variable 
// noinspection GroovyConditionalCanBeElvis 
//  The rewrite we do is causing some troubles with type checking, which will   not be able to perform closure parameter type inference   so we store the replacement, which will be done *after* type checking. 
//  check for local synthetics 
//  visitNls     new lines are used by parser, but are not created on the AST,     they can be implied by the source code line/column information 
//  reflective proxy generation, since we need a ConvertedClosure but have only a normal Closure, we need to create that wrapper object as well 
//  since there is no saving 
// isSetter 
//  remove surplus values 
//  Initialise with the identity mapping. 
//  In case of getting a ConstructedClassWithPackage here we do not do checks for partial   matches with imported classes. The ConstructedClassWithPackage is already a constructed 
//  try to continue even in case of error 
//  translate the graphics object back to reality in the y dimension 
//  visitColon ...     token type COLON never created/visited, see LABELED_STAT, FOR_IN_ITERABLE,      ASSERT, CASE, QUESTION, MAP_CONSTRUCTOR, LABELED_ARG, SPREAD_MAP_ARG 
//  there are three case for vargs   (1) varg part is left out (there's one less argument than there are parameters)   (2) last argument is put in the vargs array 
// The calls below require access to user.dir - allow here since getName() and getCodeSource() are 
//  @DelegatesTo.Target Obj foo 
//  no need to keep any of those on the operand stack   after this expression is processed, the operand stack 
/*  (non-Javadoc)    * @see groovy.lang.MetaClass#addNewInstanceMethod(java.lang.reflect.Method)     */
/*  The values stored in the map.  */
/*  (non-Javadoc)        * @see java.io.Writer#close()         */
/*  The iterator over the FileSet objects  */
//  iterate over all interfaces to check if any corresponds to the bound we are   comparing to 
//  todo : other cases 
//  may happen if generic type is Foo<T extends Foo> and classnode is Foo -> Foo 
//         assertEquals("with (myObject) {x = 1}", pretty("with(myObject) {x = 1}")); // fails after parser // not in java      } 
//  visit init 
//  else IGNORE 
//  normalise index again to get positive index 
//  found an existing static method that is going to conflict with interface 
//  ignore, taken care of in debug 
//  do not mix Class<Foo> with Foo 
//  now work on the buffer(s) 
//  ------------------------------   class visit   ------------------------------ 
//  magic number, much greater than current number of java tokens 
//  could be security, io, etc.  Ignore it.   End result is as if .exists() returned null 
//             System.err.println("e.getMessage() = " + e.getMessage()); 
//  make sure a new list is returned each time 
//  invokes the specified method/function on the given object. 
//  TODO : Parse pattern compile flags (literal names). 
//  stores the current binary expression. This is used when assignments are made with a null object, for type 
//  enforce yield, so we have something to interrupt 
//  the following code will basically do this:   Map<String,Closure> impl = Collections.singletonMap(method.getName(),arg);   return ProxyGenerator.INSTANCE.instantiateAggregate(impl,Collections.singletonList(clazz));   TO_SAMTRAIT_PROXY is a handle (Object,Object,ProxyGenerator,Class)GroovyObject   where the second object is the input closure, everything else   needs to be provide and is in remaining order: method name,   ProxyGenerator.INSTANCE and singletonList(parameter) 
//  case A   we give a penalty for vargs, since we have no direct   match for the last argument 
//  let's create a new expression 
/*                 * We override the MetaClass of this script object so that we can                * forward calls to global closures (of previous or future "eval" calls)                * This gives the illusion of working on the same "global" scope.                 */
//  to do this we first bind the values to #setBeanProperties 
//  reuse the full list of fields 
//  the casese true and null for a match are through, the   remaining case is false and that means adding the method 
//  @Blue(foo=123)   a = b   a &= b   a |= b   a >>>= b   a ^= b   a <=> b   a /= b   a == b   a -= b   a %= b   a != b   a += b   a =~ b   a ==~ b   a <<= b   a >>= b   a *= b   x **= 3 
//  class only used to store setter information when an expression of type 
/*      * Cached unmodifiable List used for iteration. Any method that mutates     * the runnerMap must set to null to invalidate the cache. Volatile is     * used because reads for DCL are faster than a lock/unlock.     * The values are cached in order to speed up iteration and avoid     * allocation of new collections on each call to the iterator.      */
//  a.x = foo or x=foo is found and that it corresponds to a setter call 
//  check if constructor call expression makes use of the diamond operator 
/* , ElementType.IMPORT */
//  we have handle that takes no arguments to create the bean,    we have to use its return value to call #setBeanProperties with it   and the meta class. 
//  8k 
//  change (receiver,callsite) to (callsite,receiver) 
//  They'll get empty args since none exist in the context. 
//  Primitive type array methods  ------------------------------------------------------------------------- 
//  Closure 
//  If there are no bounds, the generic type is basically Object, and everything is compatible. 
/*  FALL THROUGH  */
//  override standard engine with caching one 
//  does not specify ast transform class names or classes 
//  At this point we know that we have a match for pname. This may   mean, that name[pname.length()..<-1] is a static inner class.   For this the rest of the name does not need any dots in its name.   It is either completely a inner static class or it is not.   Since we do not want to have useless lookups we create the name   completely and use a ConstructedClassWithPackage to prevent lookups against the package. 
/*  (non-Javadoc)     * @see groovy.lang.MetaClass#getMetaMethods()      */
//  parent will care about when children perform 
//  <<   >>   >>> 
//  Simplify common case of {expr} to expr. 
//  we have here different generics contexts we have to deal with.   There is firstly the context given through the class, and the method.   The method context may hide generics given through the class, but use  
//  here we must check if the right number is short enough to fit in the left type 
//  treat the case Ant is run through Maven, and 
/*      * Worker method for the {@link #escapeJavaScript(String)} method.     *      * @param out writer to receive the escaped string     * @param str String to escape values in, may be null     * @param escapeSingleQuote escapes single quotes if <code>true</code>     * @param escapeForwardSlash TODO     * @throws IOException if an IOException occurs      */
// ---------------------------------------------------------------------------   ACTIONS 
//  boolean->boolean, Boolean->boolean, boolean->Boolean   is handled by compiler   that leaves (T)Z and (T)Boolean, where T is the static type   but runtime type of T might be Boolean 
//      that case is handled above already when params and args have the same length 
//  TODO: pass printstream(s) down through process 
//  verify imports 
/*  The Computer Language Benchmarks Game   http://shootout.alioth.debian.org/   contributed by Stefan Krause   slightly modified by Chad Whipkey */
//  handle body 
//  GROOVY-6521: must set strategy to DELEGATE_FIRST, otherwise writing   books = 'foo' in a template would store 'books' in the binding of the template script itself ("script")   instead of storing it in the delegate, which is a Binding too 
//  we need to remove the leading "{" and trailing "}" 
//  parsing 
//  GROOVY-7812(#1): Static inner classes cannot be accessed from other files when running by 'groovy' command   if the type to resolve is an inner class and it is in an outer class which is not resolved,   we set the resolved type to a placeholder class node, i.e. a ConstructedOuterNestedClass instance 
//  create unit vector 
//  We need to get the input stream and close it to force the open   file descriptor to be released. Otherwise, we will reach the limit   for number of files open at one time. 
//  these are packages in the call stack that are only part of the groovy MOP 
//  apply the verifier to have the property nodes generated 
// Void.class, 
//  Quick method for scalars. 
//  safe is not necessary here because "super" is always not null   but keeping the flag would trigger a VerifyError (see GROOVY-6045) 
//  launch threads, each one instantiating the scriptClass and running   it numIter times 
// TODO: set sender class 
//  add inferred type information 
/*  3: double  */
//  Unexpected node type: '.' found when expecting type: an identifier   fails after parser 
//  check that a setter also exists 
//  add static property missing setter dispatcher 
//    SPECIAL TOKENS 
//  methods from GroovyClassDoc 
//  mop methods are helper for this and super calls and do direct calls 
//  start a block catching any Exception 
//  assume closures have only 1 constructor, of the form (Object, Reference*) 
//  Multiply by 127 (quickly, via shifts), and mix in some high   bits to help guard against bunching of codes that are   consecutive or equally spaced. 
//  false is default, so something to do only in true case 
//  unicode now contains the four hex digits   which represents our unicode character 
//  visit semi()    SEMI only used inside parser, never visited/created (see visitForCondition(), visitForIterator()) 
//  8K 
//  Clone all remaining nodes 
//  length of s   length of t 
//  TODO: set sender class 
//  GROOVY-6021 
//  this is a corner case, you should not   compare two class nodes if one of them is null 
//  set the properties  noinspection unchecked 
//         }          return (Double) primitiveArrayPut(array, idx, newValue);      } 
//  all arg classes implement interface fallback, so use that as the array component type 
//  --> results in XOR 
//  args will be replaced 
//  --------------------- 
//  The mapping only affects the contents of the data rows.   Pass all requests to these rows through the mapping array: "indexes". 
//  generic fallback to castToType 
//  remove each individual item from left side of Li2 and 
//    Create the file and write out the data 
//  allow any internal number that is not a floating point one 
//  reading the content of the file within a char buffer   allow to keep the correct line endings 
//  since Groovy 2.2, it is possible to use FQCN for type checking extension scripts 
//  static inner classes don't need this$0 
//         }          return (Short) primitiveArrayPut(array, idx, newValue);      }        public static Integer putAt(int[] array, int idx, Object newValue) { 
//  GROOVY-7333: filter out Object 
/* byte[2] */
//  If the source is already open and is passed the line we   want, close it. 
//  nothing else to do here 
// remove the leading / as we are trying with a leading / now 
//     private MethodVisitor mv; 
//  same class is always allowed access 
//  recalculate in case we have already done some stripping 
//  visitForEachClause ...      FOR_EACH_CLAUSE obsolete and should be removed, never visited/created 
//  will take care of the rest 
//  check upper bound(s) 
// expect to get the elementType 
//  GROOVY-8002: propagate position to (possibly new) method expression 
/*  The Great Computer Language Shootout   http://shootout.alioth.debian.org/   contributed by Jarkko Miettinen */
//  cost 
//  let's create a default 'it' parameter 
//  we are in a case of a type inference failure, probably because code was generated   it is better to avoid using this 
//  Check for each property 
//  first, fetch the constructor taking String[] as parameter 
// mv.visitInsn(ACONST_NULL);  stack.replace(OBJECT_TYPE); 
//  do call only for final classes and primitive types 
//  store last row update count for executeUpdate, executeInsert and execute 
// String pcsFieldName = "this$propertyChangeSupport"; 
//  clean the tree by ensuring multi line styles are reset in area   of parsing 
//  res stores the first found abstract method 
//  ... initialise 
// extract the place holders 
//  the cached hasNext call value 
//  Could be null if there are no errors 
//  Check parent classloader, keep the exception for future use 
/*                  * Handle raw new line characters.                  */
/*              The _only_ special escaping this template engine allows is to escape the sequences:             ${ and <% and potential slashes in front of these. Escaping in any other sections of the             source string is ignored. The following is a source -> result mapping of a few values, assume a             binding of [alice: 'rabbit'].             Note: we don't do java escaping of slashes in the below             example, i.e. the source string is what you would see in a text editor when looking at your template             file:              source string     result             'bob'            -> 'bob'             '\bob'           -> '\bob'             '\\bob'          -> '\\bob'             '${alice}'       -> 'rabbit'             '\${alice}'      -> '${alice}'             '\\${alice}'     -> '\rabbit'             '\\$bob'         -> '\\$bob'             '\\'             -> '\\'             '\\\'             -> '\\\'             '%<= alice %>'   -> 'rabbit'             '\%<= alice %>'  -> '%<= alice %>'              */
/*  8: bool    */
//             char c = s.charAt(0); 
// ---------------------------------------------------------------------------   TYPE SUGAR 
//  receivers 
//     public int fastHashCode() { 
//  otherwise, latest position in line not part of mlr 
//  load the exception and rethrow it 
//  but add empty body for setter for legacy compatibility 
//  GROOVY-7783 use Set for O(1) performance for contains 
/*  The Computer Language Shootouthttp://shootout.alioth.debian.org/contributed by Alkis Evlogimenos */
//  returns from a closure or method   if   else   do loop   while loop   for loop 
//  set all the actions 
//  boolean truth   boolean false   missing instance 
/*          * Bind request header key-value hash map.          */
//  Maybe this type belongs in the same package as the node that is doing the   static import. In that case, the package may not have been explicitly specified.   Try with the node's package too. If still not found, revert to original type name. 
//  add the first/last element being always the default value 
//  end position in document 
//  the returned node is DummyNode<Param1, Param2, Param3, ...) 
//  copy annotations from field to legacy dummy field 
//  add method: void removePropertyChangeListener(name, listener) 
//  compare a list shorter than the range 
//  fall through and let the URL be null 
//  use evaluate to pass in the BSF variables 
//             addError("Annotation " + MY_TYPE_NAME + " member 'value' should be a class literal.", value);              return;          } 
//  everything in this package 
//  end::jsr223_basic[] 
//  command pattern implementation classes  ------------------------------------------------------------------------- 
//  Li3 must now be empty 
//  Temporary file - delete on exit, create (assured unique name). 
//  maybe we are looking for a setter ? 
//  package-privates 
//  create switch targets 
//  a high order bit was encountered, thus the encoding is not US-ASCII   it may be either an 8-bit encoding or UTF-8 
// throw a runtime exception if conversion would be out-of-range for the type. 
//  Here we instantiate objects representing MetaMethods for DGM methods.   Calls for such meta methods done without reflection, so more effectively. 
//  And now the real init work... 
//  first find the state defining the label. That is the state   directly after the state not knowing this label. If no state   in the list knows that label, then the defining state is the   current state. 
//  fall back to some defaults 
//  when resolving prop or field reference 
//  the number of arguments is too big, wrap all exceeding elements   in an array, but keep the old elements that are no vargs 
//  look into the compile unit if there is a class with that name 
//  if alignment target is a wildcard type   then we must make best effort to return a parameterized   wildcard 
//  visit arguments as array index 
//  skip 
//  visit RegexpCtorEnd   visit RegexpLiteral   visit RegexpSymbol      token types REGEXP_CTOR_END, REGEXP_LITERAL, REGEXP_SYMBOL only used inside lexer 
//  Methods from GroovyDoc 
//  StackOverflow prevention 
//  start threads   wait for them to complete 
//  register with server 
//  last resort look in the category 
//  use the generics information from the Closure to further specify the type 
//  message 
//  GROOVY-6903: May happen in some special environment, like under Android, due   to classloading issues 
//  not found  
//  dynamic properties 
//   --------------------------------------------------------                field handling super: get    -------------------------------------------------------- 
// Check for transposition 
//  modelled very closely on the commons lang StringUtils replaceEach method 
//  remove place holder underscore before starting 
// todo        assertEquals("myMethod(int i = 0; i++; i < 10)", pretty("myMethod(int i=0;i++;i<10)")); // not in java 
/*          * Creates a new instance of LexerNode           */
//  visit body 
//  remove all multiples of prime: i 
//  Not a macro call 
//  first parameters as usual 
//  only print parenthesis if is not of form def x = new int[5] 
//  Binary expressions 
//  invoke overridden toString closure method 
//  Expect a comma for an upcoming value   or a closing bracket for the end of the array 
//  invoke overridden equals closure method 
//  This is an arbitrary value, picked as a reasonable choice for a precision 
// ---------------------------------------------------------------------- 
//  fill it up path with parts which were not equal 
//  potentially allow Collection coercion for a constructor 
//  <2, because foo() is same as foo(null) 
/* todo */
//  When the outer class is resolved, all inner classes are resolved too 
//             name = "java/lang/Object";          } 
//  Prepare a list to contain the auto-generated column   values, and then fetch them from the statement. 
//  initialize the PRINT_PANE (need this so that wrapping 
//  do not generate bytecode for private methods 
//  any bare string data 
//  need to visit even if we only look for a setters for compatibility 
//  remove and replace the delete action to another spot so ctrl H later   on is strictly for showing the find & replace dialog 
//  ignore the missing method exception   as it means no begin() method is present 
//  metaClass is invalid 
//  Below are registered as module extension classes              DateUtilExtensions.class,              DateTimeStaticExtensions.class,              DateTimeExtensions.class,              SqlExtensions.class,              SwingGroovyMethods.class,              XmlGroovyMethods.class,              NioGroovyMethods.class 
//  Catch any statements not followed by ; 
//  Let the thread exit. 
//  '7', '8', '9', ':', ';' 
//  automatically output the result of each script 
// All args have to be boxed since argumentTypes is always boxed 
//  range may still be reversed, this value is ignored for inclusive-aware ranges 
//  AIC are already done, doing them here again will lead to wrong scopes 
//  fall through and attempt other search strategies 
//  output AST in format suitable for opening in http://freemind.sourceforge.net   which is a really nice way of seeing the AST, folding nodes etc   uppercase to hide from jarjar 
//  working variables 
//  the supplied AST was null 
//  defines the first variable index usable after 
//  for compatibility with the legacy proxy generator, we should throw an UnsupportedOperationException   instead of an AbtractMethodException 
//  This is a home-grown implementation which we have not had time   to research - it may perform poorly in some circumstances. It   requires twice the space of an in-place algorithm and makes   NlogN assignments shuttling the values between the two   arrays. The number of compares appears to vary between N-1 and   NlogN depending on the initial order but the main reason for 
//  (a=1; a<10; a++)   a,b,c   a,b,c   <String, Object>   "foo${bar}wibble"   class Foo<T extends F>   class Foo<T>   class Foo<T extends F> 
//   -------------------------------------------------------- 
//    NOTE: This piece of code is heavily inspired by Apaches Jasper2!      http://cvs.apache.org/viewcvs.cgi/jakarta-tomcat-jasper/jasper2/ \          src/share/org/apache/jasper/servlet/JspServlet.java?view=markup     Why doesn't it use request.getRequestURI() or INC_REQUEST_URI?   
//  no explicit locale in the template path or resource not found   fallback to the default configuration locale 
//  There is no-where else to put this.   Add a mouse listener to the Table to trigger a table sort 
//  br to leave a copy of rvalue on the stack. see also isPopRequired() 
//         Class[] argClasses = MetaClassHelper.convertToTypeArray(arguments); 
//  stack: closure,type,type,closure 
//  ternary operator 
//  fall back to creation 
//    Strip off any type specifier and convert it to lower   case, if present. 
//  def bais = new ByteArrayInputStream(baos.toByteArray()) 
/*       * Execute the groovy script contained in file.  If missingPermission      * is non-null, then this invocation expects an AccessControlException with missingPermission      * as the reason.  If missingPermission is null, the script is expected to execute successfully.       */
/*  (non-Javadoc)    * @see org.xml.sax.XMLReader#setErrorHandler(org.xml.sax.ErrorHandler)     */
//  int value = 0; 
/*  fix for GROOVY-5809  */
//  only show the file name and its extension like javac does in its stacktraces rather than the full path 
// object.invokeMethod("testInject", null); 
//  can't check volatile here as it doubles up with bridge  private static final String EXPECTED_VOLATILE_METHOD_ERROR_MESSAGE = 
/*  (non-Javadoc)      * @see groovy.lang.GroovyObject#getMetaClass()       */
//  integer overflow cases 
//  process sockets 
//                 // can't access the field directly but there may be a getter                  mp = null;              } 
//  private bridge methods already added 
//  no interface in common 
/*  (non-Javadoc)    * @see org.xml.sax.XMLReader#setFeature(java.lang.String, boolean)     */
//  add static property missing getter dispatcher 
//  prefer primitive type over boxed type 
/* | ACC_STATIC */
//  Helper methods  ------------------------------------------------------------------------- 
//  the document segment 
//  we use a map in addition to the internal caching mechanism of Groovy because the latter   will always read from the URL even if it's cached 
//  for binary compatibility only, don't use or override this 
//  Map to store cached classes 
//  fallback 
//  normal mode with different paths   important is to not to have a fastpathblock here,   otherwise the per expression statement improvement    is impossible 
/*  * TODO share some code with {@link org.codehaus.groovy.transform.stc.StaticTypeCheckingSupport.ExtensionMethodCache} * * @since 2.5.0  */
/*         The use of volatile for value field ensures that       we can detect status changes without synchronization.       The other fields are never changed, and are       marked as final.      */
//      sp     !     "     #     $     %     &     ' 
//  add a new invoke 
// There is not requirement to escape solidus so we will not.                          case '/':                              _buffer[_location] = '\\';                              _location ++;                              _buffer[_location] =  '/';                              _location ++;                              break; 
//  array access 
// file does not exist! 
//  we can get actual parameters directly 
//  visit increment 
//  Create a dummy ModuleNode to represent a failed parse - in case a later phase attempts to use the ast 
// import is like "import Foo as Bar" 
//  sort interfaces so that we may ensure a deterministic behaviour in case of   ambiguous fields (class implementing two interfaces using the same field) 
// ended, fix column value 
//  $Id: echo.java,v 1.1 2004-05-22 07:57:50 bfulgham Exp $   http://www.bagley.org/~doug/shootout/   author: Dirus@programmer.net 
//  A fast-path containment check 
//  2.5.3 and above gets from annotation attribute otherwise self 
// runTest("tree/NestedClosureBugTest.groovy"); 
//  This class provides a doubly-linked list that is optimized for the virtual   machine. The first and last elements are manipulated instead of a slightly   more convenient sentinel element to avoid the insertion of null checks with   NullPointerException throws in the byte code. The links to a removed   element are cleared to help a generational garbage collector if the   discarded elements inhabit more than one generation. 
//    Temp code to ignore wrapped parameters   The New MOP will deal with these properly   
//  maybe we can infer the component type 
// ClassLoader currentClassLoader = thread.getContextClassLoader(); 
//  check if we can create a URL from that URI 
//  $len = array.length 
/*  The Ant project  */
//  no comparison possible 
//  Unknown type: ENUM_DEF   fails after parser 
//  left hand side of an assignment : map['foo'] = ... 
//  The URL from which we produce Readers. 
//  *very* defensive... 
//  this map is used to ensure that two errors are not reported on the same line/column 
//  13! won't fit into int 
//  Declare the loop counter. 
//  check for star imports (import static pkg.Outer.*) matching static inner classes 
//  load "this" 
/*      * Get the Class Properties of the object under inspection.     *     * @return String array to be indexed by the CLASS_xxx_IDX constants      */
//  as anything can be assigned to a String, Class or boolean, return the left type instead 
//  record the transforms found in the first scan, so that in the 2nd scan, phase operations  
//  Write out size (number of Mappings) 
//  case length ==0 handled already   we have now two cases,   the argument is wrapped in the vargs array or   the argument is an array that can be used for the vargs part directly   we test only the wrapping part, since the non wrapping is done already 
//  add empty default constructor 
//  can happen for compiler rewritten code, where type information is missing 
//  just a dummy for later 
//  in case if verifier visited the call already 
// should be SQLFeatureNotSupportedException instead once we move to Java 1.6 
//  throw original 
/* <MenuElement> */
// All nulls have to be wrapped so that they can be compared 
//  ++, !, etc.   ++, etc.   +, -, =, etc.   +, -   prefix +, prefix - 
//  pick best fit 
//  remove the boolean from the operand stack tracker 
//  trait defined in same source unit 
//  Increment the count for each non/java src we found 
//  define setter/getter helper methods (setter added even for final fields for legacy compatibility) 
//                 return effective.getProperty(receiver); 
//  load argument i 
//  now let's load the various parameters we're passing   we start at index 2 because the first variable we pass   is the owner instance and at this point it is already 
/*  4: char    */
//  x?:y is equal to x?x:y, which evals to         var t=x; boolean(t)?t:y   first we load x, dup it, convert the dupped to boolean, then    jump depending on the value. For true we are done, for false we   have to load y, thus we first remove x and then load y.    But since x and y may have different stack lengths, this cannot work   Thus we have to have to do the following:   Be X the type of x, Y the type of y and S the common supertype of    X and Y, then we have to see x?:y as          var t=x;boolean(t)?S(t):S(y)   so we load x, dup it, store the value in a local variable (t), then    do boolean conversion. In the true part load t and cast it to S,    in the false part load y and cast y to S  
//  because the class may be generated even if a error was found 
/*  (non-Javadoc)         * @see java.lang.Object#equals(java.lang.Object)          */
//  meta class match receiver 
//  Check to support wild card classpath 
//  We use BufferedWriter rather than System.getProperty because   it has the security manager rigamarole to deal with the possible exception. 
//  load x, dup it, store one in $t and cast the remaining one to boolean 
//  you can't parameterize a non-generified type 
//  Expect a comma for an upcoming key/value pair   or a closing curly brace for the end of the object 
//  left is a float/double and right is a BigDecimal 
// Ignored here, just used for exiting the read loop. Yeah I know we don't like  empty catch blocks or expected behavior trowing exceptions, but this just cleaned out the code  _so_ much that I thought it worth it...this once -Matias Bjarland 20100126 
/*  We are covering our bet with a safety net.                      otherwise we would have to have 5x buffer                      allocated for control chars  */
/*  (non-Javadoc)      * @see groovy.lang.GroovyObject#getProperty(java.lang.String)       */
//             // TODO              String importTextWithSlashesInsteadOfDots = extractImportPath(t); 
// ---------------------------------------------           GlobalMetaClassVersioning 
//  check if there are appropriate class or method annotations   that suggest we have a JUnit 4 test 
// + " declared by " + annotation.getClassNode().getName(), 
//  initialize and load (recursive call), result ignored 
//  path through ScriptBytecodeAdapter 
/*  (non-Javadoc)     * @see java.lang.Runnable#run()      */
//  _result = HashCodeHelper.updateHash(_result, field) // plus self-reference checking 
//  owner first   owner first means we start with the outer most owner that is not a generated closure   this owner is equal to the this object, so we check that one first. 
//  set log to consume traces by default, end user can override later 
//  Number based methods  ------------------------------------------------------------------------- 
//  it's no real property but a property of the component 
//  register the new class with the compile unit 
//  we should not visit embedded closures recursively 
//  GROOVY-6219 
//  skip hidden and read-only props 
// else if there's a statically typed method or a GDK method 
//  set child first 
//  Java and JavaScript  -------------------------------------------------------------------------- 
// append nothing -> delete ';' 
//  adjust typing for explicit math methods which have special handling - operator variants handled elsewhere 
/*      * If the byte has the form 10xxxxx, then it's a continuation byte of a multiple byte character;     *     * @param b a byte.     * @return true if it's a continuation char.      */
//  maybe we have C[k1:v1, k2:v2] -> should become (C)([k1:v1, k2:v2]) 
//  one of the objects is at the top of the hierarchy 
//  make call 
//  remove all static, private and package private methods 
//  add method:   void addVetoableChangeListener(name, listener) {       this$vetoableChangeSupport.addVetoableChangeListener(name, listener) 
//  skip built-in properties 
//  first can be class or interface 
//  .   ..   ... 
//  GROOVY-5890 
//  also check interfaces in case we have interfaces with nested classes 
//  The SourceUnits from which this unit is built   Summary of each SourceUnit   Summary of each SourceUnit   Summary of each Class   Names for each SourceUnit in sources. 
// ---- additional 
//  should we throw a validation failed exception?  or fail quietly? 
//  lib.Foo is imported later that api.Foo, so groovydoc tries to resolve to lib.Foo first. 
//  if we finished before hitting the end of the checkpoint from   no mroe matches, then set ensure the text is reset to the   defaultStyle 
//  exception blocks list 
//  public|protected 
//  Decided against syntax exception since this is not a syntax error.   The down side is we lose line number information for the offending   @Grab annotation. 
//  ignore 
//  get the new value to emit in the event 
//  give precedence to methods of self (but not abstract or static superclass methods) 
//  indexes into arrays s and t 
//     public GroovyAnnotationTypeDoc asAnnotationTypeDoc() {/*todo*/          return null;      }        public GroovyClassDoc asClassDoc() {/*todo*/          return null;      }        public GroovyParameterizedType asParameterizedType() {/*todo*/          return null;      }        public GroovyTypeVariable asTypeVariable() {/*todo*/          return null;      }        public GroovyWildcardType asWildcardType() {/*todo*/          return null;      }        public String dimension() {/*todo*/          return null;      } 
//  currently temporary variables in use 
//  visit lbrack()     token type LBRACK only used inside parser, never visited/created 
//  INSTANCE METHODS 
//  get same description but with paths relative to root 
//  print the methods from traits 
/* Double[16] */
// ---------------------------------------------                    byte  --------------------------------------------- 
//  visit WS - only used by lexer 
//  let's try load it from the classpath 
//  look for quick exit 
//  check if param part of control structure - but not if inside instanceof 
//  not a valid import type, do not modify the code 
/*  * The Great Computer Language Shootout  * http://shootout.alioth.debian.org/ *  * modified by Mehmet D. AKIN *  */
/*  The Computer Language Shootout   http://shootout.alioth.debian.org/   contributed by Tony Seebregts   modified by  */
//  return new Foo(new ShellContext(args)).run() 
//     public GroovyTag[] firstSentenceTags() {/*todo*/return null;}      public GroovyTag[] inlineTags() {/*todo*/return null;} 
//  Map interface 
//  can't remember the exact Josh Bloch algorithm and I've not got the book handy   but its something like this IIRC 
//  DO NOT USE isStatic variable here! 
//  this is just a simple set field handling static and non-static, but not Closure and inner classes 
/*  ******** java.time.ZoneOffset extension methods ********  */
//  slightly strange as subsequent visit is done after closing visit 
//  exits a loop or block   restarts a loop on the next iteration   switch block   item in a switch block   catch-all item in a switch block 
//  GROOVY-6706: Sometimes an NPE is thrown here.   The reason is that our transform is getting called more than once sometimes.   
//  GROOVY-5585 
//  replace all calls for this with the correct MOP method 
//  char as left expression 
//  finally block to clean assertion recorder 
//  = 
//  expr?foo:bar 
//  rewrite it so that it can be statically compiled 
//  lets check that the argument types are valid 
//  a.k.a. "variable arity parameter" in the JLS 
// least give the user a sporting chance 
//  global functions namespace  
// ---------------------------------------------------------------------------   MEMBER ACCESS 
//  handle an escaped value 
/*  1: int     */
//  remove contexts created after we started 
// classes, interfaces, class/instance vars and methods 
//  ---- 
//  int x int 
//  test Integer[] 
//  bean-style constructor 
//         Expression value = node.getMember("value"); 
// ---------------------------------------------------------------------------   OPERATIONS 
//  GROOVY-9035 supply a "no-op" CompilationCustomizer if none found to make DSL friendly for empty case 
//  ELSE keep original char   and pushback the one we just read 
//  Manually wire beans together. 
//  create next() method, code:       Day next() {          int ordinal = ordinal().next() 
//  build the pieces 
//  we assume arity related errors are already handled here. 
//  declaration visibility   declaration visibility   declaration visibility 
//  support list[1..-1] 
//  GROOVY-4922: Due to a numbering scheme change, we must find the super$X$method which exists   with the highest number. If we don't, no method may be found, leading to a stack overflow 
//  handle conversion to boolean 
//  if left type is array, we should check the right component types 
//  ------------------ byte ------------------ 
//  potentially add a no-arg constructor too 
//  Print the length 1 & 2 counts. We know the offsets of the tasks, so we can cheat. 
//             result = 31 * result + (compileTimeClassNode != null ? compileTimeClassNode.hashCode() : 0); 
//  any number can be assigned to a big decimal 
//  call for checking if method is still valid 
//  build up the metaproperties based on the public fields, property descriptors, 
//  assume must be static class field or enum value or class that Java can resolve 
//  create a new array for the vargs and copy them 
//  ex: LUB type 
// usualy name has text 
//  guard every class and method defined in this script 
/*  The Computer Language Benchmarks Game http://shootout.alioth.debian.org/ contributed by James McIlree  */
//  GROOVY-8531: Fail to resolve type defined in super class written in Java 
//  if set to true the name getGenericsTypes consists 
//  Provide access to engine context, if context var is not already provided 
//    It's not the greatest of design that the interface allows this, but it   is a tradeoff with convenience, and the convenience is more important. 
//  snapshot of table   current slot    current node of slot   key for current node   value for current node   last node returned by next 
//  instanceof applies, stash away the type, reusing key used elsewhere 
//  only visit the expression 
//  actually has the most recent cost counts 
/* @ClosureParams(value=FromString.class, options="?,Integer") */
//  visitDollar ...     token type DOLLAR never created/visited, see SCOPE_ESCAPE instead 
//  force <clinit> 
//  unwrap to the real exception 
// n*n version 
//  retry with raw types 
//  According to http://michaelscharf.blogspot.jp/2006/11/javaneturlequals-and-hashcode-make.html, use java.net.URI instead. 
//  meta class check with boolean holder 
// LOGME   ignore it, likely failing because we are faking out properties   such as a call to Math.min(int, BindPathSnooper) 
//  used to ensure that hasNext has been called 
//  load property name 
//  remove the result of the method call 
//  now try with flow type instead of declaration type 
//  3 from JMock 
//  the context we compare with in the end is the one of the callsite   so far we specified the context of the method declaration only 
//  and mark as ambiguous if needed 
//  Since normalizing did not help, use original values at user's risk 
//  straight xstream output of AST 
//  test default imports 
//  cache first element, avoid swapping perm[0] and perm[k] 
//  at this point the receiver will be already on the stack 
// isCase 
//  we may have to add a check and remove this part of the code 
//  using it here is that, unlike qsort, it is stable. 
//  strings must be equal except for the last character 
//  skip the LF in CR LF 
//  ------------------ char ------------------ 
//  Not loaded, try to load it 
//  we need this method as trick to guarantee correct method selection 
//  check that direct access is allowed 
//  write "this" 
//  add methods declared by DGM for interfaces 
//  next & previous 
//  else go to object case 
//  detect namespace declared on the added node like xmlns:foo="http:/foo" 
//  ContentHandler interface  ------------------------------------------------------------------------- 
//  GROOVY-4833 : annotations that are not Groovy transforms should be transferred to the generated field 
//  Now this is a bit unusual 
//  implicit closure coercion in action! 
//  should be limited to the current SourceUnit or propagated to the whole CompilationUnit 
//  instantiate a runnable and run it 
//  end::precompiled_java_extension[] 
//  equal class, nothing to do 
//  if left and right are primitives or numbers allow 
//  throws FileNotFoundException { 
//  get encoding 
//  we remove it here, because addProperty will add it   again and we want to avoid it showing up multiple   times in the fields list. 
//  we have something like A.B.this, and need to make it   into this.this$0.this$0, where this.this$0 returns   A.B and this.this$0.this$0 return A. 
//  if we still haven't found the file, point back to the originally specified filename 
//  create a shell   register the mgr with object name "bsf" 
//  cleanup temporary variables 
//  applied to class names   applied to interface names   applied to mixin names   applied to method names   applied to property names   applied to method/closure parameter names 
//  ignore trait methods which have a default implementation 
//  we are calling an outer class method 
// IGNORED_PACKAGES.add("java.lang.reflect"); 
//  create and add the undo/redo manager 
//  a four-bytes sequence was encountered 
/*  The Computer Language Shootout   http://shootout.alioth.debian.org/   benchmark implementation (not optimized)   JRE 1.5 only   contributed by Josh Goldfoot  */
//  tag::jsr223_invocable[] 
//  fetch all the nodes in this AST into a List 
//  have to remove 1 because of the GOTO 
//  GROOVY-7363: There can be multiple matches for a getter returning a generic parameter type, due to   the generation of a bridge method. The real getter is really the non-bridge, non-synthetic one as it   has the most specific and exact return type of the two. Picking the bridge method results in loss of   type information, as it down-casts the return type to the lower bound of the generic parameter. 
//  Check for nulls 
//    Nested task adapters   
//  if the file has a Byte Order Marker, we can assume the file is in UTF-xx 
//  push new node on stack 
//  when resolving the outer class later, we set the resolved type of ConstructedOuterNestedClass instance to the actual inner class node(SEE GROOVY-7812(#2)) 
//  ignore result 
//  we print the error, but we don't stop with an exception here   since it is more comfortable this way for development 
//  add the undo actions 
/* <Constructor[]> */
//  since there can be field init statements that depend on method/property dispatching   that uses this$0, it needs to bubble up before the super call itself (GROOVY-4471) 
//  class, interface, mixin   public, private, abstract, etc. 
//  and to differentiate from static fields otherwise 
//  check that the node doesn't belong to the list of declared constructors 
//  fall back to cast 
//  it is idiotic story but if config map doesn't allow null values (like Hashtable)   we can't do too much 
/*  (non-Javadoc)     * @see groovy.lang.MetaClass#invokeMethod(java.lang.Object, java.lang.String, java.lang.Object)      */
//  GROOVY-5940 
//  add methods 
//  but that's protected and unavailable to us. 
//  other primitives 
//  GROOVY-8272 support inherited static methods 
// nothing 
//  ignore, too bad so sad they don't follow conventions, we'll just leave the listener attached 
//  start on the text that was replaced 
//  if enum constants have been used, check if they are all valid 
//  GROOVY-6849: prefer extension methods in case of ambiguity 
//  if convenience hack did not make classes match,   throw exception when starting with known class, and thus "from" cannot be advanced over "to".   Note if start is an unusual Object, it could have a next() method   that yields a Number or String to close the range 
//  should we verify the property is valid? 
//  this *is* verbose! ;) 
/*  Holds the actual map that will be lazily created.  */
//  adjust the first statement if it's a super call 
//  If the first thing is an value, then we need a dummy empty string in front of it so that when we   toString it they come out in the correct order. 
//  to be used in generics, type must be boxed   to be used in generics, type must be boxed 
//  this is used to store the goals for a "continue foo" call 
//  break once idx goes to -1 or for case of empty string once   we get to the end to avoid JDK library bug (see GROOVY-5858) 
/*  The Great Computer Language Shootout   http://shootout.alioth.debian.org/   contributed by Alexei Svitkine */
//  stack: closure,curriedClosure 
//  imagine we have: list*.foo = 100   then the assignment must be checked against [100], not 100 
//  $Id: wc.java,v 1.2 2004-06-20 08:39:47 bfulgham Exp $   http://www.bagley.org/~doug/shootout/   with help from Dirus@programmer.net 
//  Use our privileged access in order to prevent checks lower in the call stack.  Otherwise we would have   to grant access to IDE unit test runners and unit test libs.  We only care about testing the call stack   higher upstream from this point of execution. 
//  null check because of http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4803836 
//  unimplemented abstract methods from interfaces 
//   Potentially throws Exception. 
//  reset last 
/*  * Test classes extracted and adapted from the AssertJ project.  */
//  not in java   empty regexp_literal should be treated as single line comment // not in java 
//  since we have B and want to get A we start with the most    outer class, put them together and then see if that does   already exist. In case of B from within A$B we are done    after the first step already. In case of for example   A.B.C.D.E.F and accessing E from F we test A$E=failed,    A$B$E=failed, A$B$C$E=fail, A$B$C$D$E=success 
//    KEYWORDS: PRIMITIVE TYPES 
//  default to Number class in exception details, else use the specified Number subtype. 
//  look for one of these:     import static SomeClass.method [as otherName] 
//  racy, multiple threads may set cachedValues but rather have that than take a write lock 
//    Strip off the sign, if present 
//  invokeMethod 
//  Define false < true 
//     public MethodVisitor getMethodVisitor() {          return mv;      } 
//  assume the first param is the delegate by default 
//  check if it's a property 
//  Check if the annotation target is correct, unless it's the target annotating an annotation definition   defining on which target elements the annotation applies 
//  standard closure (2 methods because "it" is with default null) 
//  cleanup stack 
//  ------------------------   feature: type parameters 
/*      * Wrap an existing setter.      */
// CHECKSTYLE.OFF: VisibilityModifierCheck - special case, direct access for performance 
//  That's what you get for "1.0". 
//  remove all the * from beginning of lines 
//  fall back after method change 
// unbox primitives 
//  emulate named params constructor 
//  whenever a method using a closure as argument (typically, "with") is detected, this list is updated 
//  let's ignore exception and return the original object   as the caller has more context to be able to throw a more   meaningful exception (but stash to get message later) 
//  mutate the tree when in Javaland 
// accept_FirstChild_v_SecondChild_v(t); 
//                         value = next.stripTrailingZeros().hashCode();                      }                  }                  hashCode = 31 * hashCode + value;              }              canonicalHashCodeCache = hashCode;          }          return canonicalHashCodeCache;      } 
//  ensure exact matches are preferred over vargs 
// The number 8 below represents the number of characters in the header of a non-string-section such as  <% ... %>. A section like this is represented in the target script as:  out<<"""......."""  12345678 
//  for call result 
//  we want this exception exposed. 
/*              *  this happens             *  *    when groovyc calls FileSystemCompiler in forked mode, or             *  *    when FileSystemCompiler is run from the command line directly, or             *  *    when groovy was not started using groovyc or FileSystemCompiler either              */
//  invoke via metaclass 
//  map the nodes to Groovy types 
// regexpr 
//  still not method here, so see if there is an invokeMethod method up the hierarchy 
//  should the open block provide final information we apply that 
//  fall back for parameterless constructor 
//  got here to property not found, look for getProperty or setProperty overrides 
//  now the optional exception expression 
//  multiple declaration 
//  test ranges 
//  meta class match receiver   metaClass still be valid 
//  stores if on left-hand-side during compilation 
//  We'll be silent here.   If the URI scheme is unknown or not hierarchical, then we just can't help them and shouldn't cause any trouble either.   addError("Attribute \"root\" has value '" + root + "' which can't be turned into a valid URI relative to it's source '" + getSourceUnit().getName() + "' @" + node.getClassNode().getNameWithoutPackage() + " annotations", node); 
//  copy the list to Li2 (not by individual items) 
//  memorize current assignment context 
//  if we have a BinaryExpression, let us check if it is with   subscription 
/*  (non-Javadoc)         * @see groovy.lang.Closure#setDelegate(java.lang.Object)          */
//  true part: load x and cast to S 
//  store the type of parameter and block type as meta information 
// those classes implement a method with a better exact match. 
//  store value into array 
//  invoke overridden hashCode closure method 
//  Method invocation tests  ------------------------------------------------------------------------- 
// sb.append(", siblings=").append(siblings); 
//  let's assume it's a collection of 1 
//                     } 
// ---------------------------------------------------------------------------   INITIALIZATION AND SUCH 
//  we should infer the type of the exception from the expression 
//  For ' and " we only escape if needed. As far as XML is concerned, 
//   --------------------------------------------------------                normal field handling : get    -------------------------------------------------------- 
//  the method represents the operation type only, and we must add an assignment 
//  lets run the script 
//  try to find the cached value again 
//  We could jump through some hoops to have GroovyShell make our script name, but that seems unwarranted.   If we *did* jump through that hoop then we should probably change the run loop to not recompile   the script on every iteration since the script text can't change (the reason for the recompilation). 
//  add flags 
//  GROOVY-6373: references to 'log' field are normally already FieldNodes by now, so revisit scoping 
//  of 1 element describing the name of the placeholder 
//  vargs need special attention and transformation though 
// ---------------------------------------------------------------------------   PARSING SUPPORT 
//  if <0, probably an AST transform or internal code (like generated metaclass field, ...) 
//  if this an Array, then add the special read-only "length" property 
//  No need to print 'def' if we already have some modifiers 
//  use linked hash set so order is preserved 
//  assume completely blank line signifies end of sentence 
//  Prefix expressions 
//  protected implementation methods - extension points for subclasses  ------------------------------------------------------------------------- 
//  protected static VetoableChangeSupport this$vetoableChangeSupport = new java.beans.VetoableChangeSupport(this) 
//  copy default one, may override later 
//  read only property 
//  we need to cheat using the type 
//  we are first, save the streams 
//  GROOVY-4548: temp fix to stop CCE until proper support is added 
/* Byte[3] */
//  If last element is not being removed shift the last element into this slot 
//  look for possible legacy fields (trait compiled pre 2.4.8) 
//  add it to the class 
//  prevents the proxy from being abstract 
//  return the completed node 
//  Li2 must now be empty   remove each individual item from right side of Li3 and 
//  reading the content of the file within a byte buffer 
//  GROOVY-8868 don't want an empty body to cause the constructor to be deleted later 
//  as in Target.execute() 
//    because of reverse iteration use ArrayList 
//  32767 is the command line length limit on Windows 
//  removes one Object[] leaves the int containing the 
//  "case", "default", "}"   "case", "default" 
//  void f(String ... others) {} 
//  then resolve receivers from method arguments 
//  RFC2396 
//       8     9     :     ;     <     =     >     ? 
//  now mutate (groovify) the ast into groovy 
//  stack clean 
//  just in case remove carriage returns 
//  cast to Object to test routing through equals(Object) 
//  perform regular type conversion 
//  try matching against 'prefix:localname' 
//  now create the MetaProperty object 
//  resolve method return types and parameter types 
// ----------------------------------------------------------------------   Unwrap wrapped values fo now - the new MOP will handle them properly 
//  double   no possible loose here 
//  fail fast! if we got a malformed URL the Classloader has to tell it 
//  check for stray labeled arguments: 
//    Add the sign back, if necessary 
// Check for transposition, somewhat more complex now since we have to check for case 
/*  The Great Computer Language Shootout   http://shootout.alioth.debian.org/    contributed by Isaac Gouy  */
//  each interface may have one or more "extends", so we must find those 
//  We can compare here by length, because pname is always   a substring of name, so same length means they are equal. 
/*  (non-Javadoc)     * @see org.xml.sax.XMLReader#setFeature(java.lang.String, boolean)      */
//  we have a call to super here, so we need to add   our code after that 
//     def optionals = [[0, 1], [0, 1], [0, 1], [0, 1]].combinations{ a, b, c, d ->              (a ? hex('80') : 0) + (b ? hex('10') : 0) + (c ? hex('8') : 0) + (d ? hex('2') : hex('1'))      }.sort() 
//  match URIs but not Windows filenames, e.g.: http://cnn.com but not C:\xxx\file.ext 
// throw new NullPointerException("Cannot invoke method " + methodName + "() on null object"); 
//  create our own local copy of the closure 
/*  multiply vector v by matrix A and then by matrix A transposed  */
//  and remove the final modifier from classNode to allow the sub class 
// operandStack.box(); 
// todo push through InvokerHelper.asList? 
//  make sure we keep primitive types 
/*      * If the byte has the form 110xxxx, then it's the first byte of a two-bytes sequence character.     *     * @param b a byte.     * @return true if it's the first byte of a two-bytes sequence.      */
//  if right is a constant, then we optimize only if it makes   a block complete, so we set a maybe 
//  ------------------------------   helper methods  ------------------------------ 
//  ------------------------ 
//  the constructors for our script class have already run. 
//    Run the generation and create the class (if required) 
//  choose the distance to Object if a parameter is null   this will mean that Object is preferred over a more   specific type 
//  visit Vocab - only used by Lexer 
//  This is a good point to call t.setSnippet(),   but it bulks up the AST too much for production code. 
/*  field and declaration we don't return false  */
//  star imports 
//  there might be annotations not present in the classpath   e.g. java.lang.Synthetic (http://forge.ow2.org/tracker/?aid=307392&group_id=23&atid=100023&func=detail)   so skip them 
//  place holder for "empty" synchronized blocks, for example   if there is only a break/continue. 
//  GROOVY-5620: Spread safe/Null safe operator on LHS is not supported 
//  load argument array 
//  constructor call is in static context and the inner class is non-static - 1st arg is supposed to be    passed as enclosing "this" instance   
// ----------------------------------------------------------------------   setter 
//  Comment Summary using first sentence (Locale sensitive) 
//  for the redirect 
//  if rightExpression is null and leftExpression is not a primitive type, it's ok 
//  TODO allow string quoting delimiter to be specified, e.g. ' vs " 
//  now iterate over the map of property descriptors and generate   MetaBeanProperty objects 
/*  ******** java.time.LocalDate extension methods ********  */
//  Use setUp/tearDown to avoid mucking with system properties for other tests... 
//  Constructor is actually "FooAdapter(FooImpl foo)",   but it should show "Foo" as the link text, not "FooImpl". 
//  enable recompilation? 
//                     element = new MetaBeanProperty(mp.getName(), mp.getType(), null, mp.getSetter());                  } 
//  In a method call with SAM coercion the inference is to be   understood as a two phase process. We have the normal method call   to the target method with the closure argument and we have the   SAM method that will be called inside the normal target method.   To infer correctly we have to "simulate" this process. We know the   call to the closure will be done through the SAM type, so the SAM   type generics deliver information about the Closure. At the same   time the SAM class is used in the target method parameter,   providing a connection from the SAM type and the target method   declaration class. 
//  items.inject([]){ ss, h -> ss.collect { it + [h] }  + ss + [[h]] } 
// ---------------------------------------------------------------------------   OPERATOR PRECEDENCE 
//  right expression is the subscript expression   we store the result of the subscription on the stack 
//  0 is the key, 1 is the value 
//  for example, LHS is List<ConcreteClass> and RHS is List<T> where T is a placeholder 
//  alreadyVisitedMethods prevents from visiting the same method multiple times 
//  try to find a method for the operation 
//  javax.script.Invokable methods. 
//  we use a hard index instead of incrementing the _i variable due to previous 
//  ... find next position 
//    KEYWORDS: (PRIMARILY) CLASS/METHOD DECLARATION MODIFIERS 
//  check to see if an external file is needed 
//  CLASS VARIABLES 
//  GROOVY-6344 
//    Determine radix (default is 10). 
//  true if it's a static method 
//  left classloading very simple in light of potential changes needed for jdk9   that means you might need @GrabConfig(systemClassLoader=true) if getting json via grab              ClassLoader rootLoader = DefaultGroovyMethods.getRootLoader(loader); 
//  tear stuff down, even if we are half built 
//  if you have a Bar class with a static foo property, and this:     import static Bar.foo as baz   then this constructor (not normal usage of statics):     new Bar(baz:1)   will become:     new Bar(foo:1) 
//  check if it's a trait 
//    TYPE GROUPS (OPERATIONS SUPPORT) 
// skip : 
// puts ("key", key, "value", value); 
//  fields and properties 
//  method call receivers are :     - possible "with" receivers     - the actual receiver as found in the method call expression     - any of the potential receivers found in the instanceof temporary table   in that order 
//  ------------------ boolean ------------------ 
/*  (non-Javadoc)    * @see groovy.lang.Writable#writeTo(java.io.Writer)     */
//  GROOVY-5939 
//  if constructor call is not in static context, return 
// all entries are guaranteed to be EntryWithValue. Value can only be null if computeValue returns null 
//                     value = 0; 
//  "unable to resolve class" error can be thrown already, no need to `addError`, so just return 
//  todo precompile regex 
//  The class is not in the tree being documented 
//  not in a closure or within an inner class 
//  visitLiteralImport     token type "import" only used by parser, never visited/created directly 
/*  InvocationHandler implementation.  */
//  (JLS 9.1.1.1). Such a class file must not have its ACC_FINAL, ACC_SUPER or ACC_ENUM flags set. 
//  setter 
//  if size is >1, then the method was overwritten or something, we ignore that   if it is an error, we have to test it at another place. But size==0 is   an error, because it means that no such attribute exists. 
//  If we fail, then exit with an error so scripting frameworks can catch it. 
//  $Id: strcat.java,v 1.1 2004-05-23 07:14:28 bfulgham Exp $   http://www.bagley.org/~doug/shootout/   Pelle Nilsson suggested we also illustrate StringBuffer   since it is the preferred method for concatenating    strings in Java 
//  we may need to pass in some other constructors 
//  don't rewrite assertions w/o source text 
//  This may deadlock so run in a separate thread 
//  We limit the inner class lookups here by using ConstructedClassWithPackage.   This way only the name will change, the packagePrefix will   not be included in the lookup. The case where the   packagePrefix is really a class is handled elsewhere. 
/*      * Compute factorial (TODO: expose this)     *     * @param n the input integer     * @return the factorial for n      */
//  init declarations 
//  in that case, the inferred type of the binary expression is the type of the RHS   "completed" with generics type information available in the LHS 
//  applied to the optional "(" that marks a call to a method   applied to "(" that marks a type cast   applied to "{" that marks a block   applied to "{" that marks a closure   applied to a statement label   applied to "?" that marks a ternary expression   applied to "{" that marks an array initializer 
//  complete rhs: load b, call operation [load sub, call arraySet] 
/*  ******** java.time.YearMonth extension methods ********  */
//  precompiled trait 
//  java (special name used for testing) 
// this.project.setInputHandler(new DefaultInputHandler()); 
//       the instance defining the class. 
//  an integer number 
//  we have C[] if the list is empty -> should be an array then! 
//  objects are equal 
//  Regular expression pattern used to identify words ending in 'y' preceded by a consonant 
/*          * Grab the servlet context.          */
//  totally empty in the case of [:] 
/*      * If the byte has the form 1110xxx, then it's the first byte of a six-bytes sequence character.     *     * @param b a byte.     * @return true if it's the first byte of a six-bytes sequence.      */
//  skip non-Strings, e.g. Integer 
//  rotate down perm[0..r] by one 
// do nothing              
/*      * To make sure the MethodCallExpression is visited and we do not test against     * the default value of isImplicitThis      */
//   --------------------------------------------------------                field handling super: set    -------------------------------------------------------- 
//  a groovy instance (including builder, closure, ...) 
//  factory type may be references as fully qualified, an import, or an alias  default package 
//  we need special code for arrays to store the result (like for a[1]++) 
//  Funky rule so that names like 'pNAME' will still work. 
//  pull them out of package node but treat them like they were on class node 
//         }          return (Character) primitiveArrayPut(array, idx, newValue);      }        public static Short putAt(short[] array, int idx, Object newValue) { 
//             fastHashCodeCache = result;          }          return fastHashCodeCache;      } 
//  GROOVY-7812(#2): Static inner classes cannot be accessed from other files when running by 'groovy' command 
//  above in parseDocument()) 
//                 return mp.getProperty(object); 
//  It was no primitive type, so next we see if the name,   which is a vanilla name, starts with a lower case letter.   In that case we change it to a LowerCaseClass to let the   compiler skip the resolving at several places in this class. 
//  message name 
//    Create a reader on the source and run the parser. 
/*  (non-Javadoc)           * @see groovy.lang.MetaMethod#invoke(java.lang.Object, java.lang.Object[])            */
//  ant's <javac> supports nested <compilerarg value=""> elements (there can be multiple of them) 
//  since the object does not have a valid compareTo method   we compare using the hashcodes. null cases are handled by   DefaultTypeTransformation.compareTo   This is not exactly a mathematical valid approach, since we compare object   that cannot be compared. To avoid strange side effects we do a pseudo order   using hashcodes, but without equality. Since then an x and y with the same   hashcodes will behave different depending on if we compare x with y or   x with y, the result might be unstable as well. Setting x and y to equal   may mean the removal of x or y in a sorting operation, which we don't want. 
//  1 + 1   [1..<10]   [1..10]   a << b   foo*.bar   a >> b   a * b   or    import foo.*   x ** 3   trait Foo... 
//  Methods from Comparable 
//  we always adds meta methods to class itself 
/*             since there is no DUP4 we have to do this:            DUP2_X1            POP2            DUP2_X1            DUP2_X1            POP2            DUP2_X1                    */
//  After normalisation, 'from' may be greater than 'to'. In that   case, we need to reverse them and make sure the range's 'reverse'   property is correct.   TODO We should probably use DefaultGroovyMethodsSupport.subListBorders(), 
// nothing else possible 
//  validate date format pattern 
//                         // workaround on pre-Java8 for http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6480539                          value = BigDecimal.ZERO.hashCode(); 
//  <class_name>( 
// for typical user math. 
//  Setup the configuration data 
//  TODO use pList and fList 
//  TODO use it or lose it 
/*  We copy all returned values from the getValue call in casean optimised model is reusing one object to return many values.The Number subclasses in the JDK are immutable and so will not be used inthis way but other subclasses of Number might want to do this to savespace and avoid unnecessary heap allocation. */
//  ContentHandler interface 
//  we need to add parameters 
//  Properties  ------------------------------------------------------------------------- 
// appropriate line in the source template data 
//  import is like "import static foo.Bar.*"   packageName is actually a className in this case 
//  minimum of cell to the left+1, to the top+1, diagonally left and up +cost 
//    Run the Verifier on the outer class 
//  this program is modified from:     http://cm.bell-labs.com/cm/cs/who/bwk/interps/pap.html   Timing Trials, or, the Trials of Timing: Experiments with Scripting   and User-Interface Languages</a> by Brian W. Kernighan and   Christopher J. Van Wyk. 
//  copy statements from static and instance init blocks 
//  with transform detection alone these phases are inaccessible, so don't add it 
//  let's assign all the parameter fields from the outer context 
//  def _result = super.clone() as cNode 
// ignore 
// load insertion index 
//  If the line source is closed, try to open it. 
/*  never true for batchSize of 0  */
//  Typically, Android can throw ClassNotFoundException 
//  we already know there are at least params.length elements in both arrays 
//  really, this should never happen, it's evidence of corruption if it does 
//  GroovyClassLoader should be able to find classes compiled from java sources 
//  attempt resolution on all types, so don't short-circuit and stop if we've previously failed 
//  all arguments are Object but last, which is a vargs argument, that   will fit all, so just test if the number of argument is equal or   more than the parameters we have. 
//  {@code processing hack} 
//  br: the old logic seems to add static to all def f().... in a script, which makes enclosing   inner classes (including closures) in a def function difficult. Comment it out. 
//  any keyword   any symbol   strings, numbers, identifiers   integers and decimals   "+", "-"   true, false, null   true, false   void, byte, short, int, etc.   any PRIMITIVE_TYPE except void   do, while, etc.   const, goto, etc.   keywords that can appear as identifiers   any of the SYNTH types 
//  assertFailed called static with 2 arguments  
//  first, we must check the 'with' context 
//  set assertionTracker to null to deactivate AssertionWriter#record calls 
//  we only do check abstract classes (including enums), no interfaces or non-abstract classes 
/*      * The cached fast hashCode (once calculated)      */
//  init table 
//  choose an arbitrary method to display an error message 
//  GROOVY-7876: when comparing for equality we try to only call compareTo when an assignable   relationship holds but with a container/holder class and because of erasure, we might still end   up with the prospect of a ClassCastException which we want to ignore but only if testing equality 
//    one of the BAND tokens is actually replaced by TYPE_UPPER_BOUNDS (e.g. class Foo<T extends C & I> {T t} ) 
//  execute Method 
//  Write out the threshold, loadfactor, and any hidden stuff 
//  create a temporary variable to store the constructed object 
//  if origChar and withoutCustomHandle 
//  No elements match GPath expression - do nothing 
//  ClassHelper.classes minus interfaces, abstract classes, and classes with private ctors 
//  ret starts with the original type specs, now add gts for the current method if any 
//  ignore interception and missing method fallback 
//  declare a static variable to be able to continue the check 
//  direct access is allowed if we are in the same class as the declaring class   or we are in an inner class 
//  can be replaced with a direct constructor call 
//  GROOVY-5802 IAE for missing properties with classes that extend List 
//  it might directly annotate a class, e.g. Specification in Spock 2 
//  GROOVY-6099: restore assignment info as before the if branch 
//  add method:   boolean removePropertyChangeListener(listener) {      return this$propertyChangeSupport.removePropertyChangeListener(listener); 
/*      * Load a possibly filtered path. Filters are defined     * by using the * wildcard like in any shell.      */
//  since Java has no Closures... 
//  every other subsequent visit use an escaping $ 
//  create method void <setter>(<type> fieldName) 
//  GROOVY-7647 
//  the verifier created the field and the setter/getter methods, so here is   not really something to do 
//  @Lazy not meaningful with primitive so convert to wrapper if needed 
//  8K at a time 
//  output AST in format suitable for opening in http://freemind.sourceforge.net 
/* Boolean[1] */
//  Unexpected node type: TYPE_PARAMETERS found when expecting type: OBJBLOCK   fails after parser 
//  ensure we try to unbox null to cause a runtime NPE in case we assign    null to a primitive typed variable, even if it is used only in boxed  
//  $Id: hash.java,v 1.1 2004-05-23 05:06:51 bfulgham Exp $   http://www.bagley.org/~doug/shootout/ 
//  e.g. BinaryOperator extends BiFunction, BinaryOperator contains no abstract method, but it is really a SAM 
//  LEFT_SHIFT               280   RIGHT_SHIFT              281   RIGHT_SHIFT_UNSIGNED     282 
//  for compound assignment "x op= y" find type as if it was "x = (x op y)" 
//  fail fast! if we got a malformed URI the Classloader has to tell it 
// the below params are:    _p - parent class, for handling exceptions    _s - sections, string sections list    _b - binding map    out - out stream  the three first parameters will be curried in as we move along 
//  the URI has a false format, so lets try it with files ... 
//  load configuration file 
//  ab -> ba 
//  GROOVY-6970 choose between equivalent interface methods 
//  end::java_method_selection_head[] 
//  The data store and its maximum capacity 
//    RELEVANT WHITESPACE 
/*  The keys  stored in the map.  */
//  A script's contextual constructor should call it's super class' contextual constructor, if it has one.   In practice this will always be true because currently this visitor is run before the AST transformations 
//  have here to ensure it won't be the inner class 
//  heuristic size to pre-alocate stringbuffers for collections of items 
//  TODO: GROOVY-6561: GroovyMain got the name this way: script.substring(script.lastIndexOf("/") + 1) 
/*  The Computer Language Shootout   http://shootout.alioth.debian.org/   contributed by Josh Goldfoot   based on the Nice entry by Isaac Guoy */
/*  (non-Javadoc)         * @see groovy.lang.MetaMethod#getName()          */
//  method body missing   declaration cannot be overridden   a native code entry point   property should not be persisted   compiler should never cache property 
//       @     A     B     C     D     E     F     G 
//  GROOVY-3311: pre-defined constants added by groovy compiler for numbers/characters should be   initialized first so that code dependent on it does not see their values as empty 
//  we are facing a self referencing type ! 
//  there must be two continuation bytes of the form 10xxxxxx,   otherwise the following character is is not a valid UTF-8 construct 
//  return type 
//  Select a constructor from our class, or super-class which is legal to call,   then write out an invoke w/nulls using casts to avoid ambiguous crapo 
//  Handle other Number implementations 
//  the return type of the SAM method exactly corresponds to the inferred return type 
//  no need for 'def' if in a parameter list 
//  block = init code for the constructor we produce 
//  integer overflow 
//  nothing to really test here...just looking for debug that says it   used cache version 
//  todo: more cases 
//    To support delta compilations, we always restart   the compiler.  The individual passes are responsible   for not reprocessing old code. 
// load normal arguments as array 
//  if no byte with an high order bit set, the encoding is US-ASCII 
/*      * TODO: remove optimization of this.foo -> this.@foo     *      */
//  Expand enough to hold at least n elements without resizing.   We can only resize table by factor of two at a time.   It is faster to rehash with fewer elements, so do it now. 
//  =~   ==~   ~ 
//  create values field 
//  we need no security check for getting the system class   loader since if we do the invoker has a null loader,   in which case no security check will be done 
//  at this point the receiver will be already on the stack.   in a[1]++ the method will be "++" aka "next" and the receiver a[1] 
//  use default expression 
//         ASMifierClassVisitor.main(new String[]{"target/classes/org/codehaus/groovy/runtime/callsite/PogoMetaMethodSite.class"});          ASMifierClassVisitor.main(new String[]{"target/test-classes/spectralnorm.class"});          ASMifierClassVisitor.main(new String[]{"target/test-classes/groovy/bugs/CustomMetaClassTest.class"}); 
//  check module node import packages 
//  we won't get here if we are a PrintWriter 
//  constructors are not distinguished from methods in java ast 
//  cut original string in tabstop-length pieces 
//  GROOVY-6099: First element of the list may be null, if no assignment was made before the branch 
//  stack: closure, type   for a constructor call we need the type two times 
//  we compile b?x:y as         boolean(b)?S(x):S(y), S = common super type of x,y   so we load b, do boolean conversion.    In the true part load x and cast it to S,    in the false part load y and cast y to S  
/*  6: short   */
//  anything other than 0 
//  run the script numIter times 
//  return result list 
/*  checks if all needed classes are compiled before generating the bytecode  */
//  call closure 
//  check direct match 
//  the call on 
//  throw new IOException(file.getAbsolutePath()); 
//  +=   -=   *=   /=   \=   %=   **= 
// when we get exceptions from the parseXXX methods in the main loop, we might try to  re-finish a section 
//  Lazily initialized and loaded, should be accessed internally using getMap() 
//  includes another Groovy template   includes raw content, escaped before rendering 
//  fallback option as ClassLoader#findResource() is protected 
/*  if it has been chopped then you have to return.  */
//  now let's visit the contents of the class 
//  can be added for only for new transforms that have come in  
//  append to right side of Li3 (preserving order) 
//  fill all gaps 
//  method is in current class, nothing to be done 
//  warning: treating Java chars as "String" in Groovy 
// noop  white 
//  Find largest index j with a[j] < a[j+1] 
//  2nd arg false below: though not usual, allow setter with non-void return type 
//  The location in the buffer is chosen in a racy fashion as the increment   is not atomic with the insertion. This means that concurrent reads can   overlap and overwrite one another, resulting in a lossy buffer. 
//  actual step, can be +1 when desired step is -1 and direction is from high to low 
//  if this is not a generics placeholder, first compare that types represent the same type 
//  aab -> baa   baab   baa 
//  lets test out the class verifier 
//  may use this visitor without the annotation being explicitly set 
// -- Internals only below this point 
/*  multiply vector v by matrix A transposed  */
/*  * <p>This AST transformer is responsible for modifying a source template into something which can be compiled as a * {@link groovy.text.markup.BaseTemplate} subclass.</p> * <p/> * <p>It performs the following operations:</p> * <p/> * <ul> <li>replace dynamic variables with <i>getModel().get(dynamicVariable)</i> calls</li> <li>optionally wrap * <i>getModel().get(...)</i> calls into <i>tryEscape</i> calls for automatic escaping</li> <li>replace <i>include * XXX:'...'</i> calls with the appropriate <i>includeXXXX</i> method calls</li> <li>replace <i>':tagName'()</i> calls * into <i>methodMissing('tagName', ...)</i> calls</li> </ul>  */
/*  The Computer Language Shootout   http://shootout.alioth.debian.org/   contributed by Keenan Tims   modified by Michael Barker */
//  if all remaining exceptions are used in the stub we are good 
//  Read in size (number of Mappings) 
// / it seems attractive to want to do this for more cases but perhaps not all cases 
//     private Integer fastHashCodeCache = null; 
//  add static missing method dispatcher 
//  ignore errors which are related to unknown source locations   because they are likely related to generated code 
//  myMethod {... 
//  stores if implicit or explicit this is used. 
//  A."this" assumes a VariableExpression can be used for "this"   we correct that here into a ConstantExpression 
//  possibly an inner class (or inherited inner class) 
//  todo - If no comment before node, then get comment from same node on parent class - ouch! 
//  modify the Java AST into a Groovy AST (just token types) 
//  if-else is here handled as a special version   of a boolean expression 
//  getTarget(var) can be null in buggy xform code, e.g. Spock 
//  Clear hardrefs and gc() 
//  myMethod(a,b) 
//  available variables on stack 
//  size() in the Collection interface returns an integer, so ranges can have no more than Integer.MAX_VALUE elements 
//  we decided if we have a vanilla name starting with a lower case   letter that we will not try to resolve this name against .*   imports. Instead a full import is needed for these.   resolveAliasFromModule will do this check for us. This method   does also check the module contains a class in the same package   of this name. This check is not done for vanilla names starting 
//  close possibly open file handles from getting a sample for  
//  No size() method, so let's just check a few keys we that should have been collected 
//    Prepare the response buffer content type _before_ getting the writer.   and set status code to ok 
//  declaration was replaced by assignment so we need to define the variable 
//  applied to "[" that marks a list   applied to "[" that marks a map   a complete GString 
//  process each node in turn 
//  if the annotation attribute has a default, getCode() returns a ReturnStatement with the default value 
//  to extract the parameters. 
//  html output of AST 
//  this is only needed since the Groovy Build compiles *.groovy files after *.java files 
// LOGME? 
//  store it into tmp variable 
/*  duplicated with DateUtilExtensions.toCalendar() but we don't want modulkes to depend on one another  */
//  Copy the required nodes into a new list. 
//  only final modifier allowed 
//  replace call with an invoker helper call 
//  fall through 
//  Check and ignore empty statements 
//  save all current closures into global closures map 
//  works in a two pass sequence and we don't want to skip the second pass 
/*  The Computer Language Shootout   http://shootout.alioth.debian.org/   contributed by Josh Goldfoot   modified by Isaac Gouy */
//  replace the existing code block with our new one 
//  closure within inner class 
//  ------------------ Object[] ------------------ 
//  this swaps the two child nodes, see javadoc above for explanation of implementation 
//  we allow auto-coercion here 
//  end::bsf_apply[] 
// runTest("LittleClosureTest.groovy"); 
//  for primitives and their wrapper we use a fixed table here 
//         cache = Collections.synchronizedMap(new LRUProtectionStorage(maxCacheSize)); 
//  Return next permut, by rotating elements [0 - position] one 'step' 
//  fall threw 
//  if necessary deallocate here 
//  Don't cache scripts 
//  type check call as if it was made on component type 
//  saving type of variables to restoring them after returning from block 
/*  ---------------- Eviction Support --------------  */
/*  The directory scanner  */
//                     0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18  19 
//  \n 
//  store exception 
//  (SomeTrait.super).foo() --> SomeTrait$Helper.foo(this) 
//  Identify type of collection 
//  pop the first context 
// GROOVY-7151 
/*  (non-Javadoc)     * @see groovy.lang.MetaClass#invokeMethod(java.lang.Object, java.lang.String, java.lang.Object[])      */
// SAM check 
//  replaced with AST transformations 
//  something slightly less cryptic than a NoSuchMethodError or an IncompatibleClassChangeError 
//  ------------------------------------------------ 
//  By default, Implement TableModel by forwarding all messages   to the model. 
//  second visit of node 
//  The variation in the pattern is isolated 
//  visitNullTreeLookahead     not used explicitly by parser. 
//  first, direct access from within the class 
//  return types 
//  lookup in DGM methods too 
//  at this point the loading from a parent loader failed 
//  all are of type Object, so generics are useless 
//  We can't use the same tactic as for intersection   since AbstractCollection only does a remove on the first   element it encounters. 
//  applied to an identifier that specifies 
//  visitDigit ...      never created/visited 
//  in that case, we are facing a list constructor assigned to a def or object 
//  If source doesn't know how to get a reference to itself, 
//  get the getter method 
//  meta.optimize -> can do fast path 
//  earlier output differs from input; we write to our local buffer 
//  VetoableASTTransformation will handle both @Bindable and @Vetoable 
//  package private is the only modifier left. It means  same package is allowed, subclass not, same class is 
//  this is an imperfect solution to determining if two methods are   equivalent, for example String#compareTo(Object) and String#compareTo(String)   in that case, Java marks the Object version as synthetic 
//  enum Foo(THESE,ARE,THEY) 
//  equal in terms of an assignment in Java. That means according to Java widening rules, or   a subclass, interface, superclass relation, this case then handles also  
//  Optimization: skip invalid propertyNames 
//  NOTE: must be changed to "1 |" if constructor was vargs 
//  to the target methods. Such a method cannot be abstract or a bridge 
//  Trait SAM coercion generated proxy using a map to store the closure 
//   Handle release of Insert key to toggle overtype/insert mode    unless a modifier is active (eg Shift+Insert for paste or    Ctrl+Insert for Copy) 
//  ------------------------------   code visit   ------------------------------ 
//  Have one backslash, continue if next char is 'u' 
//  the name might be null if the method name is a GString for example 
//  means we're in middle of mlr, so end is at end of mlr 
//  $Id: methcall.java,v 1.1 2004-05-23 07:14:27 bfulgham Exp $   http://www.bagley.org/~doug/shootout/   Collection class code is from my friend Phil Chu, Thanks Phil! 
//  last, check generic type information to ensure that inferred types are compatible 
//  last to leave, turn out the lights: restore original streams 
//  make sure parameterTypes gets set 
/*  Have we set a next object?  */
//         }          return (Long) primitiveArrayPut(array, idx, newValue);      }        public static Float putAt(float[] array, int idx, Object newValue) { 
//  And add in the methods implemented in this class. 
//  ------------------ char[] ------------------ 
//  other guards here 
//  Unexpected node type: LABELED_STAT found when expecting type: an identifier   fails after parser 
//  find the resolved inner class 
//  a method name can never be a VariableExpression, so it must converted   to a ConstantExpression then. This is needed as the expression   method doesn't know we want a ConstantExpression instead of a   VariableExpression 
//  now adjust the state variables - any early returns won't have gotten here   but we need to check that the same status was observed by all paths 
//  Fallback for non-standard "Script" classes. 
// -------------------------------------------------------------------------                     
//  GROOVY-6757 
//  else nothing to box 
//  TODO M12N eventually defer this until later when we have a full Groovy   environment and use normal Grape.grab() 
//  in order to compute the inferred types of the closure parameters, we're using the following trick:   1. create a dummy MethodNode for which the return type is a class node for which the generic types are the types returned by the hint   2. call inferReturnTypeGenerics   3. fetch inferred types from the result of inferReturnTypeGenerics   In practice, it could be done differently but it has the main advantage of reusing   existing code, hence reducing the amount of code to debug in case of failure. 
//  treat it just like a script if it is one 
//  Only the non-cached type and packages should be cached 
//  workaround for GROOVY-5859: remove generic type info 
//  add catch any block to exception table 
//   } 
//  field undefined 
//  JDK 8 support for default methods in interfaces 
//  todo: unary expressions (field++, field+=, ...) 
//  ignore, this happens with overlapping method definitions 
//  into information for the callsite 
//  GROOVY-6094 
//  get index of parts which are equal 
/*  non-ascii char range  */
//  placeholder aliases, like Map<U,V> -> Map<K,V>                                      redirectBoundType = classNodePlaceholders.get(name); 
//  if original short meta class 
//  ------------------ int ------------------ 
//  then we use the method with the SAM parameter to get more information about the declaration 
//  visitClosureOp ...     token type CLOSABLE_BLOCK_OP never created/visited, see CLOSABLE_BLOCK... 
//  in case of a lookup on Class we look for instance methods on Class   as well, since in case of a static property access we have the class 
//  try some special cases first for efficiency 
//  and that class may have an invalid format we fail here if needed 
//  normal loading of expression 
//  look for one of these:     import static MyClass.prop [as otherProp] 
//  saying List<Integer> 
//  end of if/else 
//  {@literal tag} 
//  the continue statement is only allowed inside loops   fails after parser 
//  if there is no missing return in the finally block and the block exists   there is nothing to do 
//  to leave a copy of the rightExpression value on the stack after the assignment. 
/*  (non-Javadoc)    * @see org.xml.sax.XMLReader#getProperty(java.lang.String)     */
//  The null check is normally not required but done to prevent from NPEs 
//  metaClass still be valid 
//  still working implies classloader set, coverage confirms this 
// find expected method name 
//  load receiver 
/*  (non-Javadoc)     * @see org.xml.sax.XMLReader#setErrorHandler(org.xml.sax.ErrorHandler)      */
//  Include the stubs in the Javac compilation 
//  we are at the end of the input data 
//  the closure map 
//  GROOVY-5063 
//  Nothing added since last delegate execution. No need to call the delegate this time. 
//  add method:   void addPropertyChangeListener(listener) {       this$propertyChangeSupport.addPropertyChangeListener(listener) 
//  top level templates 
//  replace with compareEquals 
//  for methods with primitive types 
/*  (non-Javadoc)    * @see org.xml.sax.ContentHandler#startElement(java.lang.String, java.lang.String, java.lang.String, org.xml.sax.Attributes)     */
//  GROOVY-5521   try to identify a getAt method 
//  when we obtain an interface, the types represented by the interface   class node are not parameterized. This means that we must create a   new class node with the parameterized types that the current class node   has defined. 
// Check both hasResultSet and getMoreResults() because of differences in vendor behavior 
//  for static properties 
//  alternatively, FieldNode timeTagField = SourceUnit.createFieldNode("public static final long __timeStamp = " + System.currentTimeMillis() + "L"); 
//  build the path stack info to compare 
//  when a column heading is clicked in the JTable. 
//  a three-bytes sequence was encountered 
//  if it's not the case, we can assume the encoding is the default encoding of the system 
//  put the receiver inferred type so that the class writer knows that it will have to call a bridge method 
/*      * The following methods are needed for implementing the Map interface.     * They are mostly delegating the request to the provided Map.      */
//  return _result 
//  first we add a super() call for all expressions given in the  
// pop fb 
//  Get the URLConnection 
//  legacy misspelling 
//  create the base list of classes which have possible methods to be overloaded 
// Simple tests 
//  text might be null and indicates no replacement text 
//  add field 
// new Reduction(Tpken.EOF); 
//  loop through classes in tree 
//  constructors should not be treated as errors (they have no real meaning for interfaces anyway) 
//  this may happen if there's a setter of type boolean/String/Class, and that we are using the property   notation AND that the RHS is not a boolean/String/Class 
//  check security manager 
//  normalise 
// GROOVY-4046   GROOVY-7954 
//  float 
//  adds an empty row 
//    foo instanceof MyType 
//  came from a trait 
/*  (non-Javadoc)         * @see groovy.lang.Closure#call(java.lang.Object)          */
//  -1 means a mismatch 
//  optional exception 
//  A buffer is chosen by the thread's id so that tasks are distributed in a   pseudo evenly manner. This helps avoid hot entries causing contention   due to other threads trying to append to the same buffer. 
//  do nothing here, leave it to the normal resolving 
//  below not true for DGM#push and also co-variant return scenarios  && method.getReturnType().equals(m.getReturnType()) 
//  if the input stream is still null, we've not found the extension 
//  metaClass is still valid 
//  can't check synchronized here as it doubles up with ACC_SUPER 
//  For performance reasons test against classNamePattern first 
//  type annotated with @DelegatesTo.Target 
//  let's set the modifiers on the field 
/*  The Great Computer Language Shootout   http://shootout.alioth.debian.org/    contributed by Isaac Gouy */
//  not a problem, the field helpers may be absent 
/*              * Keep logging, if we're verbose. Else turn it off.              */
//  ... solve next 
//  types may be parameterized. If so, we must ensure that generic type arguments   are made compatible 
//  dispatch to factories if it is not a literal method 
//  GROOVY-7330 
//  null == ignore (we have a better method already) 
//  commented out of groovy.g due to non determinisms  case MEMBER_POINTER_DEFAULT:      return defaultMethodPointerExpression(node); 
//  at this point, should *always* stay empty 
//  replicate a little bit of AnnotationVisitor here   because we can't wait until later to do this 
//  does not apply on interfaces 
//     TODO: make this initialization able to set useReflection true    TODO: have some way of specifying another MetaClass Registry implementation   
//  If not specified, we will return the narrowest possible   of Integer, Long, and BigInteger. 
//  general case for single method 
//  dangling comma 
//  legal cases 
//  Read in the threshold, loadfactor, and any hidden stuff 
//  reading the content of the file within a char buffer allow to keep the correct line endings 
//  Generate the loop body 
//  last chance lookup for classes within the current codebase 
//  note: LITERAL_def never created 
//  single declaration 
//  if some transformation decided to generate constructor then it probably knows who it does 
//    SYMBOLS 
//  copy generic type information if available 
//  not a primitive type. We must find a method which is called next 
//  isClosureCall() check verified earlier that a field exists 
// prefer explicit getter or setter over property if receiver is not 'this' 
//   Add to front of list 
//  getProperty 
//  we handle the property part as if it were not part of the property 
// helper.swapWithObject(ClassHelper.OBJECT_TYPE); 
//  default port to listen to 
//  We do not need to check instances of LowerCaseClass   to be a Class, because unless there was an import for   for this we do not lookup these cases. This was a decision   made on the mailing list. To ensure we will not visit this   method again we set a NO_CLASS for this name 
//  now let's use the file name to determine the class name 
// ----------------------------------------------------------------------   turn setProperty on a Map to put on the Map itself 
//  array set: load sub, call arraySet [] 
//  silent 
//  not the same device (would be "" on Linux/Unix) 
//  end ConsoleTextEditor.RedoAction 
//             Number n = (Number) newValue; 
//  explicitly labeled properties are already handled,   don't transform final properties   don't transform static properties   VetoableASTTransformation will handle both @Bindable and @Vetoable 
//  ----------------------- override visit methods to provide contextual information --------------------------- 
//  this method was introduced as to prevent from a stack overflow, described in GROOVY-5285 
//  to move this to a boundary class and then we wouldn't need this test 
//  this can happen if the receiver is Class<Foo>, then   the actual receiver is Foo and declaringClass is Class 
//  avoid files which confuse us like ones with .. in path 
/*  the list might be empty   */
//  correct ls if we have \r\n 
//  original class causing bridge methods for methods in super class 
//  if original Byte meta class 
/*          * Bind the HTTP session object - if there is one.         * Note: we don't create one here!          */
//  check if the name is actually an aliased type name 
//  grab existing meta (usually adaptee but we may have nested use calls) 
//  closestClass and theType are not in a subtype relation, we need   to check the distance to Object 
//  TODO we could support some default vals provided they were listed last 
//  Divisions may produce different results depending on operand types 
/* <JMenu> */
/* Long[11] */
//  Implementation methods  -------------------------------------------------------------------------                     
//  Quick way to get "1.0". 
//  vargs? 
//  it's an assignment 
/*  (non-Javadoc)        * @see java.io.Writer#write(char[], int, int)         */
//  code doesn't mention the removed param at this point, okay to leave as is 
//  we may have to add additional elements here 
//  the class nodes are on different types   in this situation, we must choose the correct execution path : either the bound   is an interface and we must find the implementing interface from the classnode   to compare their parameterized generics, or the bound is a regular class and we   must compare the bound with a superclass 
//  if the matching offset is not the same as the end of the    previous match, we have extra text not matched, so set to  
//  we only need to check the variable name because the Groovy compiler   already fails if a variable with the same name already exists in the scope.   this means that a closure cannot shadow a class variable 
/*  (non-Javadoc)     * @see java.lang.Object#hashCode()      */
// placeholder to assist in rotating vals 
//  fails after parser   empty ELIST 
//  The File from which we produce Readers. 
//  equal class with one maybe a primitive, the later explicitCastArguments will solve this case 
//  invoke directly 
//  Uses annotation type declared in Java,   instantiates annotation closure using pure Java APIs (no GDK),   triggers stub generation for class JavaCompatibility 
//  don't check synchronized here as it overlaps with ACC_SUPER 
//  resolve constructor parameter types 
//  =====================================================   STANDARD FONTS   ===================================================== 
//  let's do the catch nodes 
//  it's an instance; check if it's a Java one 
// --------------------------------------------- 
//  FooAdapter imports both api.Foo and lib.Foo, using "lib.Foo as FooImpl" to disambiguate. 
//  dirs 
//  COMPARE_NOT_EQUAL            120   COMPARE_IDENTICAL            121    COMPARE_NOT_IDENTICAL        122   COMPARE_EQUAL                123   COMPARE_LESS_THAN            124   COMPARE_LESS_THAN_EQUAL      125   COMPARE_GREATER_THAN         126   COMPARE_GREATER_THAN_EQUAL   127 
//  do modified visit 
//             val.setValue(Boolean.TRUE);          } 
//  start with methods from the parent if any 
//  visitMlComment     multi-line comments are not created on the AST currently. 
//  no processing if existing constructors found unless forced or ImmutableBase in play 
//  Ensures not adding any regexp with capturing groups 
//  any further use of that variable can trigger uninitialized ot not final errors 
//  ------------------- codecs for method return type signatures ------------------------------ 
//  import can be used only as top level element 
//  let's convert to an int 
//  only add guard to methods of the form: logVar.logMethod(params) 
//  initialize the lexer if necessary 
//  to aid explicitCastArguments we convert to the wrapper type to let is only unbox 
//  don't check volatile here as it overlaps with ACC_BRIDGE   additional modifiers not allowed for interfaces 
//  cached class 
/* short[4] */
// clean up assertion recorder 
//    flush the response buffer. 
//  current scope 
//  make a public method if none exists otherwise try a private method with leading underscore 
/*  && !specialNamedArgCase */
//  method has already been visited by a static type checking visitor 
//  generate closure as public class to make sure it can be properly invoked by classes of the 
//  default case 
//  add static value():Object[][] method 
//  we need to resolve again! 
//  add the ability to parse scripts with a specified encoding 
// ----------------------------------------------------------------------   field 
//  anything   anything but EOF   ";", "\n", EOF   ";", "\n", EOF, "}" 
//  dispatching to EmptyStatement will not call back visitor,   must call our visitEmptyStatement explicitly 
//  identical types 
//  transformation has already been run on this class node   so we'll use a silent collector in order not to duplicate errors 
//  ignore as we are re-throwing the original cause 
//  if we don't have access to the system clipboard, will throw   a security exception 
//  GROOVY-6357 : The JVM does not allow private modifier on inner classes: should be package private 
//  look for @Field 
//  if there is a property of that name, then a field of that   name already exists, which means this new field here should   be used instead of the field the property originally has. 
//  lets call the closures now 
//  $Id: hello.java,v 1.3 2007-06-20 03:32:39 bfulgham Exp $   http://shootout.alioth.debian.org/ 
/*  If the internal map was not create yet, don't. We can chop the value w/o creating the internal map. */
//  always use the expando properties first 
//  first, short circuit 
//  AsmClassGenerator may create "this" expressions that the type checker knows nothing about 
//  this will trigger the call to VMPlugin#configureClassNode(CompileUnit,ClassNode) 
//  PIECES 
//  access to a private field from a section of code that normally doesn't have access to it, like a   closure or an inner class 
//  ignore it 
//  Preserve insertion order 
//  We use here the class cache cachedClasses to prevent   calls to ClassLoader#loadClass. Disabling this cache will   cause a major performance hit. 
/* isNested: */
//  wrap call in an IFNULL check 
//  int, Integer 
//  only descend if we have annotations to look for 
//  Object fits all, so simple dispatch rule here 
//  void   boolean   1 byte integer   2 byte integer   4 byte integer   8 byte integer   32 bit floating point number   64 bit floating point number   unicode character code 
//  this is a precompiled class! 
//  we match only on the number of arguments, not anything else 
/*  7: float   */
//  let's call the collections constructor   passing in the list wrapper 
//  maybe possible to have this true in joint compilation mode 
//  create base createCallSiteArray method 
//  obsolete java syntax 
/*  discard first  */
//  make cached call for given method 
/*  ******** java.time.ZoneId extension methods ********  */
//  Precondition: accessorName.length() > prefixLength 
//  uh-oh, we're in unicode country.... 
//  equality check is enough and faster than instanceof check, no need to check superclasses since Boolean is final 
//  List<Foo> l = new List() is an example for incomplete generics type info 
//  find longhand since the annotation from earlier versions is now a meta annotation 
//  finally public and inherited 
//  it was not null and not boolean, so call asBoolean 
//  ignore instantiation errors,, try to do main 
//  greater than a[j] to the right of a[j] 
//  remove @endMarker 
/* Method[] */
/*     *  when InnerClassVisitor adds this.this$0 = $p$n, it adds it as a BlockStatement having that    *  ExpressionStatement     */
// ---------------------------------------------                    float  --------------------------------------------- 
/*                              * GROOVY-3985: Remove the final modifier from $INIT method in this case                             * so that subclasses of enum generated for enum constants (aic) can provide                             * their own $INIT method                              */
//  can't access the field directly but there may be a getter 
//  return arg0.prop <=> arg1.prop; 
/*       * Check SecuritySupport to see if security is properly configured.  If not, fail the first      * test that runs.  All remaining tests will run, but not do any security checking.       */
//  addMethod will ignore attempts to override abstract or static methods with same signature on self 
//  fixed number of arguments && name is a real String and no GString 
//  This method should be called by CallSite only 
//  note: there is no coercion for boolean and char. Range matters, precision doesn't 
//  nor the interfaces 
/*  GROOVY-8609  */
// ----------------------------------------------------------------------   turn getProperty on a Map to get on the Map itself 
//  math methods used by indy 
//  register an attribute change notification listener with model mbean 
// start 
//  visitLiteralImplements     token type "implements" only used by parser, never visited/created directly 
//  This fixes xform declaration expressions but not other synthetic fields which aren't set up correctly 
//  check non-braced single statement 
//  in the case that there is already a field, we would   like to use that field, instead of the default field 
/*  (non-Javadoc)     * @see groovy.util.BuilderSupport#createNode(java.lang.Object, java.util.Map, java.lang.Object)      */
//  now check for closure override 
//  the vargs argument is missing, so fill it with an empty array 
//  do nothing and fall back to the other version 
//  This solution is based on an absolute path 
//  remove "L" and ";" 
//  load main Closure 
//  then the array version should be preferred 
//  make sure to/from are swapped 
//  we need to create a curried closure version 
//  reset any out of bounds requests (again) 
//  do not return here and try all static star imports because currently we do not know which outer class the class to resolve is declared in 
//  --------------------------------------------------------------- 
//  return 
//  for arguments, we need to visit closures *after* the method has been chosen 
//  prime the parser and reparse whole document 
//  phase operations for this transform class have already been added before, so remove from current scan cycle 
//  if origByte and withoutCustomHandle 
//  helper to handle different stack based variables 
/*      * Constructor used by makeArray() if no real class is available      */
//  have to compile regexp first so that it will match 
//  check if a super class has @Vetoable annotations 
//  long x long 
//  The styled document the filter parses 
//  Discard all entries 
//  isCase methods  ------------------------------------------------------------------------- 
//  superclasses are on distinct hierarchy branches, so we 
//  will handle :        * collection case where argument is an array        * array transformation (staticTargetType.isArray())        * constructor invocation 
//  if the sam type or closure type do not provide generics information, 
/*  (non-Javadoc)     * @see java.lang.Object#clone()      */
//  don't forget to tell the class about this default constructor. 
//  as charAt which is very expensive for large GStrings. 
/*  backslash  */
//  set up method listeners (such as attributeListener and Operation Listeners)   item -> [Map[methodListener:[target:"", tpe:"", callback:&Closure], ... ,]] 
//  Do NOT trust the type of the property node! 
// return null; 
//  "Interfaces and Traits" section should show "Foo" as one of the implemented interfaces, 
//   --------------------------------------------------------                Property handling super: set    -------------------------------------------------------- 
//  visit condition leave boolean on stack 
//  Configuration data 
/*         currentKey and currentValue are set here to ensure that next()        returns normally if hasNext() returns true. This avoids        surprises especially when final element is removed during        traversal -- instead, we just ignore the removal during        current traversal.         */
//  in order to avoid calls to castToType, which is the dynamic behaviour, we make sure that we call CHECKCAST instead   then replace the top operand type 
// nothing to really test here...just looking for debug that says it   used cache version 
//  so we can print a page number 
//  TimeZone is only hours and minutes--no seconds 
//  prepare call 
//     @Override 
//  Outer.this for any level of nesting 
//  remove methods which should not appear in the trait interface 
//  object type 
// puts ("key with quote", key); 
//  look into cache 
//  MetaClassImpl not designed for modification, just return false 
//  add a super call 
//  finally, if it's not UTF-8 nor US-ASCII, let's assume the encoding is the default encoding 
//  found a \r or \n, like on Mac or Unix   could also be Windows' \r\n 
//    Get the template source file handle. 
//    Requested script/template file has been target of    RequestDispatcher.include(). Its path is assembled from the relevant   javax.servlet.include.* request attributes and returned!   
// out.print("<" + t.getType() + ">"); 
//  generate a field node 
//  $Id: matrix.java,v 1.1 2004-05-23 07:14:27 bfulgham Exp $   http://www.bagley.org/~doug/shootout/   modified to use a little less memory by Thomas Holenstein 
/*             areReversed() already does an implicit type compatibility check            based on DefaultTypeTransformation.compareToWithEqualityCheck() for mixed classes            but it is only invoked if reverse == null.            So Object Range has to perform those type checks for consistency even when not calling            compareToWithEqualityCheck(), and ObjectRange has            to use the normalized value used in a successful comparison in            compareToWithEqualityCheck(). Currently that means Chars and single-char Strings            are evaluated as the char's charValue (an integer) when compared to numbers.            So '7'..'9' should produce ['7', '8', '9'], whereas ['7'..9] and [7..'9'] should produce [55, 56, 57].            if classes match, or both numerical, no checks possible / necessary         */
//  add a helper annotation indicating that it is a bridge method 
/*          * Bind form parameter key-value hash map.         *         * If there are multiple, they are passed as an array.          */
//  this allows to override the commandline conf 
//  normal assignment 
//  TODO: support older parser attribute values as well 
// puts ("key", "#" + key + "#", value); 
/*              * Null cause?!              */
//  create MIN_VALUE and MAX_VALUE fields 
//  controller.isFastPath() -> fastPath 
//  Static methods only 
//  check if recompilation already happened. 
//  Regex 
//  evaluate parameters 
//  GROOVY-xxxx 
//     private Integer canonicalHashCodeCache = null; 
// STRING          ( "a string",                           Pattern.compile("\"([^\"\\\\]*|\\\\[\"\\\\bfnrt\\/]|\\\\u[0-9a-fA-F]{4})*\"", Pattern.DOTALL)); 
//  Copied from org.apache.tools.ant.Task, since we need to get a real thing before it gets nulled in DispatchUtils.execute 
// Number.class, 
//  Use "double delta=Math.sqrt(Math.ulp(1.0))" with Java 1.5 or better 
//  no parent super class representing both types could be found   or both class nodes implement common interfaces which may have   been parameterized differently.   We must create a classnode for which the "superclass" is potentially parameterized   plus the interfaces 
/*  (non-Javadoc)     * @see org.xml.sax.XMLReader#setDTDHandler(org.xml.sax.DTDHandler)      */
/*              we will actually do                   (x < y) ? -1 : ((x == y) ? 0 : 1)          which is the essence of what the call with Number would do          this compiles to something along                        <x>              <y>              LCMP              IFGE L1              ICONST_M1              GOTO L2          L1              <x>              <y>              LCMP              IFNE L3              ICONST_0              GOTO L2          L3              ICONST_1          L2                    since the operators are already on the stack and we don't want          to load them again, we will instead duplicate them. This will          require some pop actions in the branches!                        DUP4          (operands: L1L2L1L2)              LCMP                        IFGE L1       (operands: L1L2)              ICONST_M1     (operands: L1L2I)              GOTO L2          L1              -----         (operands: L1L2)              LCMP              IFNE L3       (operands: -)              ICONST_0      (operands: I)              GOTO L2          L3              - jump from L1 branch to here (operands: -)              ICONST_1      (operands: I)          L2            - if jump from GOTO L2 we have LLI, but need only I          - if from L3 branch we get only I                    this means we have to pop of LL before loading -1                    since there is no DUP4 we have to do this:            DUP2_X1            POP2            DUP2_X1            DUP2_X1            POP2            DUP2_X1                   */
/*      * These runners were originally included directly in GroovyShell.     * Since they are part of core they are added directly to the     * GroovyRunnerRegistry rather than via a provider configuration     * file in META-INF/services. If any of these runners are moved     * out to a submodule then they should be registered using the     * provider configuration file (see groovy-testng).     *     * These are internal classes and not meant to be referenced     * outside of the GroovyRunnerRegistry.      */
//  For a special constructor call inside a constructor we don't need   any result object on the stack, for outside the constructor we do.   to keep the stack height for the able we kept one object as dummy 
//  used _everywhere_ , lets assume that the other specific   testcases include enough ident usage for now. 
//  should never happen, as a file with no content   but with a BOM has at least one char 
//  so first we remove hidden generics 
//  handle different states for the implicit "this" 
//  filename or content of script 
/* double[15] */
//  a common super type exists, all we have to do is to parameterize   it according to the types provided by the two class nodes 
//  half the default stream buffer size   double the default line length   End Of File 
//  Not a (get/set/is) method that contains a property name 
//  GROOVY-8562   when vexp has the same name as a property of the owner,   the IMPLICIT_RECEIVER must be set in case it's the delegate 
//  close the ring: 
// <ARRAY_DECLARATOR>int</ARRAY_DECLARATOR> primes = new int(<ARRAY_DECLARATOR>5</ARRAY_DECLARATOR>) 
//  save copy for later 
//  create an empty arraylist 
//  GROOVY-8881: cater for closures within closures - getThisObject is already outer class of all closures 
//  let's register the default methods 
//  each found connection must comply with already found connections 
//  want this synthetic constructor to show up in corbertura reports 
//  Attempts to evict entries from the map if it exceeds the maximum   capacity. If the eviction fails due to a concurrent removal of the   victim, that removal may cancel out the addition that triggered this   eviction. The victim is eagerly unlinked before the removal task so   that if an eviction is still required then a new victim will be chosen   for removal. 
//  visit RHS first for expressions like a = b = 0 
/* Number[18] */
//  Reset start if new buffer 
//  "." is used to transfer compilation dependencies, which will be   recollected later during compilation 
//  if a positive index is accessed not initialized so far   initialization up to that index takes place 
//  Seems wrong but otherwise some tests fail (e.g. TestingASTTransformsTest) 
// if s_i and t_i don't have have the same case 
//  styleMap, then set the attributes of the matching string 
// ---------------------------------------------------------------------------    // SOURCE SAMPLING 
//  annotation to the method node 
//  all arguments were null 
/*  0: dummy   */
//  -1 because the varg part is optional 
//  test integers 
//  pop for "makeBlockRecorder(finallyStatement)" 
//  would happen if you have a raw Map type for example 
//  a ClassNode superclass for an interface is not   another interface but always Object. This implies that   "extends" for an interface is understood as "implements"   for a ClassNode. Therefore, even if b doesn't implement   interface a, a could "implement" other interfaces that b   implements too, so we must create a list of matching interfaces 
//  iterates through s   iterates through t 
//  check for a public/protected getter since JavaBean getters haven't been recognised as properties   at this point and we don't want private field access for that case which will be handled later 
//  not in java   not in java   not in java 
//  rotate down perm[0..prev] by one 
//  Note: old closure syntax using BOR is deprecated, and also never creates/visits a BOR node 
//  lets check the parameter types match 
//  the default style of this lexer node 
//  if no invalid UTF-8 were encountered, we can assume the encoding is UTF-8, 
//  perhaps overkill but let compareTo be based on hashes for commutativity   return this.hashCode() <=> other.hashCode() 
//  ---------------------   feature: 'threadsafe' 
//  if we reach this point we have at least one parameter or return type, that 
//  list containing finally blocks   such a block is created by synchronized or finally and 
//  now that a method has been chosen, we are allowed to visit the closures 
//  long 
//         CheckClassAdapter.verify(new ClassReader(b), true, new PrintWriter(System.err)); 
//  category method needs Thread check   cases:   (1) method is a category method       We need to check if the category in the current thread is still active.       Since we invalidate on leaving the category checking for it being       active directly is good enough.   (2) method is in use scope, but not from category       Since entering/leaving a category will invalidate, there is no need for any special check   (3) method is not in use scope /and not from category       Since entering/leaving a category will invalidate, there is no need for any special check 
//  leaf nodes that haven't been coloured yet 
// increment acc if it hasn't been incremented in the current iteration 
//  if the call expression is a spread operator call, then we must make sure that 
//  GROOVY-5566 
/*  (non-Javadoc)         * @see groovy.lang.GroovyObject#getProperty(java.lang.String)          */
//  visit TripleDot, not used in the AST 
// can't use treeset since the base classes are different 
//  verify component type, but if we reach that point, the only possibility is that the argument is   the last one of the call, so we're in the cast of a vargs call   (otherwise, we face a type checker bug) 
//  Handle String, StringBuilder, GString and other CharSequence implementations 
//  optimization path 
//  current class details 
//  we have to use doMethodInvoke here instead of simply invoke,   because getMetaMethod may provide a method that can not be called   without further argument transformation, which is done only in    doMethodInvoke 
//  this assumes LIST_CONSTRUCTOR set by PreJava2GroovyConvertor 
//  end::bsf_simple[] 
//  check package this class is defined in. The usage of ConstructedClassWithPackage here   means, that the module package will not be involved when the   compiler tries to find an inner class. 
//  make sure Map#getAt() and List#getAt handled with the bracket syntax are properly compiled 
//  find first { 
//  add method:   void firePropertyChange(String name, Object oldValue, Object newValue) {       this$propertyChangeSupport.firePropertyChange(name, oldValue, newValue) 
//  add node metadata for default parameters because they are erased by the Verifier 
//  Grab processing may have brought in new AST transforms into various phases, process them as well 
//  These fields provide support to bound the map by a maximum capacity 
//  ... or more relaxed?   configuration = CompilerConfiguration.DEFAULT; 
//  GROOVY-5681 and GROOVY-5632 
//  all properties are also always fields 
//  make the class abstract also see Effective Java p.152 
//  generated by the compiler yet (generated by the Verifier) 
//  ++   ++   ++   + 
//  add default constructor to doc   name of class for the constructor 
//  this is the counterpart of addThisReference(). To non-static inner classes, outer this should be 
//  A fast-path removal 
//  modify the Java AST into a Groovy AST 
//  primitive types must be boxed 
//  sort in a new list to prevent side effects 
//  we can't just remove from the update set,   because we may be local or global, the path knows 
//  empty 
//  If both values are null return 0 
//  save original streams 
//  don't make static accessors final 
//                     cacheStaticMethod(key,metaMethod); 
//  the value isn't use in the getOrPut call - see the EntryWithValue constructor above 
//  TODO 
// GROOVY-3711: The following call now results in a valid script class node, so foo.Bar needs to get resolved. 
//  use primitives for efficiency 
//  variable is not on stack because we are   inside a nested Closure and this variable   was not used before   then load it from the Closure field 
//  we already know parameter length is bigger zero and last is a vargs   the excess arguments are all put in an array for the vargs call   so check against the component type 
/*  (non-Javadoc)      * @see groovy.lang.GroovyObject#setProperty(java.lang.String, java.lang.Object)       */
//  0 means a direct match 
//    Recurse for inner classes 
//  replace all calls for super with the correct MOP method 
//  case of: def foo = new HashMap<>() 
// ---------------------------------------------       custom meta class creation handle  --------------------------------------------- 
//  $Id: nestedloop.java,v 1.1 2004-05-23 07:14:28 bfulgham Exp $   http://www.bagley.org/~doug/shootout/ 
//  premature end of the object 
// runTest("ClosureMethodTest.groovy");  runTest("tree/VerboseTreeTest.groovy"); 
//  visit Unused "const", "do", "goto" - unsurprisingly these are unused by the AST. 
//  move from super class to interface; 
//                     storeType(pexp, setterMethod.getParameters()[0].getType()); 
//  For querying, ignore all errors   Warning indicates likely error   Warning indicates possible error   Warning indicates paranoia on the part of the compiler 
//  = assignment 
//  block to monitor for exceptions   catch block for a particular exception   block to always execute on exit of the try   statement to throw an exception   method modifier to declare thrown transactions   alternate throw for code invariants 
/*  Return only directories?  */
/*                 class B extends A {}                Animal foo(A o) {...}                Person foo(B i){...}                B  a = new B()                Person p = foo(b)              */
//  Read until the appropriate line number. 
//  this may happen when a variable declaration type is wider than the subsequent assignment values   for example :   def o = 1 // first, an int   o = 'String' // then a string   o = new Object() // and eventually an object !   in that case, the INFERRED_TYPE corresponds to the current inferred type, while   DECLARATION_INFERRED_TYPE is the type which should be used for the initial type declaration 
//  Implementation note: By default Groovy uses soft references to store MetaClass   this insures the registry doesn't grow and get out of hand. By doing this we're   saying this this EMC will be a hard reference in the registry. As we're only   going have a small number of classes that have modified EMC this is ok 
//  ----------------------------------------------------   feature?: allow break/continue with value from loops? 
//    Factory access   
//  print the text with its own routines 
//  load array: load x and DUP [load sub, call arrayGet, load b, call operation, load sub, call arraySet]  
//  arguments 
//  TODO: add vargs handling 
//  output differs from input; we write to our local buffer 
//  if the object expression is a closure shared variable, we will have to perform a second pass 
//  let's create a ScriptReference to pass into the closure 
//  file.exists() might be case insensitive. Let's do   case sensitive match for the filename 
//  We don't allow a static context (e.g. a static method) to access   a non-static variable (e.g. a non-static field). 
//  ex: (char) 'c' 
//   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4   "1 9 9 4 - 1 1 - 0 5 T 0 8 : 1 5 : 3 0 - 0 5 : 0 0 
//  GROOVY-6921: We must force a call to getType in order to update closure shared variable whose   types are inferred thanks to closure parameter type inference 
//  to close sockets gracefully etc... 
//  only repaint the line numbers in the gutter when the document has changed   in case lines (hence line numbers) have been added or removed from the document 
//  pop for the variable 
//  a more specific interface exists in the list, keep it 
//   PLUS        200    MINUS       201    MULTIPLY    202    DIV, (203) but we don't want that one    INTDIV      204    MOD         203 
//  if we reach here, we have an unhandled case  
//  capture ant's output so we can verify the effect of passing compilerarg to javac 
//  remove all old entries including the "." entry 
//  This test ensures that value != this If you ever change this ensure that value != this 
// ----------------------------------------------------------------------   executing the getter method 
//  there must be one continuation byte of the form 10xxxxxx,   otherwise the following character is is not a valid UTF-8 construct 
//  pop if-then-else temporary type info 
//  $Id: ackermann.java,v 1.2 2005-05-13 16:24:17 igouy-guest Exp $   http://www.bagley.org/~doug/shootout/  
//  ignore the first token, as we want n-1 parent dirs 
//  parameters = parameters of the constructor 
//  add ast transforms both by class names and classes, which should result in an error  
//  anything will do as we only check size == 1 
//  see if instanceof applies 
// CHECKSTYLE.ON: VisibilityModifierCheck 
//  no this$ methods for non-private isThis=true   super$ method for non-private isThis=false 
//  parameterize a type by using all of the parameters only 
//  exception unwrapping for stackless exceptions 
//  (, ), [, ], {, }   (, [, {   ), ], } 
//  there's a new line between { -> ... and the first statement 
//  the call is made on a collection type 
//  pseudo-random number generator 
/*      * Convert a non java class name to a java classname     * This is used to convert a script name to a name     * that can be used as a classname with the script is     * loaded in GroovyClassloader#load()     * The method simply replaces any invalid characters     * with "_".      */
//  varargs methods must not be preferred to methods without varargs   for example : 
/*  (non-Javadoc)    * @see groovy.lang.MetaClass#addNewStaticMethod(java.lang.reflect.Method)     */
//  $Id: spellcheck.java,v 1.1 2004-05-23 07:14:28 bfulgham Exp $   http://www.bagley.org/~doug/shootout/ 
//  ------------------ float ------------------ 
//  unsigned right shift 
//  store name of class away for use in constructor ident 
//  try to find a script from classpath*/ 
//  next_perm('1234', 2) -> '2314' 
//  iterator 
//  Perform an additional phase which has to be done *after* type checking 
/*  (non-Javadoc)    * @see org.xml.sax.XMLReader#setEntityResolver(org.xml.sax.EntityResolver)     */
//  start parsing at the compilationUnit rule 
/*  (non-Javadoc)    * @see groovy.lang.GroovyObject#getProperty(java.lang.String)     */
//  check for an alias 
/*   */
//  visit is authorized because the classnode belongs to the same source unit 
//  b==null 
// } 
//  singleton 
// ---------------------------------------------                    long  --------------------------------------------- 
//  constant types 
/*  If the length is under and we are asking for the key, then just look for the key. Don't build the map.  */
//  should be called on first build method only 
//  if a lower bound is declared, then we must perform the same checks that for an upper bound   but with reversed arguments 
// class Foo {def bar()}  <-- this block   void f(String me) {}   list of expressions, variable defs etc 
//  zero parameter closure e.g. { -> println 'no args' } 
//  index in the ref array 
//  we need to save the result 
// ---------------------------------------------                category handle 
//  ---------------------------------------------------------------   feature?: allow break/continue to labeled statement from loops? (is this even right syntax, or parser bug???) 
//  if original char meta class 
//  normalize an empty or whitespace line to \n   or strip the indent for lines containing non-space characters 
/*  (non-Javadoc)     * @see groovy.lang.MetaClass#getProperty(java.lang.Object, java.lang.String)      */
// ---------------------------------------------------------------------------   DESCRIPTIONS 
//  Groovy currently resolves this to last found so traverse in reverse order 
//  add the ancillary pieces 
//  a single match, which should be returned 
//  If key apparently not there, check to   make sure this was a valid read 
//  Handle the case where the exponential number ends without the actual exponent 
//  store value in array 
//  and finally we apply the generics information to the parameters and 
//  if a match is found, the compiler will have already set up aic constructor to hav   an argument which isn't needed since we'll be accessing the field; we must undo it 
//  grab may have added more transformations through new URLs added to classpath, so do one more scan 
//  GROOVY-3110: It may be an inner enum defined by this class itself, in which case it does not need to be   explicitly qualified by the currentClass name 
//  add "catch any" block to exception table for try part we do this   after the exception blocks, because else this one would supersede 
//    Create new binding for the current request. 
// if we get here, we just read in a back-slash from the source, now figure out what to do with it 
//  Top level control structures  ------------------------------------------------------------------------- 
//  owner should take care for us 
//  preempt resolve as info is partially available here (aliases and star imports won't match here) 
//  no optimization for BigDecimal yet  resultType = BigDecimal_TYPE; 
//  at least '<' is consumed ... read next chars. 
//  GROOVY-4272: repositioned it here from staticImport 
//  arguments.length>0 && !=null 
//  for each shared variable we add a reference and save it as field 
//  perform additional check on generics   ? extends toBeAssignedTo 
//  a two-bytes sequence was encountered 
//  Set up the scripting engine 
//  Used outside the for loop 
//  now lets try some methods on each item in the list 
//  this should probably be strenghtened when we support the A.super.foo() syntax 
//  end of catch 
//  can't have private and public methods of the same name, so rename original 
//  any marker tha begins a GString   any matching marker that ends a GString   the ${ marker that starts a GString expression   the } marker that ends a GString expression 
//  a is an interface, b is not 
//  if this operation has brought in more phase ops for ast transforms, keep recording them 
//  will be static in an instance 
//  go upper level 
//  otherwise the file would not be human readable 
//  in a loop where foo is a label. 
//  merge if and else values 
//  class loader for Groovy generated classes 
//  force no interfaces implemented 
//  load index 
//  last, we could have the spec saying List<String> and a classnode saying List<Integer> so   we must check that generics are compatible. 
//  load object 
//  no transform needed 
//  suppress exception 
//  we depend on the method selection having done a good    job before already, so the only case for this here is, that   we have no argument for the array, meaning params.length is   args.length+1. In that case we have to fill in an empty array 
//  add method:   void fireVetoableChange(String name, Object oldValue, Object newValue)      throws PropertyVetoException   {       this$vetoableChangeSupport.fireVetoableChange(name, oldValue, newValue) 
// remove duplicates 
//  First check whether it's already been loaded, if so use it 
//  else fall through for EmptyRange 
//  add leading zero if the length of the string is one 
/*  (non-Javadoc)      * @see groovy.lang.MetaClassImpl#invokeConstructor(java.lang.Object[])       */
//  GROOVY-7039 
/*      * Implementation notes     *     * GroovySystem stores a static reference to this instance so it is     * important to make it fast to create as possible. GroovyRunners are     * only used to run scripts that GroovyShell does not already know how     * to run so defer service loading until requested via the iterator or     * map access methods.     *     * The Map interface is for compatibility with the original definition     * of GroovySystem.RUNNER_REGISTRY. At some point it would probably     * make sense to dispense with associating a String key with a runner     * and provide register/unregister methods instead of the Map     * interface.      */
//  if "from" part is longer, fill it up with ".." 
//  should we trap exceptions and do an each? 
/*  (non-Javadoc)     * @see groovy.lang.MetaClass#getClassNode()      */
// InvokerHelper.runScript(scriptClass, null); 
//  SAM coercion 
//  GROOVY-6750 and GROOVY-6808 
//  GROOVY-6270 
//  apart from current phase, push new operations for every other phase in the master phase ops list 
//  we have for example a class name A, are in class X   and there is a nested class A$X. we want to be able    to access that class directly, so A becomes a valid   name in X. 
//  adapted from ClassWriter code 
//  this can happen for example when "null" is used in an assignment or a method parameter.   In that case, instead of storing the virtual type, we must "reset" type information   by determining the declaration type of the expression 
//  Add new class to help evict the last collected entry 
//  replace if whitespace was found 
//  generate a unique name for top-level Script classes 
//  reserved: a synthetic root for a CST 
// ---------------------------------------------                    short  --------------------------------------------- 
//  if a custom meta class creation handle is set 
/*  (non-Javadoc)     * @see org.xml.sax.XMLReader#getProperty(java.lang.String)      */
//  Throw earlier exception from parent loader if it exists, otherwise create a new exception 
//  receiver expressions with side effects should not be visited twice, avoid by using a temporary variable 
//  skip values with unknown source position 
//  expect a string key, or already a closing curly brace 
// Note:  This method is NOT called if left AND right are both BigIntegers or BigDecimals because  those classes implement a method with a better exact match. 
//  no method found, we need to replace 
// GROOVY-4497: don't visit super field if it is private 
//                 return cachedMethod;          }          return null; 
//  GROOVY-5561: if two files are compiled in the same source unit   and that one references the other, the getters for properties have not been 
//    KEYWORDS: TYPE SYSTEM 
//  According to https://shipilev.net/blog/2016/arrays-wisdom-ancients/#_conclusion   toArray(new T[0]) seems faster, safer, and contractually cleaner, and therefore should be the default choice now. 
//  otherwise, the file is in US-ASCII 
//  load groovy into "root.maven" classloader instead of "root" so that   groovy script can access Maven classes 
//  we must be careful, because the property node may be of a wrong type:   if a class contains a getter and a setter of different types or   overloaded setters, the type of the property node is arbitrary! 
//  "super" also requires special handling 
/* <Method[]> */
//  let's decide if this is a property invocation or a method call 
//  should NEVER reach here 
//  add may not have been processed yet 
//  Do nothing: We were not going to use it anyway. 
//  files to compile 
//  IF CRLF JUST KEEP LF 
//  visitStringch     String characters only used by lexer, never visited/created directly 
// ---------------------------------------------------------------------------   TYPES: NOTE THAT ORDERING AND VALUES ARE IMPORTANT TO LOCAL ROUTINES! 
/*  = null  */
//  used to mark a section of code as to be statically compiled   use to tell which method should be used in a binary expression   private bridge methods are methods used by an outer class to access an inner class method   private fields accessors are methods used by an inner class to access an outer class field   private fields mutators are methods used by an inner class to set an outer class field   callback for dynamic classes that contain statically compiled inner classes or methods   the type of the class which owns the property   for list.property expressions, we need the inferred component type   if a receiver is the receiver of a dynamic property (for mixed mode compilation) 
//  may need rewrap 
//  IMPLICIT_RECEIVER is handled elsewhere   however other access needs to be fixed for private access 
//  reset the matcher and start parsing string 
//  backup input files with extension 
//  only guard the script class 
//  preconditions   no text to return   no text to return   buffer hasn't been filled yet 
//  we put the class already in output to avoid the most inner classes   will be used as first class later in the loader. The first class   there determines what GCL#parseClass for example will return, so we 
//  Eat the following LF if any. 
// The overtype caret will simply be a horizontal line one pixel high   (once we determine where to paint it) 
// ---------------------------------------------------------------------------   SOURCE CREATION 
//  $Id: hash2.java,v 1.1 2004-05-23 05:50:10 bfulgham Exp $   http://www.bagley.org/~doug/shootout/ 
/*  Iterate through the map and do the same thing. Make sure children and children of children are chopped.   */
//  expressions 
//  let's replace this assignment to a subscript operator with a   method call   e.g. x[5] = 10   -> (x, [], 5), =, 10   -> methodCall(x, "putAt", [5, 10]) 
//  GROOVY-5681: initial expressions should be visited too! 
//  if the script text is null, i.e. the script content is invalid   use the name as cache key for the time being to trigger the validation by `groovy.lang.GroovyClassLoader.validate`   note: the script will not be cached due to the invalid script content,         so it does not matter even if cache key is not the md5 value of script content 
// bind the two first parameters of the generated closure to this class and the sections list 
// ----------------------------------------------------------------------   error due to missing method/field 
//  load this   load closure map   load wildcard 
// find the string section which precedes the row/col of the thrown exception 
//  we'll report those as errors later 
//  do -ve indexes based on actual args, so can't accurately calculate type here   so work out minimal type params and vararg on end will allow for other possibilities 
//  for the property 
//  GROOVY-6787: Don't override the original if the replacement placeholder doesn't respect the bounds,   otherwise the original bounds are lost which can result in accepting an incompatible type as an   argument, for example. 
//  Unary expressions 
//  The Great Computer Language Shootout   http://shootout.alioth.debian.org/   Fastest version under 100 LOC. Contributed by Jon Harrop, 2005 
//  def _result = HashCodeHelper.initHash() 
//  works fine in both languages   works fine in java; throws ClassCastException in groovy 
//  ------------------------------ 
//  handle arrays on both sides as special case for efficiency 
// String purple = "7C308D"; 
/*  return element i,j of infinite matrix A  */
//  GROOVY-5150: primitive type constants will be initialized directly 
// standard metaclass check 
//  thread one: newInstance script foo 
//  Original method may be null for the case of private or static methods 
//  constructor helper   This method is used instead of calling the constructor as   calling the constructor may require a table with MetaClass   selecting the constructor for each enum value. So instead we   use this method to have a central point for constructor selection   and only one table. The whole construction is needed because    Reflection forbids access to the enum constructor.   code:   def $INIT(Object[] para) {    return this(*para)   } 
//  we allow null objects in the object stream 
//  Inner classes 
/*      * Set nextObject to the next object. If there are no more     * objects then return false. Otherwise, return true.      */
//  Coerce the file URL to a File   See ClassNodeResolver.isSourceNewer for another method that replaces '|' with ':'.   WTF: Why is this done and where is it documented? 
//  inject message 
//  A normal merge. 
//  other modifiers 
//  remove 'public' when implied already if requested 
//  methods from GroovyType (todo: remove this horrible copy of SimpleGroovyType.java)      public GroovyAnnotationTypeDoc asAnnotationTypeDoc() {/*todo*/return null;}      public GroovyClassDoc asClassDoc() {/*todo*/ return null; }      public GroovyParameterizedType asParameterizedType() {/*todo*/return null;}      public GroovyTypeVariable asTypeVariable() {/*todo*/return null;}      public GroovyWildcardType asWildcardType() {/*todo*/return null;}      public String dimension() {/*todo*/ return null; } 
//  Clear all refs and gc() 
/* long[10] */
//  always use the expando properties 
//       P     Q     R     S     T     U     V     W 
//  registration already done or in process, abort 
//  add in unimplemented abstract methods from the interfaces 
//  reserved in java and groovy   reserved in java and groovy 
//  value is a list. 
//  we use the type of the first parameter 
//  setProperty 
//  when resolving methodCall() or getProp() or setProp() 
//  if origFloat and withoutCustomHandle 
//  GroovyDocErrorReporter interface 
//  GROOVY-5568, the property may be defined by DGM 
//  TODO handle local variables 
//  spread expressions 
//  will contain callSiteReceiverSwap.getType() 
//  Implementation of java.sql.getResultSet()   ------------------------------------------------------------ 
//  not through MOP to avoid infinite recursion 
//  calculate outer class which we need for this$0 
//  inject([:]) { a,e {@code ->} a {@code <<} [(e.key): e.value.groupBy(tail)] } 
/*  The file names in the current FileSet scan  */
//  use binding to store? 
//  using getPNR() to ignore generics at this point   and a different binary expression not to pollute the AST 
//  0x30('0') - 0x39('9') 
//  map containing named labels of parenting blocks 
//  increment to next register, double/long are using two places 
//  Just a guess that the pretty view will take 20 percent more than original. 
//  For consistency. 
//  |=   &=   ^=   ~ 
//    Build the AST 
//  if we are in an if/else branch, keep track of assignment 
//  $Id: lists.java,v 1.1 2004-05-23 07:12:55 bfulgham Exp $   http://www.bagley.org/~doug/shootout/ 
//  only visited when calling super() without parentheses, i.e. "super 99" is equivalent to "super(99)" 
//  scheme        = alpha *( alpha | digit | "+" | "-" | "." ) 
//  if left type is not a list but right type is a map, then we're in the case of a groovy   constructor type : A a = [x:2, y:3]   In this case, more checks can be performed 
//  identifies a function declaration   XXX br identifies a macro declaration   identifies a class declaration   identifies an interface declaration   identifies a mixin declaration 
//  $hash$code = _result 
//  assume we have a script (and it may have a @Field) 
/*  (non-Javadoc)        * @see java.io.Writer#write(int)         */
//  object has default meta class, so we need to replace it on demand 
//  BUG! exception in phase 'class generation' in source unit 'Script1.groovy'   SpreadExpression should not be visited here   fails after parser 
//  let's not add duplicate methods 
//  mangle resource name with the compiled pattern. 
//  ... solve puzzle 
//  the current implementation only checks for public modifier, because Groovy used to allow   handles on classes even if they are package protected and not in the same package.   There are situations where we could make more fine grained checks, but be careful of   potential breakage of existing code. 
//  to work with ant 1.6 
//  copy arguments for main class  
//  can take place) 
//  retrieve the content of the file using the provided encoding 
//  otherwise cleanup() will wipe out value 
//  Make sure we still have our entries, sample a few 
//  while condition 
//  Then get the iterator and generate the loop control 
//  to be used in generics, type must be boxed 
// swallow 
//  the outside context parts till now define placeholder we are not allowed to   generalize, thus we save that for later use...   extension methods are special, since they set the receiver as    first parameter. While we normally allow generalization for the first 
//  TypeChecked$TypeCheckingInfo can not be applied on constructors 
//  undo unwanted side-effect of verifier 
// AsmClassGenerator generator = new AsmClassGenerator(source, context, tracer, sourceName); 
//  -----------------------   feature: static imports   ----------------------- 
//  uppercase to hide from jarjar 
//  put it in the list 
//  rcurried arguments are done lazily to allow normal method selection between overloaded alternatives 
//  we do here a null check because the params field might not have been set yet 
// correct to method level generics for the overriding method 
// A transposition and a casemodification 
//  GROOVY-7909 A Helper class in same compilation unit may have not been created when referenced   Here create a symbol as a "placeholder" and it will be resolved later. 
//  SEE BELOW 
//  Entry was invalidated during deletion. But it could   have been re-inserted, so we must re-traverse.   To avoid useless contention, get lock to wait out modifications   before re-traversing. 
/*  (non-Javadoc)           * @see groovy.lang.GroovyObjectSupport#getProperty(java.lang.String)            */
//  we use a ClassExpression for transportation to EnumVisitor 
// deprecated                case GroovyTokenTypes.LITERAL_with:   (String)itr.next() 
//  hold flip_count result for each swap index 
//  Views 
//  def (key, value) == list 
//  if a returned inferred type is available and no @TypeCheckingInfo is on node, then add an 
/* char[6] */
//  merge onto end of previous GString to avoid an empty bridging value 
//  to keep the stack height, we need to leave   one Object[] on the stack as last element. At the   same time, we need the Object[] on top of the stack 
//  the inferred type here should be a list of what the subcall returns 
//  have first to find matching super class or interface 
//  GROOVY-4013: If it is an inner class, tracking its dependencies doesn't really   serve any purpose and also interferes with the caching done to track dependencies 
//  there of course transformed parameter type and argument must fit 
//  _result = HashCodeHelper.updateHash(_result, super.hashCode()) 
//  let's remove any non-MapEntryExpression instances   such as if the last expression is a ClosureExpression   so let's wrap the named method calls in a Map expression 
